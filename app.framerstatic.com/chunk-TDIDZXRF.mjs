import{a as Ce,b as ve}from"https://app.framerstatic.com/chunk-GVCWBLI5.mjs";import{a as Le}from"https://app.framerstatic.com/chunk-R6TE5BZB.mjs";import{e as pe}from"https://app.framerstatic.com/chunk-5VCCZK32.mjs";import{De as Pe,lg as Se,pb as he,uf as ye}from"https://app.framerstatic.com/chunk-Q54L4BMQ.mjs";import{cd as ge,dd as be,gd as Ie}from"https://app.framerstatic.com/chunk-4BR6WBUV.mjs";import{$q as de,Ec as re,El as ce,Ib as oe,Ln as me,Pe as se,_q as ue,hd as ae,jr as Y,ok as le,tr as W,vb as te,wc as ne,wr as fe,xc as ie,yc as k,zc as T}from"https://app.framerstatic.com/chunk-JMNEQD26.mjs";import{a as X,b as Z,i as q,l as ee}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as G,b as J}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{A as Q,v as K}from"https://app.framerstatic.com/chunk-CQ6F5PRQ.mjs";import{a as $}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as _}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";function A(e,t,o){return e.replace(te,(i,l)=>l===t.id?o.slug:`:${t.name.toLowerCase()}`)}function ke(e,t,o,i="Home",l){let s=k(t)&&!l?Ce(t):void 0,a=k(t)?ve(e,t):null;if(!t||!ne(t)||!a)return;let m="";if(o&&o!==me){let n=e.root.getNonDefaultLocale(o);n?.slug&&(m="/"+n.slug)}if(a.id===e.root.homePageNodeId)return m?m+"/":i;let r=Ie(e,a);if(r){if(s?.identifier){let n=Y(e,s.identifier);if(n){let c=W(e,o),u=n.getItemToSlug(c)[s.collectionItemId];if(u){let y=n.variables.find(le);if(y){let b={id:s.collectionItemId,slug:u};return m+A(r,y,b)}}}return}if(se(a)&&a.dataIdentifier){let n=Y(e,a.dataIdentifier);if(n&&!s){let c=n.getSlugVariable();if(c){let f=W(e,o),u=n.getItemToSlug(f);return m+ge(r,u,c)}}}return m+r}}var D=_(G());var Ue=K("usePreloadedScope");function Te(e,t){if(!t||!Z(e))return;let o=t.tree.get(e);!pe(o)||o.isLoaded()||(Ue.debug("Loading scope node",e),o.load())}function ht(e){let t=de();(0,D.useEffect)(()=>Te(e,t),[e])}function Ve(e){let t=(0,D.useContext)(ue);(0,D.useEffect)(()=>Te(e,t),[e,t])}function Re(e){Ve(k(e)?e.webPageId:void 0)}var p=_(G());var xe="clearButton_cjpnope";var B=_(J()),ze=/\W+/u;function $e(e){return new Set(e.split(ze))}function Ke(e,t,o){return(0,p.useMemo)(()=>{let i=new Set;if(!e||!t)return i;for(let l of o.keys()){let s=t.get(l);!s||!fe(s).every(r=>{if(!r)return!1;for(let n of e)if(n.endsWith(r))return!0;return!1})||i.add(l)}return i},[e,t,o])}var Ut=({tree:e,link:t,localeId:o,hideSlugValues:i=!1,homePageName:l="Home",variableInfo:s,...a})=>{Re(t);let m=e.getContentManagementNode(),r=W(e,o),n=e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e),c=e.root.getDataIdentifierByWebPageIdMap(),f=m?.getSlugVariableByIdentifierMap(),u=m?.getItemToSlugByIdentifierMap(r),y=re(t,n),b=ie(t)?t.url:"",I=y?"":b,g=ke(e,t,o,l,i)??I,V=s?.ids,P=Ke(V,n,c);return(0,B.jsx)(Qe,{...a,link:t,readableLink:g,homePageName:l,variableInfo:s,hideSlugValues:i,webPageIdToRawPathMap:n,dataIdentifierByWebPageIdMap:c,slugVariableByIdentifierMap:f,itemToSlugByIdentifierMap:u,collectionPagesWithVariablesInScope:P,routerLocale:r,selectedPageMissing:y})},Qe=(0,p.memo)(function({id:t,link:o,onChange:i,constantChange:l,supportsPageLinks:s,hideSlugValues:a,supportsVariables:m,variableInfo:r,autoFocus:n,className:c,enabled:f,readOnly:u,tabIndex:y,onMouseDown:b,homePageName:I,onClear:g,menuOffset:V,menuWidth:P,menuClassName:d,onOpenChange:h,backdropEnabled:S,linkListStickySectionHeaders:C,hasError:v,webPageIdToRawPathMap:L,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,routerLocale:E,readableLink:O,selectedPageMissing:Be}){let z=Be||!!v,[H,Me]=(0,p.useState)(()=>De(O)),F=(0,p.useMemo)(()=>We({webPageIdToRawPathMap:L,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,routerLocale:E,homePageName:I,variableInfo:r,collectionPageType:a?"noSlugInScope":"showSlugValues"}),[L,R,M,N,w,E,I,r,a]),j=(0,p.useMemo)(()=>We({webPageIdToRawPathMap:L,dataIdentifierByWebPageIdMap:R,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:N,collectionPagesWithVariablesInScope:w,routerLocale:E,homePageName:I,variableInfo:r,collectionPageType:"slugInScope"}),[L,R,M,N,w,E,I,r]),Ne=(0,p.useCallback)((x,U)=>{if(U||l){if(x===O)return;let Ae=F.get(x)??j.get(x)??T({url:x});if(i(Ae,U),U)return}let _e=De(x);Me(_e)},[l,O,F,j,i]),we=(0,p.useMemo)(()=>Ze(F,j,H),[F,j,H]),Ee=!!r?.idOfMutableVariableProvider,Oe=m&&Ee,Fe=(0,p.useContext)(Se)===null,[je]=(0,p.useState)(()=>(ee(o)||q(o)||ae(o))&&!Oe&&Fe);return(0,B.jsx)(ye,{id:t,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:s,showAllWhenOpened:k(o),tabIndex:y,onMouseDown:b,searchItemValue:!!H,items:we,value:O,placeholder:Ge(o,z,s),constantChange:!0,onChange:Ne,autoFocus:X(n)?n:je,menuOffset:V,enabled:f,readOnly:u,hasError:z,getSearchTokens:$e,wrapperClassName:c,rightSlot:g?(0,B.jsx)(Pe,{variant:"clean",type:"button",className:xe,onClick:g,title:"Remove Link",children:(0,B.jsx)(he,{})}):void 0,onOpenChange:h,backdropEnabled:S,menuWidth:P,menuClassName:d,stickySectionHeaders:C,containOverscroll:!0})});function Ge(e,t,o){return t?"Missing":Q(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function Je(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let i of e.combined.get(o)||[])if(i.type==="collectionreference"&&i.dataIdentifier===t)return o}}function We({webPageIdToRawPathMap:e,dataIdentifierByWebPageIdMap:t,slugVariableByIdentifierMap:o,itemToSlugByIdentifierMap:i,collectionPagesWithVariablesInScope:l,routerLocale:s,variableInfo:a,homePageName:m,collectionPageType:r}){let n=new Map;if(!e||r==="slugInScope"&&l.size===0)return n;let c=s.slug?`/${s.slug}`:"";for(let[f,u]of e.entries()){if(u==="/"){if(r==="slugInScope")continue;let d=T({webPageId:f}),h=c?c+u:m??u;n.set(h,d);continue}let b=t.get(f);if(!b){if(r==="slugInScope")continue;let d=T({webPageId:f});n.set(c+u,d);continue}let I=o?.get(b);if(!I)continue;let g=I.id,V=g;if(a&&!a.ids.has(g)){for(let d of a.ids)if(ce(d,g)){V=d;break}}let P=i?.get(b);if(r==="slugInScope"||r==="noSlugInScope"){let d=l.has(f),h=be(u,I);if(r==="slugInScope"&&d){$(a,"variableInfo should exist when inScope");let S=Je(a,b),C=S?{[g]:oe(V,S)}:void 0,v=T({webPageId:f,pathVariables:C});n.set(c+h,v)}else if(r==="noSlugInScope"&&!d){if(!P)continue;let S=Le(P);if(!S)continue;let[C,v]=S,L={identifier:b,collectionItemId:C,key:g,value:v},R=T({webPageId:f,pathVariables:{[g]:L}});n.set(c+h,R)}continue}if(P)for(let d of Object.keys(P)){let h=P[d];if(!h)continue;let C=A(u,I,{id:d,slug:h}),v={identifier:b,collectionItemId:d,key:g,value:h},L=T({webPageId:f,pathVariables:{[g]:v}});n.set(c+C,L)}}return n}function De(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let i=t.split("/").filter(Boolean);for(;i.length>0;){let l=i.join("/")+"/",s="/"+l;if(t.startsWith(s)||t.startsWith(l))return s;i.pop()}return null}var Xe=/\/$/u;function Ze(e,t,o){let i=[],l=Array.from(e.keys()),s=Array.from(t.keys());if(o){let a=[];[...s,...l].forEach(n=>{if(!n.startsWith(o))return;let c=n.replace(o,".../");a.push({type:"option",value:n,title:c})});let r=o.replace(Xe,"");return i.push({type:"section",value:r,title:r,items:a}),i}return s.length>0&&i.push({type:"section",value:"CMS",items:s.map(a=>({type:"option",value:a}))}),l.length>0&&i.push({type:"section",value:"Pages",items:l.map(a=>({type:"option",value:a}))}),i}export{ke as a,ht as b,Re as c,Ut as d};
//# sourceMappingURL=https://app.framerstatic.com/chunk-TDIDZXRF.mjs.map
