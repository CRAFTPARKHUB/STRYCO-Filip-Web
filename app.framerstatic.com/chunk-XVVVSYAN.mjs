import{m as Yi,q as go,r as Ji,t as ta}from"https://app.framerstatic.com/chunk-6RQGRTAF.mjs";import{Ha as $i,Na as Xi,Pa as Ze,Va as Ki,Xa as _i,db as qi,e as Ei,f as Oi,g as Li,h as Vi,i as Ai,ib as oa,j as vt,jb as ra,nb as na}from"https://app.framerstatic.com/chunk-KWDFHEGO.mjs";import{G as Mi,Jd as fo,Qa as Di,X as Ri,Y as ki,dc as Bi,ea as wi,h as Ci,j as Ii,k as Ti,l as Ni,m as ar,pa as yt,pb as Fi}from"https://app.framerstatic.com/chunk-Z52HPYUI.mjs";import{b as Hi,c as St}from"https://app.framerstatic.com/chunk-ZO5J4ZDO.mjs";import{a as Gi}from"https://app.framerstatic.com/chunk-CKN4QK3D.mjs";import{k as cr}from"https://app.framerstatic.com/chunk-EDICM4ZE.mjs";import{i as ji}from"https://app.framerstatic.com/chunk-YE4QPCYK.mjs";import{b as Ye}from"https://app.framerstatic.com/chunk-J5GSEMYU.mjs";import{b as ho,c as Wi,g as ea}from"https://app.framerstatic.com/chunk-CRNX7RGT.mjs";import{g as lr,u as Ui}from"https://app.framerstatic.com/chunk-XRODVMEA.mjs";import{a as zi}from"https://app.framerstatic.com/chunk-T232BVY3.mjs";import{G as $n,Id as uo,Jd as mo,Lb as Si,Mb as vi,Nc as lo,O as Qn,P as ei,Qg as ir,Sb as xi,U as ri,a as Hn,e as Wn,ha as _e,ka as to,m as Un,qb as so,rb as hi,sb as gi,ua as ht,va as ni,vd as co,ve as rr,vf as bi,wd as po,we as nr,ya as ii,zb as yi}from"https://app.framerstatic.com/chunk-FPS4GZUH.mjs";import{e as or}from"https://app.framerstatic.com/chunk-5VCCZK32.mjs";import{f as qe}from"https://app.framerstatic.com/chunk-IHU2PUEH.mjs";import{b as Qi,d as dr}from"https://app.framerstatic.com/chunk-6GUIIDJM.mjs";import{Tg as gt}from"https://app.framerstatic.com/chunk-Q54L4BMQ.mjs";import{a as Zi}from"https://app.framerstatic.com/chunk-5JBS644N.mjs";import{C as qn,E as Ke,Hf as ui,Jc as ro,Ki as ao,Qc as si,R as Yn,Rb as ai,T as Zn,V as Jn,di as fi,eh as mi,gd as li,l as jn,mc as oo,n as Xn,o as Jt,p as Kn,r as Qt,v as _n,y as eo}from"https://app.framerstatic.com/chunk-4BR6WBUV.mjs";import{$d as qr,$e as Ge,B as R,Bc as jo,Cr as Zo,Cv as Vn,Eq as dt,Fe as Ut,Fg as qt,Fq as $e,G as Wo,Ge as Xo,Gv as An,H as F,Hb as $r,Hc as he,He as it,Hf as nn,Hp as bn,I as N,Ie as Zr,Ig as an,Je as Jr,Jk as un,Ju as ft,Kc as Kr,Kv as zn,Le as jt,Lo as yn,Me as $t,Ne as Xt,Nf as Ko,Oe as Kt,Oj as cn,Pe as J,Pj as dn,Pq as Nn,Qj as pn,Qk as mn,Qq as Mn,Re as Ae,Rr as mt,Se as ze,Sl as Yt,Sm as _o,Sq as z,Sr as Xe,Ue as Qr,Un as hn,V as Wr,Ve as en,W as Uo,We as ge,Wr as ae,Xd as _r,Xe as at,Xq as Rn,Xr as Pn,Xs as Qo,Xv as Gn,Ys as er,Zd as Ve,Zs as Fn,_d as Ht,_e as st,_o as Sn,_s as Bn,af as tn,ao as qo,bf as _t,bo as gn,br as pt,bw as ti,ct as O,cw as oi,do as Yo,ej as sn,ep as vn,fe as Wt,fm as fn,fw as ci,ga as de,gd as E,hd as A,hj as ye,hm as He,hr as kn,id as Le,ip as xn,iw as di,jb as At,jj as Se,jn as ct,jr as ut,jw as pi,kj as ne,kv as On,l as j,mc as zt,mf as on,ot as En,pv as Ln,qe as $o,rj as ln,rr as wn,se as Yr,tc as q,tm as lt,tt as tr,uv as Zt,vf as rn,wf as Me,xc as Xr,zc as Gt}from"https://app.framerstatic.com/chunk-JMNEQD26.mjs";import{a as Dn,b as Jo}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import{c as We,g as Ue,i as Cn,r as je,u as Y,v as In,w as ie,y as ee,z as Tn}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{K as Ho,L as ec,f as Go,p as Ar,q as zr,s as Gr}from"https://app.framerstatic.com/chunk-5GP6FPZ7.mjs";import{b as no,c as io}from"https://app.framerstatic.com/chunk-GOOR6KBX.mjs";import{K as Vr}from"https://app.framerstatic.com/chunk-PPOWLCIV.mjs";import{g as X,i as sr,m as Pi}from"https://app.framerstatic.com/chunk-EBB7OSGG.mjs";import{b as Lr}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as re}from"https://app.framerstatic.com/chunk-MKASFDMK.mjs";import{a as Vt,b as oe,d as W,f as Ur,i as $,j as jr,l as Ne}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Ia as Lt,b as Hr}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import{e as zo,f as Er,k as Or}from"https://app.framerstatic.com/chunk-53WSEHWE.mjs";import{A as H,C as Et,D as Ot,E as Ee,G as Vo,H as Fr,I as Ao,K as Oe,L as fe,ea as Br,l as B,p as Dr,v as me,z as k}from"https://app.framerstatic.com/chunk-CQ6F5PRQ.mjs";import{a as b,b as Te}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{c as nt,d as Ql,e as Bt,j as I,k as ce,l as Lo}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var It=nt(ve=>{"use strict";ve.removeLeadingAndTrailingHTTPWhitespace=e=>e.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,"");ve.removeTrailingHTTPWhitespace=e=>e.replace(/[ \t\n\r]+$/u,"");ve.isHTTPWhitespaceChar=e=>e===" "||e==="	"||e===`
`||e==="\r";ve.solelyContainsHTTPTokenCodePoints=e=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(e);ve.soleyContainsHTTPQuotedStringTokenCodePoints=e=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(e);ve.asciiLowercase=e=>e.replace(/[A-Z]/ug,t=>t.toLowerCase());ve.collectAnHTTPQuotedString=(e,t)=>{let o="";for(t++;;){for(;t<e.length&&e[t]!=='"'&&e[t]!=="\\";)o+=e[t],++t;if(t>=e.length)break;let r=e[t];if(++t,r==="\\"){if(t>=e.length){o+="\\";break}o+=e[t],++t}else break}return[o,t]}});var ws=nt((Ky,ks)=>{"use strict";var{asciiLowercase:bo,solelyContainsHTTPTokenCodePoints:ip,soleyContainsHTTPQuotedStringTokenCodePoints:ap}=It();ks.exports=class{constructor(t){this._map=t}get size(){return this._map.size}get(t){return t=bo(String(t)),this._map.get(t)}has(t){return t=bo(String(t)),this._map.has(t)}set(t,o){if(t=bo(String(t)),o=String(o),!ip(t))throw new Error(`Invalid MIME type parameter name "${t}": only HTTP token code points are valid.`);if(!ap(o))throw new Error(`Invalid MIME type parameter value "${o}": only HTTP quoted-string token code points are valid.`);return this._map.set(t,o)}clear(){this._map.clear()}delete(t){return t=bo(String(t)),this._map.delete(t)}forEach(t,o){this._map.forEach(t,o)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}});var Fs=nt((_y,Ds)=>{"use strict";var{removeLeadingAndTrailingHTTPWhitespace:sp,removeTrailingHTTPWhitespace:Ps,isHTTPWhitespaceChar:lp,solelyContainsHTTPTokenCodePoints:br,soleyContainsHTTPQuotedStringTokenCodePoints:cp,asciiLowercase:Cr,collectAnHTTPQuotedString:dp}=It();Ds.exports=e=>{e=sp(e);let t=0,o="";for(;t<e.length&&e[t]!=="/";)o+=e[t],++t;if(o.length===0||!br(o)||t>=e.length)return null;++t;let r="";for(;t<e.length&&e[t]!==";";)r+=e[t],++t;if(r=Ps(r),r.length===0||!br(r))return null;let n={type:Cr(o),subtype:Cr(r),parameters:new Map};for(;t<e.length;){for(++t;lp(e[t]);)++t;let i="";for(;t<e.length&&e[t]!==";"&&e[t]!=="=";)i+=e[t],++t;if(i=Cr(i),t<e.length){if(e[t]===";")continue;++t}let a=null;if(e[t]==='"')for([a,t]=dp(e,t);t<e.length&&e[t]!==";";)++t;else{for(a="";t<e.length&&e[t]!==";";)a+=e[t],++t;if(a=Ps(a),a==="")continue}i.length>0&&br(i)&&cp(a)&&!n.parameters.has(i)&&n.parameters.set(i,a)}return n}});var Es=nt((qy,Bs)=>{"use strict";var{solelyContainsHTTPTokenCodePoints:pp}=It();Bs.exports=e=>{let t=`${e.type}/${e.subtype}`;if(e.parameters.size===0)return t;for(let[o,r]of e.parameters)t+=";",t+=o,t+="=",(!pp(r)||r.length===0)&&(r=r.replace(/(["\\])/ug,"\\$1"),r=`"${r}"`),t+=r;return t}});var As=nt((Zy,Vs)=>{"use strict";var up=ws(),mp=Fs(),fp=Es(),{asciiLowercase:Os,solelyContainsHTTPTokenCodePoints:Ls}=It();Vs.exports=class{constructor(t){t=String(t);let o=mp(t);if(o===null)throw new Error(`Could not parse MIME type string "${t}"`);this._type=o.type,this._subtype=o.subtype,this._parameters=new up(o.parameters)}static parse(t){try{return new this(t)}catch{return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(t){if(t=Os(String(t)),t.length===0)throw new Error("Invalid type: must be a non-empty string");if(!Ls(t))throw new Error(`Invalid type ${t}: must contain only HTTP token code points`);this._type=t}get subtype(){return this._subtype}set subtype(t){if(t=Os(String(t)),t.length===0)throw new Error("Invalid subtype: must be a non-empty string");if(!Ls(t))throw new Error(`Invalid subtype ${t}: must contain only HTTP token code points`);this._subtype=t}get parameters(){return this._parameters}toString(){return fp(this)}isJavaScript({prohibitParameters:t=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!t||this._parameters.size===0;default:return!1}default:return!1}}isXML(){return this._subtype==="xml"&&(this._type==="text"||this._type==="application")||this._subtype.endsWith("+xml")}isHTML(){return this._subtype==="html"&&this._type==="text"}}});function ia(e){return e.homeNodeId}function tc(e,t){let o=ia(t);return o?e.getNode(o):null}function aa(e,t,o){let r=nc(e,t);return!!r&&r.id===o.id}function xt(e,t){return t?.parentid===e.id&&!Qr(t)}function sa(e,t){let o=e.get(t.homeNodeId);return xt(t,o)}function oc(e,t,o){if(o&&!xt(t,o))return;let r=ia(t);o&&o.id===r||o===r||t.set({homeNodeId:o?o.id:null})}function la(e,t){let o=e.get(t.homeNodeId);if(o){let r=e.getGroundNodeFor(o);if(xt(t,r))return r}if(!t.isLoaded())return null;for(let r=t.children.length-1;r>=0;r--){let n=t.children[r];if(n&&rc(t,n))return n}return null}function rc(e,t){return!(!t||!xt(e,t)||Ge(t)||ge(t)&&!ln(t))}function nc(e,t){let o=tc(e,t);return xt(t,o)?o:la(e,t)}function ca(e,t){let o=la(e,t);oc(e,t,o)}function da(e,t,o){!(o&&o.enum===6)&&!sa(e,t)&&(ca(e,t),me("app").debug("updated home node:",t.id,t.homeNodeId))}var{onewayMethodTemplate:vm,voidMethodTemplate:xm,valueMethodTemplate:ic,streamMethodTemplate:bm}=Or,ur;(t=>t.service={id:"__ColorSampler__",fingerprint:"2f07b191423077f3239a93a5dec7e417",methods:{sampleColor:{}},newOutgoingWrapper:o=>({sampleColor:ic.bind(-1,"sampleColor",!1,o)})})(ur||={});var mr;(r=>{r.service=ur.service;function t(n){let i=zo.shared();return{expect:()=>i.expectWithoutDiscovery(r.service,n),discover:a=>i.discover(r.service,n,a),register:a=>i.register({channel:n,service:r.service,implementation:a})}}r.on=t;async function o(n){zo.shared().unregister(n)}r.unregister=o})(mr||={});var ac={track:!0};function pa(e){let t={...e,event:"preview_shown"};Lr(t,ac)}var yo=class extends At("VekterTool"){constructor(o,r){super();I(this,"enum",49);I(this,"wantsAutoscrolling",!1);I(this,"engine");I(this,"onKeyDown");I(this,"onKeyPress");I(this,"onKeyUp");I(this,"displaySelectionBox",!1);I(this,"displaySelectionHandles",!1);I(this,"displayPaddingHandles",!1);I(this,"displayGapHandles",!1);I(this,"displayViewportHandle",!1);I(this,"displayViewportLabel",!1);I(this,"cmsBadge","hidden");this.engine=o}start(){}stop(){}cancel(){}update(){}};function ua(e,t){if(e===t)return!0;if(e.constructor!==t.constructor)return!1;let o=e.keys();for(let r of o){switch(r){case"id":case"left":case"right":case"top":case"bottom":case"widthFactor":case"heightFactor":case"centerAnchorX":case"centerAnchorY":case"children":case"parentid":case"styledText":case"cache":case"update":case"mutable":case"isMaster":case"originalid":case"replicaInfo":case"duplicatedFrom":continue}if(r.startsWith("_"))continue;let n=e[r],i=t[r];if(r==="rotation"&&(n=n??0,i=i??0),!de(n,i))return!1}return!0}var ma="https://app.framerstatic.com/cursor-add-6XAMN4WT.png";var fa="https://app.framerstatic.com/cursor-add@2x-2LFPOUCY.png";var ha="https://app.framerstatic.com/cursor-disconnect-ZKL7EWFU.png";var ga="https://app.framerstatic.com/cursor-disconnect@2x-OE3AENSJ.png";var ya="https://app.framerstatic.com/cursor-feedback-BOBWQH3Z.png";var Sa="https://app.framerstatic.com/cursor-feedback@2x-6D4B4MBW.png";var va="https://app.framerstatic.com/cursor-grab-FRV55RHP.png";var xa="https://app.framerstatic.com/cursor-grab@2x-GIY2VUEH.png";var ba="https://app.framerstatic.com/cursor-grabbing-OKC4B74I.png";var Ca="https://app.framerstatic.com/cursor-grabbing@2x-WE42DW3I.png";var Ia="https://app.framerstatic.com/cursor-insert-6UGIJVAR.png";var Ta="https://app.framerstatic.com/cursor-insert@2x-ZOKYLV6L.png";var Na="https://app.framerstatic.com/cursor-remove-Q4ORWDOQ.png";var Ma="https://app.framerstatic.com/cursor-remove@2x-QZ7R5XN6.png";var Ra="https://app.framerstatic.com/cursor-swap-2VDBHJ6M.png";var ka="https://app.framerstatic.com/cursor-swap@2x-BAI7OT3Z.png";var wa="https://app.framerstatic.com/cursor-vector-add-L3563YFF.png";var Pa="https://app.framerstatic.com/cursor-vector-add@2x-24A2HJDM.png";var Da="https://app.framerstatic.com/cursor-vector-point-6OWAA3FG.png";var Fa="https://app.framerstatic.com/cursor-vector-point@2x-4OEKRKH6.png";var Ba="https://app.framerstatic.com/cursor-vector-OLHKU4LP.png";var Ea="https://app.framerstatic.com/cursor-vector@2x-YFL4EEVU.png";var Oa="https://app.framerstatic.com/cursor-zoom-in-2YKQ3Z67.png";var La="https://app.framerstatic.com/cursor-zoom-in@2x-ZUXRFEB6.png";var Va="https://app.framerstatic.com/cursor-zoom-out-IWSRWDMJ.png";var Aa="https://app.framerstatic.com/cursor-zoom-out@2x-EW4OYJ5J.png";var za="https://app.framerstatic.com/resize-east-west-ANAPBU4H.png";var Ga="https://app.framerstatic.com/resize-east-west@2x-HS4NZ3H2.png";var Ha="https://app.framerstatic.com/resize-east-XHHFSY6J.png";var Wa="https://app.framerstatic.com/resize-east@2x-3TA77JQ5.png";var Ua="https://app.framerstatic.com/resize-nesw-GL7KYSRE.png";var ja="https://app.framerstatic.com/resize-nesw@2x-7OD4PILK.png";var $a="https://app.framerstatic.com/resize-north-east-OYDCT3XA.png";var Xa="https://app.framerstatic.com/resize-north-east@2x-GB4FBRV3.png";var Ka="https://app.framerstatic.com/resize-north-south-JYDNIYWS.png";var _a="https://app.framerstatic.com/resize-north-south@2x-IHAJOLEA.png";var qa="https://app.framerstatic.com/resize-north-west-WOGBMCQ7.png";var Ya="https://app.framerstatic.com/resize-north-west@2x-CGE2AJ7O.png";var Za="https://app.framerstatic.com/resize-north-TOADQ3IJ.png";var Ja="https://app.framerstatic.com/resize-north@2x-U6CXDTI2.png";var Qa="https://app.framerstatic.com/resize-nwse-CTXL5YSS.png";var es="https://app.framerstatic.com/resize-nwse@2x-H5TFIU4Y.png";var ts="https://app.framerstatic.com/resize-south-east-7BL2E7ZY.png";var os="https://app.framerstatic.com/resize-south-east@2x-YOYUZV36.png";var rs="https://app.framerstatic.com/resize-south-west-EZHHVQZN.png";var ns="https://app.framerstatic.com/resize-south-west@2x-XZTWVP5E.png";var is="https://app.framerstatic.com/resize-south-MEM66EWG.png";var as="https://app.framerstatic.com/resize-south@2x-KMVPTHAA.png";var ss="https://app.framerstatic.com/resize-west-GRT5XBDQ.png";var ls="https://app.framerstatic.com/resize-west@2x-DBCUQ6K5.png";var cs="https://app.framerstatic.com/touch-active-CQT44XON.png";var ds="https://app.framerstatic.com/touch-active@2x-N44WHZVB.png";var ps="https://app.framerstatic.com/touch-K4JGV3WE.png";var us="https://app.framerstatic.com/touch@2x-M3Y2EBTW.png";var ms={"cursor-add":[ma,fa],"cursor-disconnect":[ha,ga],"cursor-feedback":[ya,Sa],"cursor-grab":[va,xa],"cursor-grabbing":[ba,Ca],"cursor-insert":[Ia,Ta],"cursor-remove":[Na,Ma],"cursor-swap":[Ra,ka],"cursor-vector-add":[wa,Pa],"cursor-vector-point":[Da,Fa],"cursor-vector":[Ba,Ea],"cursor-zoom-in":[Oa,La],"cursor-zoom-out":[Va,Aa],"resize-nesw":[Ua,ja],"resize-nwse":[Qa,es],"resize-north-east":[$a,Xa],"resize-north-west":[qa,Ya],"resize-south-east":[ts,os],"resize-south-west":[rs,ns],"resize-east-west":[za,Ga],"resize-west":[ss,ls],"resize-east":[Ha,Wa],"resize-north-south":[Ka,_a],"resize-north":[Za,Ja],"resize-south":[is,as],"touch-active":[cs,ds],touch:[ps,us]};var sd=Vr.isFirefox(),Q=(e,t=12)=>{let o=W(t)?t:t.x,r=W(t)?t:t.y,[n,i]=ms[e];return sd?`url(${n}) ${o} ${r}, auto`:`-webkit-image-set(url(${n}) 1x, url(${i}) 2x) ${o} ${r}, default`},hr={x:6,y:2},Xh=Q("cursor-vector",hr),Kh=Q("cursor-vector-add",hr),_h=Q("cursor-vector-point",hr),qh=Q("cursor-disconnect",10),Yh=Q("cursor-add",10),Zh=Q("cursor-remove",10),Jh=Q("cursor-swap",{x:3,y:3}),Qh=Q("cursor-feedback",{x:16,y:16}),So={x:15,y:15},eg=Q("cursor-insert",So),tg=Q("cursor-zoom-in",So),og=Q("cursor-zoom-out",So),fs=Q("cursor-grabbing",So),ld=(e,t)=>{switch(e){case 0:{if(t.x&&t.y)return 8;if(t.x)return 6;if(t.y)return 2;break}case 1:{if(t.x)return 7;break}case 2:{if(t.x&&t.y)return 6;if(t.x)return 8;if(t.y)return 0;break}case 3:{if(t.y)return 5;break}case 5:{if(t.y)return 3;break}case 6:{if(t.x&&t.y)return 2;if(t.x)return 0;if(t.y)return 8;break}case 7:{if(t.x)return 1;break}case 8:{if(t.x&&t.y)return 0;if(t.x)return 2;if(t.y)return 6;break}default:break}return e},cd=e=>8-e,dd=(e,t,o)=>{let{fx:r,fy:n}=e,i=t.findIndex(d=>d.fx===r&&d.fy===n),a=ld(i,o),l=t[a];b(l,"handle must be defined",l,t);let s=cd(a),c=t[s];return b(c,"handle must be defined",c,t),R.angleFromX(c,l)},pd=e=>{switch(e){case 0:return 15;case 1:return 8;case 2:return 9;case 3:return 14;case 5:return 10;case 6:return 13;case 7:return 12;case 8:return 11}},Je=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-21.7%' y='-28.3%' width='143.5%' height='158.4%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M5 10.25v3.5c0 .138.112.25.25.25H13v2.7a.25.25 0 0 0 .415.187l5.37-4.699a.25.25 0 0 0 0-.376l-5.37-4.7a.25.25 0 0 0-.415.189V10H5.25a.25.25 0 0 0-.25.25Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M6 11h8V9l3.5 3-3.5 3v-2H6z'/></g></g></svg>") 12 12, pointer`,ud=e=>`url("data:image/svg+xml,<svg width='24' height='24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-17%' y='-30.1%' width='133.9%' height='160.3%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter><path d='M9 13.98v2.72a.25.25 0 0 1-.415.187l-5.37-4.699a.25.25 0 0 1 0-.376l5.37-4.7A.25.25 0 0 1 9 7.302V10l6 .02V7.3a.25.25 0 0 1 .415-.187l5.37 4.699a.25.25 0 0 1 0 .376l-5.37 4.7a.25.25 0 0 1-.415-.189V14l-6-.02Z' id='b'/></defs><g fill='none' fill-rule='evenodd'><use fill='%23000' filter='url(%23a)' xlink:href='%23b' transform='translate(0, 0.75) rotate(${e} 0 0)' transform-origin='center center'/><use fill='%23000' filter='url(%23c)' xlink:href='%23b' transform='translate(0, 1) rotate(${e} 0 0)' transform-origin='center center'/><g transform='rotate(${e} 0 0)' transform-origin='center center'><use fill='%23FFF' xlink:href='%23b'/><path fill='%23000' d='M16 13v2l3.5-3L16 9v2H8V9l-3.5 3L8 15v-2z'/></g></g></svg>") 12 12, pointer`,fr=e=>e+180,md=(e,t,o)=>{if(t){let r=t.x.max&&t.x.min,n=t.y.max&&t.y.min,i=pd(e),a=i===8||i===12,l=i===14||i===10;if(a&&n||l&&r)return;if(l&&t.x.max)return Je(fr(o));if(l&&t.x.min)return Je(o);if(a&&t.y.max)return Je(fr(o));if(a&&t.y.min)return Je(o);let s=i===15||i===13||i===9||i===11;if(s&&t.x.max&&t.y.max)return Je(fr(o));if(s&&t.x.min&&t.y.min)return Je(o)}return ud(o)},rg=(e,t,o,r={})=>{let n=t.findIndex(i=>i.fx===e.fx&&i.fy===e.fy);if(!(n<-1))return md(n,o,dd(e,t,r))},fd=e=>{switch(e){case 0:return[6,2];case 2:return[0,8];case 8:return[2,6];case 6:return[8,0];default:return[8,0]}},hd=(e,t)=>{let{fx:o,fy:r}=e,n=t.findIndex(y=>y.fx===o&&y.fy===r),i=t[n];b(i,"handle must be defined",i,t);let[a,l]=fd(n),s=t[a],c=t[l];b(s&&c,"handle must be defined",a,l,t);let d=R.angleFromX(i,s),u=R.angleFromX(i,c),p=Math.abs(d-u),m=(p>180?360-p:p)/2,h=[t[0],t[4],t[2]];return(qt.isClockwise(h)?d:u)+m-180},gd=e=>`url("data:image/svg+xml,<svg width='24px' height='24px' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><defs><path d='M10.25,20 C10.1119288,20 10,19.8880712 10,19.75 L10,12.6035534 C10,12.4654822 10.1119288,12.3535534 10.25,12.3535534 C10.3163041,12.3535534 10.3798926,12.3798926 10.4267767,12.4267767 L12.9218922,14.9225703 C13.5940823,14.1362843 14,13.1155457 14,12 C14,10.8844543 13.5940823,9.86371572 12.9218922,9.07742971 L10.4267767,11.5732233 C10.3798926,11.6201074 10.3163041,11.6464466 10.25,11.6464466 C10.1119288,11.6464466 10,11.5345178 10,11.3964466 L10,4.25 C10,4.11192881 10.1119288,4 10.25,4 L17.3964466,4 C17.4627507,4 17.5263392,4.02633921 17.5732233,4.0732233 C17.6708544,4.17085438 17.6708544,4.32914562 17.5732233,4.4267767 L15.7556302,6.24518726 C17.1490803,7.75912242 18,9.78018974 18,12 C18,14.2195857 17.1492525,16.2404687 15.7560531,17.7543533 L17.5732233,19.5732233 C17.6708544,19.6708544 17.6708544,19.8291456 17.5732233,19.9267767 C17.5263392,19.9736608 17.4627507,20 17.3964466,20 L10.25,20 Z' id='b'/><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='a'><feOffset in='SourceAlpha' result='shadowOffsetOuter1'/><feGaussianBlur stdDeviation='0.5' in='shadowOffsetOuter1' result='shadowBlurOuter1'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0' in='shadowBlurOuter1' result='shadowMatrixOuter1'/></filter><filter x='-38.0%' y='-19.0%' width='178.1%' height='137.9%' filterUnits='objectBoundingBox' id='c'><feMorphology radius='0.25' operator='dilate' in='SourceAlpha' result='shadowSpreadOuter2'/><feOffset in='shadowSpreadOuter2' result='shadowOffsetOuter2'/><feGaussianBlur stdDeviation='0.75' in='shadowOffsetOuter2' result='shadowBlurOuter2'/><feColorMatrix values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0' in='shadowBlurOuter2' result='shadowMatrixOuter2'/></filter></defs><g fill='none' fill-rule='evenodd'><g transform='translate(0, 0.75) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23a)' xlink:href='%23b'/></g><g transform='translate(0, 1) rotate(${e} 12 12)'><use fill='%23000' filter='url(%23c)' xlink:href='%23b'/></g><g transform='rotate(${e} 12 12)'><use fill='%23FFF' xlink:href='%23b'/><path d='M11,19 L11,14.5 L12.8568184,16.3571474 C14.160342,15.3514059 15,13.7737593 15,12 C15,10.2262407 14.160342,8.6485941 12.8568184,7.64285263 L11,9.5 L11,5 L12.193,4.99949654 L15.5,5 L14.2798125,6.22017067 C15.9414235,7.59584189 17,9.67429905 17,12 C17,14.3257233 15.9414031,16.4041981 14.2797646,17.779869 L15.5,19 L11,19 Z' fill='%23000'/></g></g></svg>") 12 12, pointer`,ng=(e,t)=>gd(hd(e,t));var gr=e=>Math.max(.5,4/e),Sd=e=>Math.max(.5,16/e),yr=(e,t,o)=>{let r=new Set,n=new Set;return e.forEach(i=>{if(t!==void 0){let m=i.width*t,h=i.height*t;if(m<12&&h<12)return}let a=o?.5:1,{x:l,y:s}=fo({x:i.x,y:i.y},a),{x:c,y:d}=fo({x:i.x+i.width/2,y:i.y+i.height/2},a),{x:u,y:p}=fo({x:i.x+i.width,y:i.y+i.height},a);r.add(l).add(c).add(u),n.add(s).add(d).add(p)}),{x:r,y:n}},hs=(e,t,o,r)=>{let n=new Map,i=t?o.x:o.y,a=null,l=null;if(typeof o.width=="number"&&typeof o.height=="number"){let{width:s,height:c}=o;a=t?o.x+s/2:o.y+c/2,l=t?o.x+s:o.y+c}return e.forEach(s=>{let c=Math.abs(i-s),d=Math.abs((a||0)-s),u=Math.abs((l||0)-s),p=null;if(c<r?p=s:a!==null&&d<r?p=s-Math.abs(a-i):l!==null&&u<r&&(p=s-Math.abs(l-i)),p!==null){let m=new Set,h=n.get(p)??m;n=n.set(p,h.add(s))}}),n},Ss=(e,t,o)=>{let r=hs(e.x,!0,t,o),n=hs(e.y,!1,t,o);return{x:r,y:n}},gs=(e,t)=>{let o=0,r;return e.forEach((n,i)=>{t!==void 0&&i===t||n.size>o&&(o=n.size,r=[i,n])}),r},vd=(e,t)=>{let o=gs(e.x,t?t.x:void 0),r=gs(e.y,t?t.y:void 0);return{x:o,y:r}},vs=(e,t)=>{if(!t)return e;let o=yr(t);return{x:new Set([...e.x,...o.x]),y:new Set([...e.y,...o.y])}},xs=(e,t,o,r,n)=>{e=vs(e,n);let i=gr(t),a=Ss(e,o,i),l=vd(a,r),[s,c]=l.x?l.x:[void 0,new Set],[d,u]=l.y?l.y:[void 0,new Set];return{point:{x:s,y:d},snapLines:{x:c,y:u}}},ys=(e,t,o,r,n,i)=>{let a=null;return e.forEach(l=>{let s=i(l);if(a=F.intersection(s,r),a===null)return;if(n||R.distance(a,o)<=t)return!1;a=null}),a},bs=(e,t,o,r,n,i=!1)=>{e=vs(e,n);let a=gr(t),l=Ss(e,o,a),s=F.isOrthogonal(r)||i,c=Sd(t),d=null,u=new Set,p=new Set;if(d=ys(Array.from(l.x.keys()),c,o,r,s,h=>F({x:h,y:0},{x:h,y:100})),d!==null)return{point:d,snapLines:{x:u.add(d.x),y:p}};if(d=ys(Array.from(l.y.keys()),c,o,r,s,h=>F({x:0,y:h},{x:100,y:h})),d!==null)return{point:d,snapLines:{x:u,y:p.add(d.y)}};let m=F.perpendicular(r,o);return d=F.intersection(r,m),d===null&&(d=o),{point:d,snapLines:{x:u,y:p}}},Cs=(e,t,o,r)=>{let n={...t},i=[],a=[],l=[],s=[],c=gr(r),{x:d,y:u}=o,p="height"in o?o.height:0,m="width"in o?o.width:0,h=d+m,v=u+p,S={x:d,y:u,width:m,height:p};return e.siblingFrames.forEach(f=>{e.horizontalDistances.forEach((y,C)=>{let g=y.filter(x=>N.overlapVertically(S,x));if(g.length!==0&&N.overlapVertically(S,f)){if(Math.abs(f.x-C-h)<c){let x={x:f.x-C,y:f.y,width:C,height:f.height};if(g=g.filter(T=>!N.overlapHorizontally(T,x)),g.length===0)return;if(N.doesNotIntersect(x,e.siblingFrames)){let T=f.x-C-m;(n.x===void 0||n.x===T)&&(i.push(...g),l.push(x),n.x=T)}}else if(Math.abs(N.maxX(f)+C-d)<c){let x={x:N.maxX(f),y:f.y,width:C,height:f.height};if(g=g.filter(T=>!N.overlapHorizontally(T,x)),g.length===0)return;if(N.doesNotIntersect(x,e.siblingFrames)){let T=N.maxX(f)+C;(n.x===void 0||n.x===T)&&(i.push(...g),l.push(x),n.x=T)}}}}),e.verticalDistances.forEach((y,C)=>{let g=y.filter(x=>N.overlapHorizontally(S,x));if(g.length!==0&&N.overlapHorizontally(S,f)){if(Math.abs(f.y-C-v)<c){let x={y:f.y-C,x:f.x,height:C,width:f.width};if(g=g.filter(T=>!N.overlapVertically(T,x)),g.length===0)return;if(N.doesNotIntersect(x,e.siblingFrames)){let T=f.y-C-p;(n.y===void 0||n.y===T)&&(a.push(...g),s.push(x),n.y=T)}}else if(Math.abs(N.maxY(f)+C-u)<c){let x={y:N.maxY(f),x:f.x,height:C,width:f.width};if(g=g.filter(T=>!N.overlapVertically(T,x)),g.length===0)return;if(N.doesNotIntersect(x,e.siblingFrames)){let T=N.maxY(f)+C;(n.y===void 0||n.y===T)&&(a.push(...g),s.push(x),n.y=T)}}}})}),{distanceSnap:n,distanceFramesX:i,distanceFramesY:a,horizontalDistanceFrames:l,verticalDistanceFrames:s}};var vo=class{constructor(t,o){this.engine=t;this.excludedNodes=o;I(this,"snapX",null);I(this,"snapY",null);I(this,"snapConstraint",null);I(this,"distanceFramesX",[]);I(this,"distanceFramesY",[]);I(this,"snappingZoom",-1);I(this,"snappingFrame",{x:0,y:0,width:0,height:0});I(this,"linesCache",new Map);I(this,"distanceCache",new Map);I(this,"snapForShapes",!1)}start(){this.snapForShapes=this.engine.stores.toolStore.shapeToolActive||this.engine.stores.selectionStore.nodes.every(t=>ye(t))}stop(){this.engine.stores.snapLinesStore.clear()}validateCaches(){let{canvasStore:t}=this.engine.stores,o=t.getCanvasVisibleRect();(this.snappingZoom!==t.zoom||!N.equals(this.snappingFrame,o))&&(this.snappingZoom=t.zoom,this.snappingFrame=o,this.linesCache=new Map,this.distanceCache=new Map)}snap(t,o,r,n,i,a,l,s=!1){let{snapLinesStore:c,canvasStore:d}=this.engine.stores;if(o===!1)return this.snapX=null,this.snapY=null,this.snapConstraint=null,this.distanceFramesX=[],this.distanceFramesY=[],c.clear(),t;this.validateCaches();let u=this.getOrthogonalLines(r,s),p;i?p=bs(u,d.zoom,t,i,l,this.snapForShapes):p=xs(u,d.zoom,t,a,l);let m=Array.from(p.snapLines.y),h=Array.from(p.snapLines.x),v=i!==void 0?i:null,S=null;if(n!==void 0&&i===void 0){let g=this.getSiblingDistances(n);S=Cs(g,p.point,t,d.zoom)}S&&S.distanceSnap.x!==void 0&&(p.point.x=S.distanceSnap.x),S&&S.distanceSnap.y!==void 0&&(p.point.y=S.distanceSnap.y);let f={x:W(p.point.x)?p.point.x:t.x,y:W(p.point.y)?p.point.y:t.y};S!==null&&(S.horizontalDistanceFrames.forEach(g=>{let x="height"in t?t.height:0,T=Math.min(g.y,f.y),P=Math.max(N.maxY(g),f.y+x);S.distanceFramesX.push({...g,y:T,height:P-T})}),S.verticalDistanceFrames.forEach(g=>{let x="width"in t?t.width:0,T=Math.min(g.x,f.x),P=Math.max(N.maxX(g),f.x+x);S.distanceFramesY.push({...g,x:T,width:P-T})}));let y=S?S.distanceFramesX:[],C=S?S.distanceFramesY:[];return this.snapX=h,this.snapY=m,c.x=new Set(h),c.y=new Set(m),this.snapConstraint=v,this.distanceFramesX=y,this.distanceFramesY=C,f}getOrthogonalLines(t,o=!1){let{tree:r}=this.engine,{canvasStore:n,scopeStore:i,persistedUserDefaults:a,overlayStore:l}=this.engine.stores,{active:s}=i,c=n.getCanvasVisibleRect(),d=this.engine.tool.enum===35,u=this.snapForShapes||d,{displayRulers:p}=a,m=p&&ni(s)?{x:new Set(s.guidesX),y:new Set(s.guidesY)}:{x:new Set,y:new Set};return t.forEach(h=>{let v={x:new Set,y:new Set},S={x:new Set,y:new Set};if(!this.linesCache.has(h)){let y=[],C=[...this.excludedNodes],g=s.getGroundNodesOfType(xi,M=>!C.includes(M.id));if(!h)C.push(...g.map(M=>M.id)),y.push(...r.getSubtreeNodes(s.id,C)),y.push(...g);else{y.push(...r.getSubtreeNodes(h,C));let M=r.getNode(h);if(p&&M&&ii(M)){let w=M.guidesX.map(_=>ht(r,M,"x",_));v.x=new Set(w);let U=M.guidesY.map(_=>ht(r,M,"y",_));v.y=new Set(U)}if(a.displayGrids&&M&&(!eo(M)||M.resolveValue("rotation")===0)&&hi(M)&&M.overlayGrid){let w=[],U=[],_=r.convertFrameToCanvas(M);if(!M.overlayGrid)return;let Z=gi(M.overlayGrid,_);M.overlayGrid?.type==="column"&&Z.forEach(K=>w.push(ht(r,M,"x",K))),M.overlayGrid?.type==="row"&&Z.forEach(K=>U.push(ht(r,M,"y",K))),S.x=new Set(w),S.y=new Set(U)}if(o&&M&&On(M)){let w=N.atOrigin(r.getRect(M));w.height=Ln(M,w);let _=N.cornerPoints(w).map(K=>r.convertPointToCanvas(M,K,!0)),Z=N.boundingRectFromPoints(_);v.y.add(Z.y+Z.height)}}y=y.filter(M=>{if(l.editModeActive){if(l.activeRelativeOverlayTriggers.has(M.id))return!0;if(!Vn(M,l.activeOverlays))return!1}return!M.isVisible()||_t(M)?!1:Ge(M)?!M.sizeToFit:!0});let x=y.map(M=>r.convertFrameToCanvas(M)).filter(M=>N.intersects(M,c)),T=yr(x,n.zoom,u),P={x:new Set([...T.x,...v.x,...S.x]),y:new Set([...T.y,...v.y,...S.y])};this.linesCache=this.linesCache.set(h,P)}let f=this.linesCache.get(h);f&&(m.x=new Set([...m.x,...f.x]),m.y=new Set([...m.y,...f.y]))}),m}getSiblingDistances(t){let{tree:o}=this.engine,r=this.engine.stores.canvasStore.getCanvasVisibleRect();if(!this.distanceCache.has(t)){let i=[];if(t)i=o.getNode(t).children;else{let p=this.engine.stores.scopeStore.active.getGroundNodes();p&&(i=p)}let a=[...this.excludedNodes],l=i.filter(p=>!a.includes(p.id)).map(p=>N.pixelAligned(o.convertFrameToCanvas(p))).filter(p=>N.intersects(r,p)),s=Di(l),c=new Map,d=new Map,u=(p,m,h)=>{let v=p.get(m)??[];return p.set(m,[...v,h])};s.forEach(([p,m])=>{let h=N.maxY(p),v=N.maxY(m),S=N.maxX(p),f=N.maxX(m);if(N.overlapHorizontally(p,m)){let y=Math.min(p.x,m.x),g=Math.max(S,f)-y;if(h<m.y){let x=m.y-h,T={y:h,x:y,width:g,height:x};N.doesNotIntersect(T,l)&&(c=u(c,x,T))}else if(v<p.y){let x=p.y-v,T={y:v,x:y,width:g,height:x};N.doesNotIntersect(T,l)&&(c=u(c,x,T))}}if(N.overlapVertically(p,m)){let y=Math.min(p.y,m.y),g=Math.max(h,v)-y;if(S<m.x){let x=m.x-S,T={x:S,y,width:x,height:g};N.doesNotIntersect(T,l)&&(d=u(d,x,T))}else if(f<p.x){let x=p.x-f,T={x:f,y,width:x,height:g};N.doesNotIntersect(T,l)&&(d=u(d,x,T))}}}),this.distanceCache=this.distanceCache.set(t,{verticalDistances:c,horizontalDistances:d,siblingFrames:l})}let n=this.distanceCache.get(t);return Wn(n,"cant read distances"),n}};function Is(e,t){if(t.length!==1)return!1;let o=e.get(t[0]);return!!(o&&Jt(o))}function Ty(e){return e instanceof Sr}var Sr=class extends At("MoveTool",yo){constructor(o,r){super(o);this.options=r;I(this,"enum",6);I(this,"wantsAutoscrolling",!0);I(this,"isCancelled",!1);I(this,"nodesBeginState");I(this,"startCanvasRect");I(this,"hasMoved",!1);I(this,"maxSize");I(this,"nodesInMoveToolBaseFontSize",{});I(this,"highlightedParents",new Set);I(this,"shouldHighLightParents",!0);I(this,"commonParentAfterLastUpdate");I(this,"topLevelFrameNodesAfterLastUpdate",[]);I(this,"snapper");I(this,"isSkewed");I(this,"cloneCache",new Map);I(this,"renamedIds",new Map);I(this,"canMoveToStackOrGrid",!1);I(this,"activeStackOrGrid",null);I(this,"commonStackOrGridParentAtStart",null);I(this,"activeStackOrGridInsertion");I(this,"stackOrGridInsertionLine",null);I(this,"displaySelectionBox",!0);I(this,"cmsBadge","visible");I(this,"displaySelectionHandles",!0);I(this,"stateToken");I(this,"scopeIdAtStart");I(this,"lastAltKeyDownTime",0);I(this,"updateNodesInMoveToolBaseFontSize",(o,r)=>{if(o===r)return;let n=this.nodesInMoveToolBaseFontSize[o];W(n)&&(this.nodesInMoveToolBaseFontSize={...this.nodesInMoveToolBaseFontSize,[r]:n})});this.displaySelectionHandles=!r?.reorderNode}selectionIds(){return this.options?.reorderNode?[this.options.reorderNode.id]:this.engine.stores.selectionStore.ids}start(){let{engine:o}=this,{tree:r}=o,{scopeStore:n,mouseStore:i,modulesStore:a}=o.stores,l=this.selectionIds();this.snapper=new vo(o,l);let s=r.withoutDescendants(r.getNodes(l));this.nodesBeginState=qd(r,s,i.latest.canvasMousePosition),this.maxSize=Vd(this.nodesBeginState),this.startCanvasRect=N.merge(...s.map(d=>r.convertFrameToCanvas(d))),this.canMoveToStackOrGrid=Ed(s,r),this.commonStackOrGridParentAtStart=Od(r,s),this.nodesInMoveToolBaseFontSize=s.reduce((d,u)=>{let p=xn(n.active,r,a,u.id);return W(p)&&(d[u.id]=p),d},{});let c=s[0];this.isSkewed=s.length===1&&!!c&&Un(r.convertCornerPointsToCanvas(c)),o.beginUndoGroup(),o.stores.treeStore.setHighlight(null),this.scopeIdAtStart=o.stores.scopeStore.activeId,this.stateToken=o.getStateToken(),this.shouldHighLightParents=!s.every(ft)}cancel(){let{engine:o}=this;o.stores.toolStore.updateDragAndDropPlaceholder(null),xo(this.activeStackOrGrid),this.activeStackOrGrid=null,o.discardUndoGroup(),this.isCancelled=!0}stop(){let{engine:o}=this;this.isCancelled||(this.toolUpdate(!0),o.endUndoGroup()),this.hasMoved||this.options?.moveToolDidExitWithoutMoving?.(),this.snapper.stop()}resetToBeginState(){this.engine.resetTreeAndSelectionWithToken(this.stateToken)}update(){let{engine:o}=this,{mouseStore:r,mouseCursorStore:n,scopeStore:i,toolStore:a}=o.stores,{canvasMouseDownPosition:l,canvasMiddleMouseButtonDownPosition:s}=r;if(!l||s){o.exitTool();return}if(this.scopeIdAtStart!==i.activeId){a.updateDragAndDropPlaceholder(null),xo(this.activeStackOrGrid),r.setMouseDown(!1),o.exitTool();return}if(this.toolUpdate(),this.options?.reorderNode&&(n.current=fs),this.nodesBeginState.size===0){o.exitTool();return}}validateNodesBeginState(){let{engine:o}=this;this.nodesBeginState.forEach((r,n)=>{o.tree.has(n.id)||this.nodesBeginState.delete(n)})}validateNodesInMoveToolBaseFontSize(){let{engine:o}=this,r=Object.keys(this.nodesInMoveToolBaseFontSize);r.every(i=>{let a=this.nodesInMoveToolBaseFontSize[i];return o.tree.has(i)&&W(a)})||(this.nodesInMoveToolBaseFontSize=r.reduce((i,a)=>{let l=this.nodesInMoveToolBaseFontSize[a];return!o.tree.has(a)||!W(l)||(i[a]=l),i},{}))}noInputChange(){let{previous:o,latest:r}=this.engine.stores.mouseStore,{altKey:n,cmdKey:i,spacebar:a,canvasMousePosition:l}=r;return l.x===o.canvasMousePosition.x&&l.y===o.canvasMousePosition.y&&n===o.altKey&&i===o.cmdKey&&a===o.spacebar}shouldCopy(o){return this.engine.stores.mouseStore.latest.altKey?(this.lastAltKeyDownTime=performance.now(),!0):o?performance.now()-this.lastAltKeyDownTime<200:!1}addReorderOffsetIfNeeded(o){return this.options?.reorderOffset?R.add(o,this.options.reorderOffset):o}getMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.latest.canvasMousePosition)}getPreviousMouseWithReorderOffset(){return this.addReorderOffsetIfNeeded(this.engine.stores.mouseStore.previous.canvasMousePosition)}toolUpdate(o=!1){let{engine:r}=this,n=!!this.options?.reorderNode;if(o&&!this.hasMoved){this.options?.reorderNode&&r.stores.selectionStore.set(this.options.reorderNode);return}let{tree:i}=r,{scopeStore:a,effectStore:l,mouseStore:s,documentSettingsStore:c,toolStore:d,chromeStore:u,selectionStore:p,canvasStore:m}=r.stores,{previous:h,latest:v}=s,{altKey:S,cmdKey:f,spacebar:y,canvasMousePosition:C}=v;if(this.scopeIdAtStart!==a.activeId||Ld(this.nodesBeginState)||yt(r,"canDesign")||u.isPreviewingLocaleOnCanvas)return;let g=bd(s,this.options?.directionLock);if(!g||!this.hasMoved&&g.x===0&&g.y===0||(this.hasMoved=!0,l.exitPreview(),!o&&this.noInputChange()))return;this.resetToBeginState(),this.validateNodesBeginState(),this.validateNodesInMoveToolBaseFontSize();let x=new Map,T=S&&f;this.displaySelectionHandles=!1,this.highlightedParents.clear(),xo(this.activeStackOrGrid),Fd(r,this.nodesBeginState,x,this.shouldCopy(o)&&!T,this.cloneCache,this.renamedIds);let{ctrlKey:P}=s,M=P&&i.getNodes(this.selectionIds()).every(Xn),w=N.offset(this.startCanvasRect,g),{insertionIndex:U,insertionLine:_,activeStackOrGrid:Z,isLiveSorting:K,wrap:tt}=zd(r,this.getMouseWithReorderOffset(),this.getPreviousMouseWithReorderOffset(),this.selectionIds(),this.nodesBeginState,this.canMoveToStackOrGrid&&!y&&!f,!!this.options?.reorderNode,this.commonStackOrGridParentAtStart,this.maxSize,this.activeStackOrGridInsertion,M);this.activeStackOrGridInsertion=U,this.stackOrGridInsertionLine=_,this.activeStackOrGrid=Z,K&&!o&&this.makeGroundNodes(x),d.updateDragAndDropPlaceholder(this.activeStackOrGrid);let{activeNodes:be,extraSnapRects:ke}=$d(i,this.nodesBeginState,x,f),we=R.distance(h.canvasMousePosition,C)*m.zoom,Ce=!!(this.activeStackOrGrid&&!K),Pe=!this.isSkewed&&(we<10&&Ce?!0:!this.activeStackOrGrid);this.snapper.excludedNodes=this.selectionIds();let De=this.snapper.snap(w,Pe,this.topLevelFrameNodesAfterLastUpdate,this.commonParentAfterLastUpdate,void 0,void 0,ke,Is(i,this.selectionIds())),G=R.pixelAligned(R.subtract(this.startCanvasRect,De)),L=new Set(this.selectionIds()),Ie=this.activeStackOrGrid&&W(this.activeStackOrGridInsertion);if(o&&Ie||this.nodesBeginState.forEach((V,te)=>{let{unableToMove:Fe,startFromStackOrGrid:Kl,disableReparenting:_l}=V;if(Fe)return;let Po=x.get(te)??te.id,Do=i.get(Po);if(!Do)return;let ql=Po!==te.id&&Ve(te),Fo=i.current(V.parent),Be=V.rect,Bo=ho(vr(r.tree,Fo),V.untransformedPointUnderMouse,R.subtract(V.canvasPointUnderMouse,G)),ot={...Be,...R.pixelAligned(R.add(Be,Bo),Be)},Yl=Yd(r.tree,Fo).translate(Bo.x,Bo.y).multiply(V.matrix),rt=this.getNewParent(Do,Fo,N.pointsAtOrigin(ot).map(Oo=>Ke.convertPoint(Yl,Oo)),ot,ql,Kl,_l||Ce),Zl=te.id!==Po,Eo=this.reparentNode(Do,rt,L,Zl,K,-1,!0);if(this.shouldHighLightParents&&(this.highlightedParents=Rd(this.highlightedParents,rt,this.activeStackOrGrid)),rt?.id!==V.parent?.id){let Oo=ho(vr(r.tree,rt),V.untransformedPointUnderMouse,R.subtract(V.canvasPointUnderMouse,G));ot={...Be,...R.pixelAligned(R.add(Be,Oo),Be)}}let Jl=this.getUpdatedNodeConstraints(i,Eo,ot,V,rt,M);Eo.set(Jl),wd(r,Eo,V,ot)}),o){if(r.tree.beginAllowPartialScopeAccess(),ep(r,this.nodesBeginState,x),op(r,this.nodesBeginState,x),rp(r,this.nodesBeginState,x),r.tree.endAllowPartialScopeAccess(),d.updateDragAndDropPlaceholder(null),xo(this.activeStackOrGrid),Ie&&this.insertSelectionIntoStackOrGrid(x,L,K,tt),tp(x,r.tree),n||p.set(L),x.size>0){let V=new Map;for(let[te,Fe]of x.entries())V.set(te.id,Fe);c.lastDuplicationMap=V}this.renamedIds.clear();return}n||p.set(L),this.commonParentAfterLastUpdate=Id(i,be),this.topLevelFrameNodesAfterLastUpdate=i.getTopLevelFrameNodes(be)}getUpdatedNodeConstraints(o,r,n,i,a,l){let s=i.parent?i.parent.id===a?.id:a===null,c=Qd(i,s),u=o.getParentSizeInfo(r,a,!0,!1),p=r.updateForRect({rect:n,parentSizeInfo:u,updateSize:!1,constraintsLocked:ar(r,c),shouldGuessPinToBottom:rr(o,r),shouldGuessPinToRight:nr(o,r,a)});return!c&&He(r)&&(p.constraintsLocked=!1),l?p.position="absolute":Object.assign(p,_n(r,a)),p}getNewParent(o,r,n,i,a,l,s){let{engine:c}=this;if(s)return r;if(this.activeStackOrGrid)return he;let{tree:d}=c,{mouseStore:u}=c.stores,{cmdKey:p,altKey:m,spacebar:h,canvasMousePosition:v}=u.latest,S=m&&p,f=r&&ye(r),y=o.originalid&&!_r(o)&&!qo(o),C=!h&&(!p||S)&&!f&&!y,g=r;if(C||a){if(g=Nd(c,o,n,this.selectionIds(),v,m),m&&g&&d.isGroundNode(g)){let x=d.getRect(g.draftOrCurrent());(x.width<=i.width&&x.height<=i.height||g.id===o.duplicatedFrom?.[o.duplicatedFrom.length-1])&&(g=null)}!a&&Md(d,n,r,g,l)&&(g=r)}return g}reparentNode(o,r,n,i,a,l,s){let{engine:c}=this,d=c.tree.getParent(o.id);return ir(r,d)&&l===-1&&!i?o:Ve(o)&&r&&Ht(r)?this.reparentNodeInsideVariant(o,r,l):Ve(o)?this.moveNodeOutOfVariant(o,r,l,n,a,s):r&&Ht(r)?this.moveNodeIntoVariant(o,r,l,n):(c.moveNode(o.id,r?r.id:he,l),it(r)&&tr(o)&&(o.gridItemFillCellWidth===void 0&&o.set({gridItemFillCellWidth:!0}),o.gridItemFillCellHeight===void 0&&o.set({gridItemFillCellHeight:!0})),o)}reparentNodeInsideVariant(o,r,n){let{engine:i}=this;return Ti(i,o,r),i.moveNode(o.originalid,r.originalid,n),o}moveNodeOutOfVariant(o,r,n,i,a,l){let{engine:s}=this,c=s.tree.getNode(o.originalid);if(b(c,"original node must exist"),!An(s.tree,o)||a)this.updateNodesInMoveToolBaseFontSize(o.id,c.id),Ci(s,o,c,i),s.moveNode(c.id,r?r.id:he,n);else if(l){let d=this.cloneCache.get(o.id)??s.cloneNode(o,!1,!1);this.cloneCache.set(o.id,d);let u=d.cloneWithIds();return s.stores.scopeStore.insertNode(u,r?r.id:he,n),this.updateNodesInMoveToolBaseFontSize(o.id,u.id),s.tree.current(o)?.set({visible:!1}),i.delete(o.id),i.add(u.id),u}return c}moveNodeIntoVariant(o,r,n,i){let{engine:a}=this,l=a.tree.getNode(r.originalid);b(l,"original node of the new parent should exist"),a.moveNode(o.id,l?.id??he,n);let s=Ii(a,o,r,l,i,this.renamedIds);return this.updateNodesInMoveToolBaseFontSize(o.id,s),o}insertSelectionIntoStackOrGrid(o,r,n,i){if(Ne(this.activeStackOrGrid)||!W(this.activeStackOrGridInsertion))return;let{engine:a}=this,l=Array.from(this.nodesBeginState.keys()).map(u=>o.get(u)??u.id),s=this.activeStackOrGrid,c=Gd(this.activeStackOrGridInsertion,s,l);if(i&&Xo(s)){let u=Ai(a,s,i);u&&(s=u)}let d=it(s);this.nodesBeginState.forEach((u,p)=>{let m=o.get(p)??p.id,h=a.tree.getNode(m);if(!h)return;b(!Ne(s),"stackOrGrid must be a valid node");let v=p.id!==m;if(n&&!v&&gn(s)&&Qn(h)){ei(h.originalid??h.id,s,c),c++;return}let S=this.reparentNode(h,s,r,v,n,c,!0);if(He(S)){let f={top:0,left:0,right:null,bottom:null,...u.startSizeProps};if(!u.parent||u.parent.id!==s.id){let C=f.widthType===3||f.widthType===1,g=f.heightType===3||f.heightType===1;C&&(d||s.widthType===2)&&(f.width=u.rect.width,f.widthType=0),g&&(d||s.heightType===2)&&(f.height=u.rect.height,f.heightType=0)}S.set(f)}else S.set(u.startSizeProps);c++})}makeGroundNodes(o){let{engine:r}=this;this.nodesBeginState.forEach((n,i)=>{let a=o.get(i)??i.id,l=r.tree.getNode(a);if(!l)return;let s=i.id!==a;this.reparentNode(l,null,new Set,s,!0,-1,!1)})}};function bd(e,t){let{canvasMousePosition:o,shiftKey:r}=e.latest,n=e.previous;return n.canvasMouseDownPosition?Cd(n.canvasMouseDownPosition,o,r,t):void 0}function Cd(e,t,o,r){let n=R.pixelAligned(R.subtract(t,e));return r?r==="horizontal"?n.y=0:n.x=0:o&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),n}function Id(e,t){let o=t.map(i=>i?e.getParent(i.id):void 0);if(!(new Set(o).size===1))return;let n=o[0];return n?n.id:he}function Td(e,t,o,r,n,i){let{tree:a}=e;if(!sn(o)||qn(o)||Zr(o)||!$n(a,o,t,n,j))return!1;let l=a.getAncestors(o.id);return l.push(o.id),!(Oi(l,r)||l.some(d=>d===t.id)||i&&ua(t,o))}function Nd(e,t,o,r,n,i){let{tree:a}=e,l=e.stores.scopeStore.active,s=a.getPotentialParents(l,e.stores.overlayStore.activeOverlays,o,n,j,t);return a.sortVisually(s).reverse().find(u=>Td(e,t,u,r,l.id,i))||he}function Md(e,t,o,r,n){if(n||!o||!r||!!ir(r,o)||!(!r||e.getAncestors(o.id).find(s=>r!==null&&s===r.id)))return!1;let l=e.convertCornerPointsToCanvas(o);return qt.intersects(l,t)}function Rd(e,t,o){let r=o||t;return!r||ye(r)||Ge(r)&&r.sizeToFit?e:e.add(r.id)}function kd(e,t,o){let r={x:t.rect.x-o.x,y:t.rect.y-o.y};if(eo(e)){let n=e.resolveValue("rotation"),i=new DOMMatrix().rotateSelf(0,0,-n);r=Ke.convertPoint(i,r)}return r}function wd(e,t,o,r){let{tree:n}=e,{cmdKey:i,altKey:a}=e.stores.mouseStore.latest;!i||a||o.children.forEach((l,s)=>{if(o.startFromStackOrGrid)return;let c=n.getNode(s);if(!c)return;let d=kd(t,o,r),u=N.offset(l.frame,d),p=c.updateForRect({rect:u,parentSizeInfo:n.getParentSizeInfo(c,t),constraintsLocked:ar(c),shouldGuessPinToBottom:rr(n,c),shouldGuessPinToRight:nr(n,c,n.getParent(c.id))});Pd(c,p),e.tree.get(s)?.set(p)})}function Pd(e,t){return He(e)&&((e.widthType===2||e.widthType===3)&&(delete t.width,delete t.widthType),(e.heightType===2||e.heightType===3)&&(delete t.height,delete t.heightType)),t}function Dd(e){let t=1/0,o=0;for(let r=0,n=e.length;r<n;r++){let i=e[r];i>=t||(t=i,o=r)}return o}function Fd(e,t,o,r,n,i=new Map){r&&Bd(e,t,o,n,i)}function Bd(e,t,o,r,n=new Map){t.forEach((a,l)=>{if(ft(l)||ye(l)&&Ve(l))return;let s=r.get(l.id)??e.cloneNode(l,!1,!1,n);r.set(l.id,s);let c=s.cloneWithIds();e.stores.scopeStore.insertNode(c,l.parentid),n.set(l.id,c.id),o=o.set(l,c.id),qr(l)&&Ni(e,l,n)});let i=Array.from(o.values());for(let a of i){let l=e.tree.getNode(a),s=e.tree.getParent(a),c=!!s&&(at(s)||Zt(s));l&&Fi(e.tree,l,n,c)}e.stores.selectionStore.set(i)}function Ed(e,t){return e.every(o=>!Jd(o,t))}function Od(e,t){let o=null;for(let r=0,n=t.length;r<n;r++){let i=t[r];if(!i||ft(i))return null;let a=e.getParent(i.id);if(!Xo(a)&&!it(a))return null;if(!o)o=a;else if(o.id!==a.id)return null}return o}function Ld(e){for(let t of e.values())if(!t.unableToMove)return!1;return!0}function Vd(e){let t=0,o=0;return e.forEach(r=>{let{width:n,height:i}=r.rect;n>t&&(t=n),i>o&&(o=i)}),{width:t,height:o}}function Ad(e,t,o){let r=e.tree.get(o.id);if(!r)return!1;let n=e.tree.getGroundNodeFor(r),i=e.tree.convertFrameToCanvas(n);return N.containsPoint(i,t)}function zd(e,t,o,r,n,i,a,l,s,c,d){let u=e.tree.getNodes(r);if(u.length===0)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:null,isLiveSorting:!1};if(d||l&&u.every(h=>Jt(h)||Kn(h)))return{insertionIndex:null,insertionLine:null,activeStackOrGrid:l,isLiveSorting:!1};let p=null;if(a?l&&(p=l):l&&Ad(e,t,l)?p=l:i&&(p=Vi(e,t,u,l,j)),!p)return{insertionIndex:null,insertionLine:null,activeStackOrGrid:p,isLiveSorting:!1};let m=!!l&&l.id===p.id;if(m)return{insertionIndex:jd(e.tree,e.stores.layoutCache,t,o,n,p,e.tree.convertPointToNode(p,t),c),insertionLine:null,activeStackOrGrid:p,isLiveSorting:m};{let{insertionIndex:h,insertionLine:v,wrap:S}=Li(p,e,t,s);return{insertionIndex:h,insertionLine:v,activeStackOrGrid:p,isLiveSorting:m,wrap:S}}}function Gd(e,t,o){let r=0,n=0;for(let i of t.getChildrenInVisualOrder()){if(n===e)break;o.includes(i.id)||(i.isVisible()&&n++,r++)}return r}function Hd(e){let t=[];for(let o of e.values())o.placeholderItem&&t.push(o.placeholderItem);return t}function Wd(e,t,o,r,n,i,a){let l=t-o;if(l===0)return!0;if(!a)return e?i==="ltr"?Math.sign(n.x)===Math.sign(l):Math.sign(n.x)!==Math.sign(l):Math.sign(n.y)===Math.sign(l);let s=r[o],c=r[t];if(!s||!c)return!0;let d=e?{a:s.y,b:N.maxY(s)}:{a:s.x,b:N.maxX(s)},u=e?{a:c.y,b:N.maxY(c)}:{a:c.x,b:N.maxX(c)};if(d.b-u.a>=0&&u.b-d.a>=0)return!0;let m=u.a>=d.b?1:-1;return e?Math.sign(n.y)===m:Math.sign(n.x)===m}function Ud(e,t){let o=Ts(t),r=0;for(let n=0;n<=e;n++){let i=o[n];i&&!Qt(i,t)&&r++}return r}function jd(e,t,o,r,n,i,a,l){let s=Ei(i,t);if(!s)return 0;let c=s.map(y=>R.distance(N.center(y),a)),d=Dd(c);d=d+Ud(d,i);let u=d,p=Yr(i),m=p||i.stackDirection==="horizontal",h=p||!!i.stackWrapEnabled,v=R.subtract(o,r),S=l!==void 0,f=l===null;if(S&&!f){let y=l,C=e.root.getHorizontalLayoutDirection();u=Wd(m,d,y,s,v,C,h)?d:y}else if(f){let y=i.children.filter(C=>C.isVisible()).length;(m&&v.x<0||!m&&v.y<0)&&(u=y)}return i.cache.placeholders={index:u,sizes:Hd(n)},u}function xo(e){e&&(e.cache.placeholders=null)}function $d(e,t,o,r){let n=[],i=Array.from(t.keys());if(o.size>0){n.push(...i.map(a=>e.convertFrameToCanvas(a))),i.length=0;for(let[a,l]of o){let s=e.getNode(l);s&&i.push(s)}}if(r){let a=Xd(t);n.push(...a)}return{activeNodes:i,extraSnapRects:n}}function Xd(e){let t=[];return e.forEach(o=>{o.children.forEach(r=>{t.push(r.canvasFrame)})}),t}function Ts(e){return Gn(e)?e.getChildrenInVisualOrder():jn(e)}function Kd(e,t){let o=new Map;if(ye(t))return o;let r=Ts(t),n=$o(t);return r.forEach(i=>{if(n&&!Qt(i,t))return;let a=e.getRect(i),l=e.convertFrameToCanvas(i);o.set(i.id,{frame:a,canvasFrame:l})}),o}function _d(e){let t={};return fn(e)&&(t.width=e.width,t.height=e.height),He(e)&&(t.widthType=e.widthType,t.heightType=e.heightType),t}function qd(e,t,o){let r=e.sortVisually(t),n=new Map;return r.forEach(i=>{let a=Zd(e,i,o);n.set(i,a)}),n}function vr(e,t){return t?e.transformMatrixToNode(t):Ke.identity()}function Yd(e,t){if(t){let o=e.transformMatrixToNode(t);return ui(t)?o:Ke.flatProjectionMatrix(o)}return Ke.identity()}function Zd(e,t,o){let r=e.getParent(t.id),n=!!(r&&$o(r)),i=n&&Ve(t)&&!qo(t)||at(t)||nn(t),a=e.getRect(t),l;if(Qt(t,r)&&(l={width:a.width,height:a.height},it(r))){let p={};fi(t,p),tr(t)&&(t.gridItemFillCellWidth&&(p.width="100%"),t.gridItemFillCellHeight&&r.gridRowHeightType!=="fit"&&(p.height="100%")),l.style=p}let s=ho(vr(e,r),{x:0,y:0},o),d=di(e,t)?ci(e,t):void 0,u=d&&!Ht(d)?d.id:void 0;return{parent:r,rect:a,matrix:t.originAdjustedMatrix(null,a),untransformedPointUnderMouse:s,canvasPointUnderMouse:r?e.convertPointToCanvas(r,s):s,children:Kd(e,t),startFromStackOrGrid:n,unableToMove:i,startSizeProps:_d(t),constraintsLocked:He(t)?t.constraintsLocked:!1,placeholderItem:l,disableReparenting:ft(t),repeaterId:u}}function Jd(e,t){if(!ye(e))return!1;let o=t.getParent(e.id);return _t(o)||tn(o)}function Qd(e,t){return t?e.constraintsLocked:!1}function ep(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.stores.scopeStore.active;ze(a)&&aa(e.tree,a,i)&&da(e.tree,a)})}function tp(e,t){if(!(e.size>0))return;let r=0;for(let n of e.values()){let i=t.getNode(n);if(i)for(let a of i.walk())Ut(a)&&r++}r>0&&qe("layout_frame",{source:"duplication",count:r})}function op(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n,a=e.tree.getParent(i.id);if(a&&(Zt(a)||Zt(i)||at(a)))for(let{node:l,skipChildren:s}of i.walkWithSkipChildren())at(l)&&(e.stores.overlayStore.cleanupOverlay(e.stores.selectionStore,l.id,l.parentid,!1),e.tree.removeNode(l),s())})}function rp(e,t,o){t.forEach((r,n)=>{let i=e.tree.getNode(o.get(n)??n.id)||n;if(!r.repeaterId||i.parentid===r.repeaterId)return;let a=e.tree.get(r.repeaterId);jt(a)&&pi(a)})}var bt=new an(async()=>{let e=await Promise.all([import("https://app.framerstatic.com/dist-QQ2LXD6V.mjs"),import("https://app.framerstatic.com/dist-EZVESS7Y.mjs"),import("https://app.framerstatic.com/dist-Z5YLEBXY.mjs"),import("https://app.framerstatic.com/dist-7WM25YWQ.mjs"),import("https://app.framerstatic.com/dist-Z2BXEQZM.mjs"),import("https://app.framerstatic.com/dist-GBVMIGFI.mjs"),import("https://app.framerstatic.com/dist-NBGG27WF.mjs"),import("https://app.framerstatic.com/dist-YL6PRWQE.mjs"),import("https://app.framerstatic.com/prosemirror-suggest-CHVOCZVK.mjs")]);return Object.assign({},...e)});function ky(){bt.preload()}async function wy(){let e=bt.preload();return e&&await e,bt.read()}function Py(){let e=bt.preload();if(e)throw e;return bt.read()}var Oy="appPointerEvents_arpwu8w",Ly="appDisablePointerEvents_a1pulxae";var np={"3g2":"video/3gpp2","3gp":"video/3gpp","3gpp":"video/3gpp","3mf":"model/3mf",aac:"audio/aac",ac:"application/pkix-attr-cert",adp:"audio/adpcm",adts:"audio/aac",ai:"application/postscript",aml:"application/automationml-aml+xml",amlx:"application/automationml-amlx+zip",amr:"audio/amr",apng:"image/apng",appcache:"text/cache-manifest",appinstaller:"application/appinstaller",appx:"application/appx",appxbundle:"application/appxbundle",asc:"application/pgp-keys",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",au:"audio/basic",avci:"image/avci",avcs:"image/avcs",avif:"image/avif",aw:"application/applixware",bdoc:"application/bdoc",bin:"application/octet-stream",bmp:"image/bmp",bpk:"application/octet-stream",btf:"image/prs.btif",btif:"image/prs.btif",buffer:"application/octet-stream",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cer:"application/pkix-cert",cgm:"image/cgm",cjs:"application/node",class:"application/java-vm",coffee:"text/coffeescript",conf:"text/plain",cpl:"application/cpl+xml",cpt:"application/mac-compactpro",crl:"application/pkix-crl",css:"text/css",csv:"text/csv",cu:"application/cu-seeme",cwl:"application/cwl",cww:"application/prs.cww",davmount:"application/davmount+xml",dbk:"application/docbook+xml",deb:"application/octet-stream",def:"text/plain",deploy:"application/octet-stream",dib:"image/bmp","disposition-notification":"message/disposition-notification",dist:"application/octet-stream",distz:"application/octet-stream",dll:"application/octet-stream",dmg:"application/octet-stream",dms:"application/octet-stream",doc:"application/msword",dot:"application/msword",dpx:"image/dpx",drle:"image/dicom-rle",dsc:"text/prs.lines.tag",dssc:"application/dssc+der",dtd:"application/xml-dtd",dump:"application/octet-stream",dwd:"application/atsc-dwd+xml",ear:"application/java-archive",ecma:"application/ecmascript",elc:"application/octet-stream",emf:"image/emf",eml:"message/rfc822",emma:"application/emma+xml",emotionml:"application/emotionml+xml",eps:"application/postscript",epub:"application/epub+zip",exe:"application/octet-stream",exi:"application/exi",exp:"application/express",exr:"image/aces",ez:"application/andrew-inset",fdf:"application/fdf",fdt:"application/fdt+xml",fits:"image/fits",g3:"image/g3fax",gbr:"application/rpki-ghostbusters",geojson:"application/geo+json",gif:"image/gif",glb:"model/gltf-binary",gltf:"model/gltf+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gram:"application/srgs",grxml:"application/srgs+xml",gxf:"application/gxf",gz:"application/gzip",h261:"video/h261",h263:"video/h263",h264:"video/h264",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",held:"application/atsc-held+xml",hjson:"application/hjson",hlp:"application/winhlp",hqx:"application/mac-binhex40",hsj2:"image/hsj2",htm:"text/html",html:"text/html",ics:"text/calendar",ief:"image/ief",ifb:"text/calendar",iges:"model/iges",igs:"model/iges",img:"application/octet-stream",in:"text/plain",ini:"text/plain",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",iso:"application/octet-stream",its:"application/its+xml",jade:"text/jade",jar:"application/java-archive",jhc:"image/jphc",jls:"image/jls",jp2:"image/jp2",jpe:"image/jpeg",jpeg:"image/jpeg",jpf:"image/jpx",jpg:"image/jpeg",jpg2:"image/jp2",jpgm:"image/jpm",jpgv:"video/jpeg",jph:"image/jph",jpm:"image/jpm",jpx:"image/jpx",js:"text/javascript",json:"application/json",json5:"application/json5",jsonld:"application/ld+json",jsonml:"application/jsonml+json",jsx:"text/jsx",jt:"model/jt",jxl:"image/jxl",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",kar:"audio/midi",ktx:"image/ktx",ktx2:"image/ktx2",less:"text/less",lgr:"application/lgr+xml",list:"text/plain",litcoffee:"text/coffeescript",log:"text/plain",lostxml:"application/lost+xml",lrf:"application/octet-stream",m1v:"video/mpeg",m21:"application/mp21",m2a:"audio/mpeg",m2t:"video/mp2t",m2ts:"video/mp2t",m2v:"video/mpeg",m3a:"audio/mpeg",m4a:"audio/mp4",m4p:"application/mp4",m4s:"video/iso.segment",ma:"application/mathematica",mads:"application/mads+xml",maei:"application/mmt-aei+xml",man:"text/troff",manifest:"text/cache-manifest",map:"application/json",mar:"application/octet-stream",markdown:"text/markdown",mathml:"application/mathml+xml",mb:"application/mathematica",mbox:"application/mbox",md:"text/markdown",mdx:"text/mdx",me:"text/troff",mesh:"model/mesh",meta4:"application/metalink4+xml",metalink:"application/metalink+xml",mets:"application/mets+xml",mft:"application/rpki-manifest",mid:"audio/midi",midi:"audio/midi",mime:"message/rfc822",mj2:"video/mj2",mjp2:"video/mj2",mjs:"text/javascript",mml:"text/mathml",mods:"application/mods+xml",mov:"video/quicktime",mp2:"audio/mpeg",mp21:"application/mp21",mp2a:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4a:"audio/mp4",mp4s:"application/mp4",mp4v:"video/mp4",mpd:"application/dash+xml",mpe:"video/mpeg",mpeg:"video/mpeg",mpf:"application/media-policy-dataset+xml",mpg:"video/mpeg",mpg4:"video/mp4",mpga:"audio/mpeg",mpp:"application/dash-patch+xml",mrc:"application/marc",mrcx:"application/marcxml+xml",ms:"text/troff",mscml:"application/mediaservercontrol+xml",msh:"model/mesh",msi:"application/octet-stream",msix:"application/msix",msixbundle:"application/msixbundle",msm:"application/octet-stream",msp:"application/octet-stream",mtl:"model/mtl",mts:"video/mp2t",musd:"application/mmt-usd+xml",mxf:"application/mxf",mxmf:"audio/mobile-xmf",mxml:"application/xv+xml",n3:"text/n3",nb:"application/mathematica",nq:"application/n-quads",nt:"application/n-triples",obj:"model/obj",oda:"application/oda",oga:"audio/ogg",ogg:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",omdoc:"application/omdoc+xml",onepkg:"application/onenote",onetmp:"application/onenote",onetoc:"application/onenote",onetoc2:"application/onenote",opf:"application/oebps-package+xml",opus:"audio/ogg",otf:"font/otf",owl:"application/rdf+xml",oxps:"application/oxps",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",pdf:"application/pdf",pfr:"application/font-tdpfr",pgp:"application/pgp-encrypted",pkg:"application/octet-stream",pki:"application/pkixcmp",pkipath:"application/pkix-pkipath",pls:"application/pls+xml",png:"image/png",prc:"model/prc",prf:"application/pics-rules",provx:"application/provenance+xml",ps:"application/postscript",pskcxml:"application/pskc+xml",pti:"image/prs.pti",qt:"video/quicktime",raml:"application/raml+yaml",rapd:"application/route-apd+xml",rdf:"application/rdf+xml",relo:"application/p2p-overlay+xml",rif:"application/reginfo+xml",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rmi:"audio/midi",rnc:"application/relax-ng-compact-syntax",rng:"application/xml",roa:"application/rpki-roa",roff:"text/troff",rq:"application/sparql-query",rs:"application/rls-services+xml",rsat:"application/atsc-rsat+xml",rsd:"application/rsd+xml",rsheet:"application/urc-ressheet+xml",rss:"application/rss+xml",rtf:"text/rtf",rtx:"text/richtext",rusd:"application/route-usd+xml",s3m:"audio/s3m",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",ser:"application/java-serialized-object",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",sgi:"image/sgi",sgm:"text/sgml",sgml:"text/sgml",shex:"text/shex",shf:"application/shf+xml",shtml:"text/html",sieve:"application/sieve",sig:"application/pgp-signature",sil:"audio/silk",silo:"model/mesh",siv:"application/sieve",slim:"text/slim",slm:"text/slim",sls:"application/route-s-tsid+xml",smi:"application/smil+xml",smil:"application/smil+xml",snd:"audio/basic",so:"application/octet-stream",spdx:"text/spdx",spp:"application/scvp-vp-response",spq:"application/scvp-vp-request",spx:"audio/ogg",sql:"application/sql",sru:"application/sru+xml",srx:"application/sparql-results+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",stk:"application/hyperstudio",stl:"model/stl",stpx:"model/step+xml",stpxz:"model/step-xml+zip",stpz:"model/step+zip",styl:"text/stylus",stylus:"text/stylus",svg:"image/svg+xml",svgz:"image/svg+xml",swidtag:"application/swid+xml",t:"text/troff",t38:"image/t38",td:"application/urc-targetdesc+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",text:"text/plain",tfi:"application/thraud+xml",tfx:"image/tiff-fx",tif:"image/tiff",tiff:"image/tiff",toml:"application/toml",tr:"text/troff",trig:"application/trig",ts:"video/mp2t",tsd:"application/timestamped-data",tsv:"text/tab-separated-values",ttc:"font/collection",ttf:"font/ttf",ttl:"text/turtle",ttml:"application/ttml+xml",txt:"text/plain",u3d:"model/u3d",u8dsn:"message/global-delivery-status",u8hdr:"message/global-headers",u8mdn:"message/global-disposition-notification",u8msg:"message/global",ubj:"application/ubjson",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",vrml:"model/vrml",vtt:"text/vtt",vxml:"application/voicexml+xml",war:"application/java-archive",wasm:"application/wasm",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webmanifest:"application/manifest+json",webp:"image/webp",wgsl:"text/wgsl",wgt:"application/widget",wif:"application/watcherinfo+xml",wmf:"image/wmf",woff:"font/woff",woff2:"font/woff2",wrl:"model/vrml",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",x3d:"model/x3d+xml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3dz:"model/x3d+xml",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xcs:"application/calendar+xml",xdf:"application/xcap-diff+xml",xdssc:"application/dssc+xml",xel:"application/xcap-el+xml",xenc:"application/xenc+xml",xer:"application/patch-ops-error+xml",xfdf:"application/xfdf",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xhvml:"application/xv+xml",xlf:"application/xliff+xml",xm:"audio/xm",xml:"text/xml",xns:"application/xcap-ns+xml",xop:"application/xop+xml",xpl:"application/xproc+xml",xsd:"application/xml",xsf:"application/prs.xsf+xml",xsl:"application/xml",xslt:"application/xml",xspf:"application/xspf+xml",xvm:"application/xv+xml",xvml:"application/xv+xml",yaml:"text/yaml",yang:"application/yang",yin:"application/yin+xml",yml:"text/yaml",zip:"application/zip"};function Ns(e){let t=(""+e).trim().toLowerCase(),o=t.lastIndexOf(".");return np[~o?t.substring(++o):t]}var Ms=Bt(ec());var Ct=Bt(Hr());async function Rs(e,t,o=1/0,r){r??=new Ze(e,{silent:!0});let n=[],i=[],a=[];for(let s of t){if(a.length>=o){i.push(s);continue}if(!io.includes(s.type)){n.push(s);continue}let c=r.add(s);a.push(c)}return n.length>0&&Ye({type:"add",key:"importUploadImagesUnsupported",variant:"warning",text:(0,Ct.jsxs)("span",{className:gt,children:["Skipped ",n.length," unsupported images"]}),duration:1e4}),i.length>0&&Ye({type:"add",key:"importUploadImagesSkipped",variant:"warning",text:(0,Ct.jsxs)("span",{className:gt,children:["Skipped ",i.length," images over field limit"]}),duration:1e4}),xr(r,a).catch(()=>{}),(await Promise.all(a)).filter(St)}async function xr(e,t){let o="uploadEmbeddedImagesByUrl",r={type:"add",key:o,variant:"progress",icon:"image",duration:1/0,showCloseButton:"never"};for await(let{completed:i,started:a}of e.statusUpdates())Ye({...r,text:(0,Ct.jsxs)("span",{className:gt,children:["Adding ",i," of ",a," images\u2026"]})});await Promise.allSettled(t);let{failed:n}=e.status;n>0&&Ye({type:"add",key:"importUploadImagesFailed",variant:"warning",text:(0,Ct.jsxs)("span",{className:gt,children:["Failed to upload ",n," ",(0,Ms.default)("image",n)]}),duration:5e3}),Ye({type:"remove",key:o})}var Gs=Bt(As());var zs=me("ChooseFileService"),Ir=class{constructor(t,o,r){this.engine=t;this.assetService=o;this.filePickerRef=r;I(this,"assetUploader");this.assetUploader=new Ze(this.engine)}async pickFile({allowedFileTypes:t,multiple:o}={}){let r=this.filePickerRef.current;if(!r)return null;let i=!t||t.includes("*")||t.includes("*/*")?void 0:t?.map(l=>{let s=Gs.default.parse(l)?.essence;if(s)return s;let c=Ns(l);return c||(l.startsWith(".")?l:`.${l}`)}),a=await r.show(i,o);return a.isFiles()?a.value:null}async pickImage({allowedFileTypes:t=no,multiple:o}={}){return this.pickFile({allowedFileTypes:t,multiple:o})}async pickAndUploadImage(t={}){try{let o=await this.pickImage(t);if(!o)return[];if(o.length===1){let r=await this.assetUploader.add(o[0]);if(!r)return[];if(await this.assetService.refresh().catch(B),St(r))return[r]}else return await Rs(this.engine,o,t.maxUploads)}catch(o){zs.warn("Failed to upload file:",o)}return[]}async pickAndUploadFile(t){try{let o=await this.pickFile(t);if(!o)return;let r=o[0];return r?await this.assetUploader.add(r):void 0}catch(o){zs.warn("Failed to upload file:",o)}}async addImages(t){if(!t?.length)return[];let r=(await Promise.all(Array.from(t,n=>this.assetUploader.add(n)))).filter(St);return r.length===0||await this.engine.stores.assetStore.assetService?.refresh().catch(B),r}},{service:Hs,resolve:gp}=Hi();function nS(e,t,o){gp(new Ir(e,t,o))}var Ws=class{constructor(){I(this,"nodeIdToRenderIdToRect",new Map);I(this,"nodeIdToLayoutTemplateSelectorToRect",new Map);I(this,"nodeIdToRenderIdToChildrenRects",new Map)}processLayoutMeasurements(t){let o=new Set,r=new Set;for(let{nodeId:n,renderId:i,layoutMetrics:a,layoutTemplateSelector:l}of t){let{childrenRects:s,...c}=a;r.has(n)||this.nodeIdToLayoutTemplateSelectorToRect.delete(n),r.add(n);let d=l?this.nodeIdToLayoutTemplateSelectorToRect.get(n)?.get(l):this.nodeIdToRenderIdToRect.get(n)?.get(i),u=this.nodeIdToRenderIdToChildrenRects.get(n)?.get(i);if(!(de(d,c,!0)&&yp(u,s))){if(l){let p=this.nodeIdToLayoutTemplateSelectorToRect.get(n)??new Map,m=c.matrix?DOMMatrixReadOnly.fromMatrix(c.matrix):void 0;p.set(l,{...c,matrix:m}),this.nodeIdToLayoutTemplateSelectorToRect.set(n,p)}else{let p=this.nodeIdToRenderIdToRect.get(n)??new Map;p.set(i,N.from(c)),this.nodeIdToRenderIdToRect.set(n,p)}if(s){let p=this.nodeIdToRenderIdToChildrenRects.get(n)??new Map;p.set(i,s),this.nodeIdToRenderIdToChildrenRects.set(n,p)}o.add(n)}}return o}getContentSize(t){let o=this.getRect(t),r=this.getChildrenRects(t);if(!o||!r)return;let{width:n,height:i}=N.merge(...r);return{width:n,height:i}}getRect(t){let o=lr(t);return this.nodeIdToRenderIdToRect.get(o)?.get(t)}getRects(t){return this.nodeIdToRenderIdToRect.get(t)}getLayoutTemplateRects(t){return this.nodeIdToLayoutTemplateSelectorToRect.get(t)}getChildrenRects(t){let o=lr(t);return this.nodeIdToRenderIdToChildrenRects.get(o)?.get(t)}pruneAfterTreeChanges(t){for(let o of t){let r=o.to.parentid&&o.from?.parentid&&o.to.parentid!==o.from.parentid;o.removed?(this.nodeIdToRenderIdToRect.delete(o.id),this.nodeIdToRenderIdToChildrenRects.delete(o.id),this.nodeIdToLayoutTemplateSelectorToRect.delete(o.id)):r&&this.nodeIdToRenderIdToRect.delete(o.id)}}};function yp(e,t){return e===t?!0:e===void 0||t===void 0||e.length!==t.length?!1:t.every((o,r)=>N.equals(o,e[r]??null))}async function Us(e,t){await t.updateComponent(e.id,1)}async function js(e,{codeGenerationStore:t,modulesStore:o,treeStore:r},n,i={}){let{waitForAll:a=!0,persist:l=!0}=i,s=go(r.tree,e,n),c=[],d=[];for(let p of s)d.push(Oe("screen",p.id,"default").value),p!==e&&c.push(Us(p,t));let u=Us(e,t);return c.push(u),await Promise.all(a?c:[u]),l&&await t.persistence.process(),Bi(n,d,o)}function $s(e,t){if(ge(e)&&Ri(t,e)){let o=ki(t,e);return b(J(o),"PreviewRenderer: WebPage Scope node must exist and be a WebPageNode"),b(o.isLoaded(),"PreviewRenderer: WebPage Scope node must fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if(J(e)&&e.isLoaded())return{entryNode:e.getPrimaryVariant(),entryScopeNode:e};if(Ut(e)){let o=t.getGroundNodeFor(e),r=t.getScopeNodeFor(o);if(Ae(r))return{entryNode:o,entryScopeNode:r}}if(Yo(e)){let o=t.getScopeNodeFor(e);return b(Sn(o),"PreviewRenderer: Scope node must exist and be a node supports breakpoint variants"),b(o.isLoaded(),"PreviewRenderer: Scope node with breakpoint variants must be fully loaded"),{entryNode:o.getPrimaryVariant(),entryScopeNode:o}}if(hn(e)&&!Yo(e)){let o=t.getScopeNodeFor(e);return b($t(o),"PreviewRenderer: Smart Component Scope node must exist and be a SmartComponentNode"),{entryNode:e,entryScopeNode:o}}if(ti(e)&&e.isVectorSetItem){let o=t.getScopeNodeFor(e);return b(Kt(o),"PreviewRenderer: Scope node must exist and be a VectorSetNode"),{entryNode:e,entryScopeNode:o}}return{entryNode:e}}function Xs(e,t){let o=e.getGroundNodeFor(t),r=e.getScopeNodeFor(o);return ze(r)&&!ge(o)}var Ks=me("renderInfoForPreviewItem");function Qe(e){let t=e.root.getDefaultLocale(),o=e.root.locales,r=[t];return o&&r.push(...o),r}function _s(e,t,o,r,n,i){let a=[],l=[],s={global:i.root.globalPageEffect,routes:{}},c=new Set,d=Qe(i),p=wn(d,{includeDrafts:!0}).find(f=>f.id===n);for(let f of i.root.children){if(!Xt(f)&&!J(f))continue;if(Xt(f)&&a.push({id:f.id,moduleIdentifier:Qi(),layoutTemplate:{moduleIdentifier:f.instanceIdentifier}}),J(f)){let g=f.isLoaded()?dr(kn(f)):[],x=li(i,f),T=ta(e,f);T&&l.push(T),a.push({id:f.id,moduleIdentifier:f.instanceIdentifier,collectionId:T?.collectionId,path:x,elements:g,layoutTemplate:vp(f,p)}),f.isLoaded()&&Ji(s,f)}let C=j.componentForIdentifier(f.instanceIdentifier)?.fonts;if(!C){Ks.debug("Did not find fonts for component:",f.instanceIdentifier);continue}for(let g of Zi(C))c.add(g)}let m=r?t.getPathSlugs(o.id,r,p):void 0,h=[],v=m?.unresolvedSlugs;for(let f in v){let y=v[f];b(y),h.push({variableId:f,collectionId:y.collectionId,collectionItemId:y.collectionItemId})}let S=m?.pathVariables?dr(m.pathVariables):[];return Ks.debug("renderInfoFor",{webPageNode:o,collectionItemNodeId:r,initialUnresolvedPathSlugs:h}),{kind:"webpage",routes:a,collectionUtils:l,locales:d,initialPathVariables:S,pageEffects:s,preloadFonts:Array.from(c),initialRoute:o.id,initialUnresolvedPathSlugs:h,initialLocaleId:n,adaptLayoutToTextDirection:i.root.adaptLayoutToTextDirection}}function vp(e,t){if(!vn(e))return;let o=e.getResolvedControlPropValues(j,ea(),void 0,t);return{moduleIdentifier:e.layoutTemplateIdentifier,props:Dr(o)?void 0:o,richTextControlKeys:e.getRichTextControlKeys(j),vectorSetItemControls:e.getComponentVectorSetChildren(j)}}function qs({treeStore:e,chromeStore:t,previewStore:o,modulesStore:r},n){if(!n)return{kind:"empty"};switch(n.type){case"component":return b(Ee(n.componentId),"Previewing component should provide module identifier",n.componentId),{kind:"module",layout:"component",moduleIdentifier:n.componentId,locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};case"node":{let i=e.tree.get(n.nodeId);b(i,"Previewing node should provide correct node id",n.nodeId);let a=$s(i,e.tree),l=a.entryScopeNode;if(Xt(l))return _s(r,o,l,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if(Ae(l))return{kind:"module",moduleIdentifier:Oe("design",i.id,"default").value,layout:"design-screen",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};if(J(a.entryScopeNode))return _s(r,o,a.entryScopeNode,n.collectionItemNodeId,t.canvasLocaleId,e.tree);if($t(a.entryScopeNode)){let s={variant:a.entryNode.id};return{kind:"module",moduleIdentifier:a.entryScopeNode.instanceIdentifier,props:s,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection}}if(Kt(a.entryScopeNode))return{kind:"module",moduleIdentifier:Oe("vector",a.entryNode.id,"default").value,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection};if(ge(a.entryNode)){let s=a.entryNode.getCodeComponentProps(j);return{kind:"module",moduleIdentifier:a.entryNode.codeComponentIdentifier,props:s,layout:"component",locales:Qe(e.tree),initialLocaleId:t.canvasLocaleId,adaptLayoutToTextDirection:e.tree.root.adaptLayoutToTextDirection}}if(Xs(e.tree,a.entryNode)){let s=e.tree.getGroundNodeFor(a.entryNode),c=go(e.tree,a.entryNode,j),d=[];for(let u of c){let p=e.tree.getGroundNodeFor(u),m=Oe("screen",p.id,"default").value;d.push({id:p.id,moduleIdentifier:m})}return{kind:"prototype",routeId:s.id,routes:d}}throw new Error(`Unsupported node for preview: ${i.id}`)}default:Te(n)}}var xp="getVectorSetItems";function Ys(e){return xp in e}function Zs(e,t){return e.getNodesWithTrait(t,r=>ri(r,e)).flatMap(r=>{if(r.moduleSourceRevision===void 0)return[];let n=Yi(r,e).filter(a=>!a.includes("draftCollection")),i=r.moduleSourceRevision;return n.map(a=>({moduleIdentifier:Fr(a,"default").value,moduleRevision:i}))})}function bp(e){return e.mainView===1?e.codeEditorPreviewVisible:e.mainView===3}function lv(e,t,o={}){let{previewStore:r,fullsizePreviewStore:n,loadingStore:i,chromeStore:a,treeStore:l,modulesStore:s}=e;if(!i.hasMinimalEditableData)return;let{visible:c,shownOnLaunch:d,source:u="unknown"}=o,p=bp(a),m=typeof c=="boolean"?c:!p;if(a.setPreviewVisible(m),!p&&m){r.addActiveSession();let h=r.computePreviewItem();if(!Cp({treeStore:l,previewStore:r,chromeStore:a,modulesStore:s},h))r.item=h;else if(h?.type==="node"){let v=l.tree.get(h.nodeId);b(v,"Did not find previewNode",h.nodeId),n.updatePreviewSize(v)}Ip(t,h).then(v=>{r.targetModuleRevisions=Zs(l.tree,v)}).catch(B).finally(()=>{r.item=h}),pa({shown_on_launch:d,source:u})}else p&&!m&&(r.removeActiveSession(),r.stickyPreviewItem=!1,r.item=void 0)}function Cp(e,t){if(!t||t.type!=="node")return!1;let{modulesStore:o}=e,r=qs(e,t);switch(r.kind){case"module":{let n=fe(r.moduleIdentifier);return Ot(n)?!o.getModuleEntryByLocalId(n.localId):!1}case"webpage":{let n=Ao("screen",r.initialRoute);return!o.getModuleEntryByLocalId(n)}case"prototype":{let n=Ao("prototype",r.routeId);return!o.getModuleEntryByLocalId(n)}case"empty":return!1;default:Te(r)}}async function Ip(e,t){if(yt(e,"canDesign")||!t)return[];let o=await Tp(t,e.stores,e),{codeGenerationStore:r}=e.stores,n=await r.generateAndUpdateQueuedComponents();return await r.serialization.idle(),[o,...n]}async function Tp(e,t,o){if(yt(o,"canDesign"))return Promise.resolve(void 0);let{codeGenerationStore:r,treeStore:n,modulesStore:i}=t;if(e.type==="component"){await r.updateComponent(e.componentId,1);return}else if(e.collectionItemNodeId){let a=n.tree.getParent(e.collectionItemNodeId);return a?(await r.updateComponent(a.id,1),a.id):void 0}else{let a=n.tree,l=a.get(e.nodeId);b(l,"Did not find previewNode",e.nodeId);let s=a.getCanvasScopeNodeFor(l);if(b(s,"Tried triggering code generation for non canvas scope node:",l.id),Ys(s))return oi(l)?(await r.updateComponent(l.id,1),l.id):Promise.resolve(void 0);if(En(s))return await r.updateComponent(s.id,1),s.id;if(ze(s))return await js(l,{codeGenerationStore:r,treeStore:n,modulesStore:i},j),l.id;if(Ae(s))return await r.updateComponent(l.id,1),l.id;Te(s)}}function uv(e){let{newContentAsDraft:t}=e.stores.persistedUserDefaults;return!(!t||e.stores.publishStore.publishStatus===1)}var Tt=class Tt extends oo{constructor(o){super();this.scheduler=o;I(this,"menu",null)}show(o,r){if(!re.isOn("improvedMenus")){Mp(o,r);return}let n={...r,className:r.options?.className},i=Tt.buildItems(o);this.menu={items:i,config:n,startTime:performance.now()}}close(){this.scheduler.processWhenReady(()=>{this.menu&&(this.menu.config.onDone?.(),this.menu.config.onCancel?.(),this.menu=null)})}};I(Tt,"buildItems",(o,r=[])=>{let n=[];for(let[i,a]of o.entries()){if(!$(a.submenu)&&!Ur(a.submenu))continue;let{submenu:l,...s}=a,c=r?[...r,i]:[i],d={...s,path:c};if(d.type==="separator"){if(i===0||i===o.length-1||n[n.length-1]?.type==="separator")continue;n.push(d);continue}if(a.disabled&&(d.enabled=!1),a.action&&(d.role=a.action),a.role){let{states:p,options:m}=qi(a.role),h=p[a.role],{label:v,checked:S,visible:f}=m[a.role]??{};oe(v)&&(d.label=v),$(a.checked)&&Vt(S)&&(d.checked=S),$(a.visible)&&Vt(f)&&(d.visible=f),$(a.disabled)&&$(a.enabled)&&Vt(h)&&(d.enabled=h)}if(a.visible===!1)continue;if(l){let p=Tt.buildItems(l,c),m={...d,submenu:p};n.push(m);continue}let u=Np(d);n.push(u)}return n.length>0&&n[n.length-1]?.type==="separator"&&n.pop(),n.length>0&&n[0]?.type==="separator"&&n.shift(),n});var Js=Tt;function Np(e){let{role:t}=e;if(!t)return e;let o={...e};return!ai&&!e.acceleratorWindows&&(o.acceleratorWindows=ra[t]),e.accelerator||(o.accelerator=oa[t]),o}function Mp(e,t){let o=na.buildFromTemplate(e),r={...t.options,onCancel:t.onCancel};o.popup(t.location,r).catch(B).finally(t.onDone)}var et,xe,Qs=class extends oo{constructor(o){super();this.modulesStore=o;Lo(this,et,new Map);Lo(this,xe,new Map);I(this,"_forceUpdate",0)}rerender(){this._forceUpdate++}queue(o){if(ce(this,xe).has(o))return;let r=Br();ce(this,xe).set(o,r),this.rerender()}cache(o,r){let n=ce(this,xe).get(o);n&&n.resolve(r),ce(this,xe).delete(o),ce(this,et).set(o,r),this.rerender()}getByGlobalId(o){let r=this.modulesStore.getPersistedModuleByGlobalId(o);if(!r)return;let n=si(r.localId)[1],i=ce(this,xe).get(n);if(i)return i;let a=ce(this,et).get(n);if(a)return a;let l=this.modulesStore.forType("vector").getByStableName(n)?.transientSVGIcon;if(l)return{svg:l}}delete(o){ce(this,et).delete(o),this.rerender()}};et=new WeakMap,xe=new WeakMap;function Lv(e,t){if(!bi(e)){t.onlyNodesWithFormInputFontStyles=!1;return}ne("formInputFontFamily",t,e),Rp(t,e),ne("formInputFontColor",t,e),ne("formInputFontWeight",t,e),ne("formInputFontStyle",t,e),ne("formInputFontLineHeight",t,e),ne("formInputFontLineHeightUnit",t,e),ne("formInputFontTextAlignment",t,e),ne("formInputFontLetterSpacing",t,e),ne("formInputFontLetterSpacingUnit",t,e),A(t.formInputFontSelector)&&(t.formInputFontSelector=new Set),jr(e.formInputFontSelector)&&t.formInputFontSelector.add(e.formInputFontSelector),t.formInputOpenTypeFontFeatures=Tr(t.formInputOpenTypeFontFeatures,e.formInputOpenTypeFontFeatures)}function Rp(e,t){let o=e.formInputFontSize,r=e.formInputFontSizeUnit;if(H(o)&&H(r)||$(t.formInputFontSize))return;let[n,i]=W(t.formInputFontSize)?[t.formInputFontSize,"px"]:lt(t.formInputFontSize);if(A(r))e.formInputFontSizeUnit=i;else if(Se(i,r)){e.formInputFontSizeUnit=k,e.formInputFontSize=k;return}A(o)?e.formInputFontSize=n:Se(n,o)&&(e.formInputFontSize=k)}function Tr(e,t){let o=new Set(Le(e)?Object.keys(e):void 0),r=t??[],n=Le(e)?e:{};for(let i of r){if(!ct(i))continue;let a=n[i];$(a)&&(n[i]=Le(e)?k:!0),o.delete(i)}for(let i of o)ct(i)&&(n[i]=k);return n}var Pp={borderBottom:k,borderLeft:k,borderRight:k,borderTop:k,borderWidth:k,borderColor:k,borderStyle:k,borderPerSide:k};function D(e,t){return H(t)?k:A(t)?e:Se(e,t)?k:e}function Dp(e,t){return H(t)?k:A(t)||de(e,t)?e:k}function Fp(e,t,o){return b(Le(e)),H(e)?k:e.length!==t.length?k:(e.forEach((r,n)=>{let i=t[n];b(i);let a=r.type;switch(a){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"number":case"object":case"richtext":case"string":case"transition":case"image":case"responsiveimage":case"scrollsectionref":case"customcursor":case"border":case"cursor":Nt(r,i,o);break;default:Te(a)}}),e)}function Nt(e,t,o){switch(e.type){case"array":{if(b(t.type==="array"),b(o.type==="array"),H(e.value))break;if(A(e.value)){if(zt(t.value)){e.value=t.value;break}e.value=t.value.map(r=>Vp(o.control,r.id))}if(zt(t.value)){e.value=D(t.value,e.value);break}if(zt(e.value)){e.value=k;break}e.value=Fp(e.value,t.value,o.control);break}case"slot":{if(b(t.type===e.type),H(e.value))break;b(o.type==="slot"),b(!q(t.value),"Slots don't support dynamic values"),A(e.value)?e.value=t.value:e.value=k;break}case"object":if(b(t.type===e.type),H(e.value))break;if(b(o.type==="object"),A(e.value))if(t.value===null)e.value=null;else{e.value={};for(let r in o.controls){let n=o.controls[r];b(n);let i=Lp(n);i&&(e.value[r]=i)}}if(e.value===null||t.value===null){e.value!==t.value&&(e.value=k);break}for(let r in e.value){let n=o.controls[r];b(n);let i=e.value[r];b(i);let a=t.value[r];b(a,"getControlProps(), should have added these if they were missing from the document data"),Nt(i,a,n)}break;case"transition":if(b(t.type===e.type),H(e.value))break;if(A(e.value)){e.value=t.value;break}if(q(e.value)||q(t.value)||!e.value||!t.value){e.value=D(t.value,e.value);break}de(e.value,t.value)||(e.value=k);break;case"responsiveimage":if(b(t.type==="image"),e.value=D(t.value,e.value),e.type==="responsiveimage"){let r=oe(t.alt)?t.alt:"";e.alt=D(r,e.alt);let{positionX:n,positionY:i}=t;e.positionX=D(n,e.positionX),e.positionY=D(i,e.positionY)}break;case"fusednumber":b(t.type===e.type),e.single=D(t.value.single,e.single),e.isFused=D(t.isFused,e.isFused),e.fused[0]=D(t.value.fused[0],e.fused[0]),e.fused[1]=D(t.value.fused[1],e.fused[1]),e.fused[2]=D(t.value.fused[2],e.fused[2]),e.fused[3]=D(t.value.fused[3],e.fused[3]);break;case"link":{if(b(t.type===e.type),H(e.value))break;if(A(e.value)){e.value=t.value;break}if(q(e.value)||q(t.value)||!e.value||!t.value){e.value=D(t.value,e.value);break}if(!jo(e.value,t.value)){e.value=k;break}break}case"linkrelvalues":{if(b(t.type===e.type),H(e.value))break;if(A(e.value)){e.value=t.value;break}if(q(e.value)||q(t.value)||!e.value||!t.value){e.value=D(t.value,e.value);break}de(e.value,t.value)||(e.value=k);break}case"pagescope":if(b(t.type===e.type),H(e.value))break;if(A(e.value)){e.value=t.value;break}if(!e.value||!t.value){e.value=D(t.value,e.value);break}if(!jo(e.value,t.value)){e.value=k;break}break;case"font":{if(b(o.type==="font"),b(t.type===e.type),H(e.value))break;if(A(e.value)){if($(t.value)){e.value=t.value;break}let h=new Set([t.value.fontSelector]),v=E,S=new Set,f=new Set,y=E,C=E,g=E,x=new Set,T={};if(o.displayFontSize){let[P,M]=_o(t.value.fontSize)?lt(t.value.fontSize):[];v=P,M&&S.add(M)}if(o.displayTextAlignment&&(C=t.value.textAlignment),o.controls==="extended"){let[P,M]=t.value.lineHeight??[];y=P,M&&f.add(M);let[w,U]=t.value.letterSpacing??[];g=w,U&&x.add(U)}t.value.openTypeFontFeatures&&(T=(t.value.openTypeFontFeatures??[]).reduce((P,M)=>(ct(M)&&(P[M]=!0),P),{})),e.value={fontSelector:h,lineHeightValue:y,lineHeightUnits:f,fontSizeValue:v,fontSizeUnits:S,textAlignment:C,letterSpacingValue:g,letterSpacingUnits:x,openTypeFontFeatures:T};break}if($(e.value)){$(t.value)||(e.value=k);break}if($(t.value)){e.value=k;break}let{fontSelector:r,lineHeight:[n,i]=[],fontSize:a,textAlignment:l,letterSpacing:[s,c]=[],openTypeFontFeatures:d}=t.value;e.value.fontSelector.add(r);let[u,p]=_o(a)?lt(a):[],m=e.value.fontSizeValue!==u||!$(p)&&!e.value.fontSizeUnits.has(p);o.displayFontSize&&m&&(e.value.fontSizeValue=k,p&&e.value.fontSizeUnits.add(p)),o.displayTextAlignment&&e.value.textAlignment!==l&&(e.value.textAlignment=k),o.controls==="extended"&&(e.value.lineHeightValue!==n&&(e.value.lineHeightValue=k),i&&e.value.lineHeightUnits.add(i),e.value.letterSpacingValue!==s&&(e.value.letterSpacingValue=k),c&&e.value.letterSpacingUnits.add(c)),e.value.openTypeFontFeatures=Tr(e.value.openTypeFontFeatures,d);break}case"customcursor":case"scrollsectionref":{b(t.type===e.type);let r=de(t.value,e.value)?e.value:t.value;e.value=D(r,e.value);break}case"border":{if(b(t.type===e.type),A(e.value)){q(t.value)?e.value=t.value:Ne(t.value)?e.value=null:e.value={...t.value};break}if(q(t.value)||q(e.value)||Ne(t.value)||Ne(e.value)){Se(t.value,e.value)&&(e.value=Pp);break}let r=e.value;r.borderTop=D(t.value.borderTop,r.borderTop),r.borderRight=D(t.value.borderRight,r.borderRight),r.borderBottom=D(t.value.borderBottom,r.borderBottom),r.borderLeft=D(t.value.borderLeft,r.borderLeft),r.borderWidth=D(t.value.borderWidth,r.borderWidth),r.borderColor=D(t.value.borderColor,r.borderColor),r.borderStyle=D(t.value.borderStyle,r.borderStyle);break}case"boxshadow":b(t.type===e.type),e.value=yn(t.value,e.value);break;case"multicollectionreference":b(t.type===e.type),e.value=Dp(t.value,e.value);break;case"gap":{if(b(t.type===e.type),e.value=D(t.value,e.value),!H(e.columnGap)){let r=q(t.value)?k:Si(t.value);A(e.columnGap)?e.columnGap=r:Se(r,e.columnGap)&&(e.columnGap=k)}if(!H(e.rowGap)){let r=q(t.value)?k:vi(t.value);A(e.rowGap)?e.rowGap=r:Se(r,e.rowGap)&&(e.rowGap=k)}break}case"boolean":case"color":case"date":case"enum":case"file":case"number":case"richtext":case"string":case"image":case"cursor":case"padding":case"borderradius":case"collectionreference":case"trackingid":case"vectorsetitem":b(t.type===e.type),e.value=D(t.value,e.value);break;default:}}function Mt(e){switch(e.type){case"boolean":case"color":case"date":case"enum":case"file":case"link":case"linkrelvalues":case"number":case"richtext":case"string":case"transition":case"boxshadow":case"image":case"object":return{type:e.type,value:E};case"array":case"slot":case"font":case"pagescope":case"scrollsectionref":case"customcursor":case"border":case"cursor":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"vectorsetitem":return{type:e.type,value:E};case"gap":return{type:e.type,value:E,columnGap:E,rowGap:E};case"trackingid":return{type:e.type,value:E,trackingIdAIPrompt:E};case"fusednumber":return{type:"fusednumber",isFused:E,single:E,fused:[E,E,E,E]};case"responsiveimage":return{type:"responsiveimage",value:E,alt:E,positionX:E,positionY:E};case"eventhandler":return null;default:return null}}var Bp={number:!0,enum:!0,boolean:!0,string:!0,richtext:!0,color:!0,image:!0,responsiveimage:!0,file:!0,transition:!0,link:!0,date:!0,object:!0,array:!0,fusednumber:!0,font:!0,pagescope:!0,scrollsectionref:!0,customcursor:!0,border:!0,cursor:!0,boxshadow:!0,gap:!0,padding:!0,borderradius:!0,collectionreference:!0,multicollectionreference:!0,trackingid:!0};function Ep(e){return Object.hasOwn(Bp,e)}function Op(e){return Ep(e.type)}function Lp(e){let t=Mt(e);return t?(b(Op(t)),t):null}function Vp(e,t){let o=Mt(e);b(o);let r=o;return r.id=t,r}function Qv(e,t){let o={};for(let r in e){let n=e[r];if(!n)continue;let i=Mt(n);i&&(o[r]=i)}for(let r of t)for(let n in r){let i=e[n];if(b(i),i.type==="eventhandler")continue;let a=o[n];b(a,"Each control prop should have a corresponding reduced control prop");let l=r[n];b(l),Nt(a,l,i)}return o}function dx(e,t,o,r,n){let i=o.id;if(!i)return;let a=e.getNodeWithTrait(o.providerId,Wt);if(!a)return;let l=a.dataIdentifier;if(!Ot(l))return;let s=ut(e,l);if(!s)return;n??=vt(a,t);let c=e.getNodeWithTrait(n,st);if(!c)return;let d=Yt(e,t,i,c,s);d&&(c=d.collectionItemNode,s=d.collectionNode,i=d.variableId);let p=s.getPropertyControls(e)[i];if(!p)return;let m=s.getVariable(i);if(!m)return;let h=c.getControlProp(i),{controlProp:v,reducedControlProp:S}=Ap(p,h);if(Ui(v)&&(b(S,"Reduced control prop should not be null when a collection control prop is present"),s.id===c.parentid&&!(s.managedByPlugin&&!m.userEditable)&&m.type===r&&v.type===r))return{collectionNode:s,collectionItemNode:c,variableDefinition:m,controlDescription:p,rawControlProp:h,controlProp:v,reducedControlProp:S,variableId:i}}var el=new WeakMap;function Ap(e,t){let o=el.get(e);if(o&&o.rawControlProp===t){let{controlProp:i,reducedControlProp:a}=o;return{controlProp:i,reducedControlProp:a}}let r=bn(e,t),n=Mt(e);return n&&r&&Nt(n,r,e),el.set(e,{rawControlProp:t,controlProp:r,reducedControlProp:n}),{controlProp:r,reducedControlProp:n}}function tl(e){return e!=null&&typeof e=="object"&&e.nodeType===1}function ol(e,t){return t&&e==="hidden"?!1:e!=="visible"&&e!=="clip"}function Nr(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){let o=getComputedStyle(e,null);return ol(o.overflowY,t)||ol(o.overflowX,t)}return!1}function Io(e,t,o,r,n,i,a,l){return i<e&&a>t||i>e&&a<t?0:i<=e&&l<=o||a>=t&&l>=o?i-e-r:a>t&&l<o||i<e&&l>o?a-t+n:0}function Mr(e,t){let{scrollMode:o,block:r,inline:n,boundary:i,skipOverflowHiddenElements:a}=t,l=typeof i=="function"?i:w=>w!==i;if(!tl(e))throw new TypeError("Invalid target");let s=document.scrollingElement||document.documentElement,c=[],d=e;for(;tl(d)&&l(d);){if(d=d.parentNode,d===s){c.push(d);break}d===document.body&&Nr(d)&&!Nr(document.documentElement)||Nr(d,a)&&c.push(d)}let u=window.visualViewport,p=u?.width??innerWidth,m=u?.height??innerHeight,h=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,{height:S,width:f,top:y,right:C,bottom:g,left:x}=e.getBoundingClientRect(),T=r==="start"||r==="nearest"?y:r==="end"?g:y+S/2,P=n==="center"?x+f/2:n==="end"?C:x,M=[];for(let w of c){let{height:U,width:_,top:Z,right:K,bottom:tt,left:be}=w.getBoundingClientRect();if(o==="if-needed"&&y>=0&&x>=0&&g<=m&&C<=p&&y>=Z&&g<=tt&&x>=be&&C<=K)return M;let ke=getComputedStyle(w),we=parseInt(ke.borderLeftWidth,10),Ce=parseInt(ke.borderTopWidth,10),Pe=parseInt(ke.borderRightWidth,10),De=parseInt(ke.borderBottomWidth,10),G=0,L=0,Ie="offsetWidth"in w?w.offsetWidth-w.clientWidth-we-Pe:0,V="offsetHeight"in w?w.offsetHeight-w.clientHeight-Ce-De:0;if(s===w)r==="start"?G=T:r==="end"?G=T-m:r==="nearest"?G=Io(v,v+m,m,Ce,De,v+T,v+T+S,S):G=T-m/2,n==="start"?L=P:n==="center"?L=P-p/2:n==="end"?L=P-p:L=Io(h,h+p,p,we,Pe,h+P,h+P+f,f),G=Math.max(0,G+v),L=Math.max(0,L+h);else{r==="start"?G=T-Z-Ce:r==="end"?G=T-tt+De+V:r==="nearest"?G=Io(Z,tt,U,Ce,De+V,T,T+S,S):G=T-(Z+U/2)+V/2,n==="start"?L=P-be-we:n==="center"?L=P-(be+_/2)+Ie/2:n==="end"?L=P-K+Pe+Ie:L=Io(be,K,_,we,Pe+Ie,P,P+f,f);let{scrollLeft:te,scrollTop:Fe}=w;G=Math.max(0,Math.min(Fe+G,w.scrollHeight-U+V)),L=Math.max(0,Math.min(te+L,w.scrollWidth-_+Ie)),T+=Fe-G,P+=te-L}M.push({el:w,top:G,left:L})}return M}function rl(e){return e===Object(e)&&Object.keys(e).length!==0}function zp(e,t="auto"){let o="scrollBehavior"in document.body.style;e.forEach(({el:r,top:n,left:i})=>{r!==document.body&&(r.scroll&&o?r.scroll({top:n,left:i,behavior:t}):(r.scrollTop=n,r.scrollLeft=i))})}function Gp(e){return e===!1?{block:"end",inline:"nearest"}:rl(e)?e:{block:"start",inline:"nearest"}}function nl(e,t){let o=!e.ownerDocument.documentElement.contains(e);if(rl(t)&&typeof t.behavior=="function")return t.behavior(o?[]:Mr(e,t));if(o)return;let r=Gp(t);return zp(Mr(e,r),r.behavior)}var Hp="codemark",Rt=100,il=new Tn(Hp);function se(e,t){var o,r;return"schema"in e?(o=t?.markType)!==null&&o!==void 0?o:e.schema.marks.code:(r=t?.markType)!==null&&r!==void 0?r:e.state.schema.marks.code}function pe(e,t){return e.resolve(Math.min(Math.max(1,t),e.nodeSize-2))}function ll(e,t,o,r){var n;let i=e.isInSet((n=t.state.storedMarks)!==null&&n!==void 0?n:t.state.doc.resolve(o).marks()),a=t.state.doc.rangeHasMark(o,r,e);return!!(i||a)}var al={match:/`((?:[^`\w]|[\w])+)`$/,handler:(e,t,o,r,n,i,a,l)=>{if(ll(e,t,n,i))return!1;let s=r[1],c=e.create(l),d=n+s.length,u=t.state.tr.delete(n,i).insertText(s).addMark(n,d,c),p=u.setSelection(Y.create(u.doc,d)).removeStoredMark(e),m=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${s}${o}`});return t.dispatch(m),!0}},sl={match:/^`((?:[^`\w]|[\w])+)`/,handler:(e,t,o,r,n,i,a,l)=>{if(ll(e,t,n,i))return!1;let s=e.create(l),c=r[1],d=n,u=t.state.tr.delete(n,i).insertText(c).addMark(n,n+c.length,s),p=u.setSelection(Y.create(u.doc,d)).addStoredMark(s),m=p.setMeta(a.input,{transform:p,from:n,to:i,text:`\`${c}${o}`});return t.dispatch(m),!0}};function Wp(e,t,o,r,n,i,a){if(t.composing)return!1;let{state:l}=t,s=l.doc.resolve(o);if(s.parent.type.spec.code)return!1;let c="\uFFFC",d=s.parent.textBetween(Math.max(0,s.parentOffset-Rt),s.parentOffset,void 0,c)+n,u=n+s.parent.textBetween(s.parentOffset,Math.min(s.parent.nodeSize-2,s.parentOffset+Rt),void 0,c),p=al.match.exec(d),m=sl.match.exec(u);if(p){let h=al.handler(e,t,n,p,o-p[0].length+n.length,r,i,a);if(h)return h}return m?sl.handler(e,t,n,m,o,r+m[0].length-n.length,i,a):!1}function cl(e,t){t||(t={});let o=new ee({isInputRules:!0,state:{init:()=>null,apply(r,n){let i=r.getMeta(o);return i||(r.selectionSet||r.docChanged?null:n)}},props:{handleTextInput(r,n,i,a){let l=se(r,t);return Wp(l,r,n,i,a,{input:o,cursor:e},t.attrs)}}});return o}function le(e,t,o="next"){let r={action:o};return e.dispatch(e.state.tr.setMeta(t,r)),!1}function dl(e,t,o,r,n){if(e.state.selection.empty||o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{from:i,to:a}=e.state.selection;if(a-i>=Rt||e.state.doc.rangeHasMark(i,a,r))return!1;let l=e.state.tr.addMark(i,a,r.create(n)),s=l.setSelection(Y.create(l.doc,a)).removeStoredMark(r);return e.dispatch(s),!0}function Up(e,t,o,r,n){var i;if(o.metaKey)return le(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:l}=e.state;if(!a.empty)return!1;let s=t.getState(e.state),c=a.$from,d=!!r.isInSet(c.marks()),u=!!r.isInSet((i=c.marksAcross(pe(l,a.from+1)))!==null&&i!==void 0?i:[]);return c.pos===e.state.doc.nodeSize-3&&c.parentOffset===c.parent.nodeSize-2&&s?.active?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):d===u&&c.parentOffset!==0?!1:d&&(!s?.active||s.side===-1)&&c.parentOffset!==0?(e.dispatch(e.state.tr.removeStoredMark(r)),!0):u&&s?.side===-1?(e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0):!1}function pl(e,t,o,r,n){if(Up(e,t,o,r,n))return!0;let{selection:a}=e.state,l=a.$from;return a.empty&&l.parentOffset===l.parent.nodeSize-2?le(e,t):!1}function jp(e,t,o,r,n){var i;if(o.metaKey)return le(e,t);if(o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:a,doc:l}=e.state,s=t.getState(e.state),c=!!r.isInSet(a.$from.marks()),d=!!r.isInSet((i=pe(l,a.empty?a.from-1:a.from+1).marks())!==null&&i!==void 0?i:[]);if(c&&s?.side===-1&&a.$from.parentOffset===0)return!1;if(s?.side===0&&a.$from.parentOffset===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c&&d&&s?.side===0)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active&&a.$from.parentOffset===0||!c&&s?.active&&s?.side===0)return e.dispatch(e.state.tr.removeStoredMark(r)),!0;if(c===d)return!1;if(d||!a.empty&&c){let u=a.empty?a.from-1:a.from,p=e.state.tr.setSelection(Y.create(l,u));return!a.empty&&d?e.dispatch(p.addStoredMark(r.create(n))):e.dispatch(p.removeStoredMark(r)),!0}if((d||!a.empty&&c)&&!s?.active){let u=a.empty?a.from-1:a.from;return e.dispatch(e.state.tr.setSelection(Y.create(l,u)).removeStoredMark(r)),!0}if(c&&!s?.active&&a.$from.parentOffset>0)return e.dispatch(e.state.tr.setSelection(Y.create(l,a.from-1)).addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active&&s.side!==-1)return e.dispatch(e.state.tr.addStoredMark(r.create(n))),!0;if(c&&!d&&s?.active){let u=a.from-1;return e.dispatch(e.state.tr.setSelection(Y.create(l,u)).addStoredMark(r.create(n))),!0}return!1}function ul(e,t,o,r,n){if(jp(e,t,o,r,n))return!0;let{selection:a}=e.state,l=a.$from,s=t.getState(e.state);return l.pos===1&&l.parentOffset===0&&s?.side===-1?!0:a.empty&&l.parentOffset===0?le(e,t):!1}function ml(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=pe(i,n.from-1),l=!!r.isInSet(a.marks()),s=a.parentOffset===0,c=!!r.isInSet(pe(i,n.to+1).marks());if((!l||s)&&!c)return le(e,t);let d=t.getState(e.state);if(n.empty&&d?.side===-1){let u=e.state.tr.delete(n.from-1,n.from);return e.dispatch(u),!0}return!1}function fl(e,t,o,r){if(o.metaKey||o.shiftKey||o.altKey||o.ctrlKey)return!1;let{selection:n,doc:i}=e.state,a=!!r.isInSet(n.$from.marks()),l=n.$from.parentOffset===0,s=!!r.isInSet(pe(i,n.to+2).marks());return(!a||l)&&!s?le(e,t):!1}function hl(e,t){var o,r;if(!e)return null;let{selection:n,doc:i}=e;if(!n.empty)return null;let a=!!t.isInSet((o=e.storedMarks)!==null&&o!==void 0?o:[]),l=!!t.isInSet(n.$from.marks()),s=!!t.isInSet((r=pe(i,n.from+1).marks())!==null&&r!==void 0?r:[]),c=n.$from.parentOffset===0;return l!==s||!l&&a!==l||l&&c?e.tr.removeStoredMark(t):null}function $p(){let e=document.createElement("span");return e.classList.add("fake-cursor"),e}function Xp(e){e||(e={});let t=new ee({key:il,appendTransaction:(o,r,n)=>{var i;let a=t.getState(r),l=(i=o[0])===null||i===void 0?void 0:i.getMeta(t);return a?.next||l?.action==="click"?hl(n,se(n,e)):null},state:{init:()=>null,apply(o,r,n,i){var a;let l=o.getMeta(t);if(l?.action==="next")return{next:!0};let s=se(i,e),c=s.isInSet((a=i.storedMarks)!==null&&a!==void 0?a:i.doc.resolve(o.selection.from).marks()),d=s.isInSet(i.doc.resolve(o.selection.from).marks()),u=s.isInSet(pe(i.doc,o.selection.from+1).marks()),p=o.selection.$from.parentOffset===0;return o.selection.empty?!c&&u&&(!d||p)?{active:!0,side:-1}:c&&(!d||p)?{active:!0,side:0}:!c&&d&&!u?{active:!0,side:0}:c&&d&&!u?{active:!0,side:-1}:null:null}},props:{attributes:o=>{var r;let{active:n=!1}=(r=t.getState(o))!==null&&r!==void 0?r:{};return Object.assign({},n?{class:"no-cursor"}:{})},decorations:o=>{var r;let{active:n,side:i}=(r=t.getState(o))!==null&&r!==void 0?r:{};if(!n)return Jo.empty;let a=Dn.widget(o.selection.from,$p,{side:i});return Jo.create(o.doc,[a])},handleKeyDown(o,r){switch(r.key){case"`":return dl(o,t,r,se(o,e),e.attrs);case"ArrowRight":return pl(o,t,r,se(o,e),e.attrs);case"ArrowLeft":return ul(o,t,r,se(o,e),e.attrs);case"Backspace":return ml(o,t,r,se(o,e));case"Delete":return fl(o,t,r,se(o,e));case"ArrowUp":case"ArrowDown":case"Home":case"End":return le(o,t);case"e":case"a":return r.ctrlKey?le(o,t):!1;default:return!1}},handleClick(o){return le(o,t,"click")}}});return t}function gl(e){let t=Xp(e),o=cl(t,e);return[t,o]}var Px=gl;var Ax=e=>(t,o)=>{if(!o)return!1;let r=t.selection,n=r.$from.node(1);if(!z(n)||!dt(n)||r.$to.parentOffset===r.$to.parent.content.size)return!1;let a=n.attrs.tag;return a==="p"||a==="div"?!1:yl(e)(t,o)},zx=e=>(t,o)=>{if(!o)return!1;let n=t.selection.$from.node(1);if(!z(n)||dt(n))return!1;let i=n.attrs.tag;return i==="p"||i==="div"?!1:yl(e)(t,o)},yl=e=>(t,o)=>{if(!o)return!1;let r=e.nodes.lineBreak.create(),n=t.tr.replaceSelectionWith(r).scrollIntoView();return o(n),!0},Gx=e=>(t,o)=>{let r=t.selection;if(r.from!==r.to)return!1;let n=r.$from.node(-1);return!Nn(n)||Rn(r.$from.node(-3))||r.$from.parentOffset!==0||r.$from.index(-1)!==0||r.$from.index(-2)!==0?!1:ji(e.nodes.listItem)(t,o&&(i=>{if(r.$from.depth>3){let a=r.$from.before(-1);i.join(a)}o(i)}))};function Ux(e){return cr(/^([ai]|\d+)\.\s$/iu,e.nodes.numberedList,t=>{let o=t[1];switch(o){case"a":return{listStyleType:"lower-alpha"};case"A":return{listStyleType:"upper-alpha"};case"i":return{listStyleType:"lower-roman"};case"I":return{listStyleType:"upper-roman"};default:return{start:Number(o)}}},(t,o)=>o.childCount+o.attrs.start===Number(t[1]))}function jx(e){return cr(/^\s*([-+*])\s$/u,e.nodes.bulletedList)}function Jx(){return new ee({appendTransaction(e,t,o){let r,n=o.selection.$from.parent;if(t.selection instanceof ie&&e.find(a=>a.steps.find(l=>l instanceof Cn))){let a=t.doc.firstChild,l=z(n)&&!dt(n);if(a&&z(a)&&l){let s=Kp(a);if(r??=o.tr,s){let c=s.marks.find($e);r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c?.attrs.inlineStyles??{}});for(let d of s.marks)r.addMark(0,o.doc.content.size,d),r.addStoredMark(d)}else{let c=a.attrs.inlineStyles;r.setNodeMarkup(0,a.type,{...a.attrs,inlineStyles:c})}}}return r}})}function Kp(e){for(let t=0;t<e.childCount;t++){let o=e.child(t);if(Mn(o))return o}}function rb(e,t){let o=t.getFontsForLoading().filter(i=>!Ho.isSelectorLoaded(i)),r=t.getTextStylePresets(!1).filter(Kr),n=e.getNodesWithTrait(r,rn).filter(i=>!Ho.isSelectorLoaded(i.font)).map(i=>i.font);return o.push(...n),o}var Sl=[ae.youtube,ae.vimeo,ae.codeblock,ae.twitter];async function vl(e,t){let o=fe(t);Et(o)&&await e.stores.modulesStore.addExternalModulesToProject([o],{onTreeUpdate(){}})}var xl=new WeakMap;async function db(e){let{modules:t}=await e.stores.modulesStore.lookUpModules(Sl.map(Pn)),o=[];for(let r=0;r<t.length;r++){let n=t[r];b(n,"Module must exist");let i=Sl[r];b(i,"Module component must exist"),xl.set(i,n),b(n.files.module,"Module must have a module file"),o.push(Vo(n.id,n.saveId,n.files.module,i.exportSpecifier??"default"))}await e.stores.modulesStore.preloadExternalModules(o)}function kt(e,t){let o=xl.get(t);b(o,"Preloaded module must exist");let r=e.getNodeWithTrait(o.id,Ko);return r?r.codeComponentIdentifier:(b(o.files.module,"Module must have a module file"),Vo(o.id,o.saveId,o.files.module,t.exportSpecifier??"default").value)}async function bl(e,t){let{moduleIdentifier:o}=await Xi(e,t);if(o.kind==="externalModuleExport"){let r=e.tree.getNodeWithTrait(o.moduleId,Ko);if(r)return r.codeComponentIdentifier}return o.value}async function ue(e,t,o,r,n={}){await vl(e,r);let i=o.state,a=i.tr;a.replaceRangeWith(i.selection.from,i.selection.to,t.nodes.module.create({identifier:r,props:n}));let l=i.selection.from===0?0:i.selection.from-1;a.setSelection(In.create(a.doc,l)),o.dispatch(a)}async function To(e,t,o,r,n){let i=await bl(e,r);await ue(e,t,o,i,n)}async function No(e,t,o,r,n){qe("collection_record_youtube_add",{source:"cms"});let i=n?{url:{type:"string",value:n}}:void 0;try{let a=kt(e.tree,ae.youtube);await ue(e,t,o,a,i),r?.()}catch(a){B(a)}}async function xb(e,t,o,r,n){let i=n?{url:{type:"string",value:n}}:void 0;try{let a=kt(e.tree,ae.twitter);await ue(e,t,o,a,i),r?.()}catch(a){B(a)}}async function Mo(e,t,o,r,n){qe("collection_record_vimeo_add",{source:"cms"});let i=n?{video:{type:"string",value:n}}:void 0;try{let a=kt(e.tree,ae.vimeo);await ue(e,t,o,a,i),r?.()}catch(a){B(a)}}async function bb(e,t,o,r="",n){let i={code:{type:"string",value:r}};qe("collection_record_codeblock_add",{source:"cms"});try{let a=kt(e.tree,ae.codeblock);await ue(e,t,o,a,i),n?.()}catch(a){B(a)}}function wt(e,t,o,r,n){return r.content.size===0?!1:(e.scheduler.processWhenReady(()=>{let i=t.state,a=i.tr,l=n(r),s=_p(l),c=i.selection.$from.node(1),d=i.selection.$from.before(1),u=!l.content.child(0).isInline,p=i.selection instanceof ie||c?.content.size===0;if(s)a.replaceSelectionWith(s,!0);else if(u&&p){let m=c?d+c.nodeSize:i.selection.to;a.replaceRange(d,m,l)}else a.replaceSelection(l);a.scrollIntoView(),a.setMeta("paste",!0),a.setMeta("uiEvent","paste"),t.dispatch(a)}),!0)}function _p(e){return e.openStart===0&&e.openEnd===0&&e.content.childCount===1?e.content.firstChild:null}var qp=me("prosemirror:addMedia"),Il=[{extension:"mp4",mimeType:"video/mp4"}];function Cl(e){return e=e.toLowerCase(),Il.some(({extension:t})=>e.endsWith(`.${t}`))}function Yp(e){return e.startsWith("video/")}var Tl=[...no],Nl=new Set(io);for(let{extension:e,mimeType:t}of Il)Tl.push(e),Nl.add(t);var Zp="failed-asset-upload-placeholder",Ml="updateAssetReferences";function Fb(e){return e.getMeta(Ml)}function Jp(e){return e.setMeta(Ml,!0)}async function Re(e,t,o,r,{type:n,insertPosition:i,mediaExtractedFromHTML:a}){let l=o.state,s=l.tr,c=new Ze(e,{silent:a}),d=[],u=[],p=[];for(let y of r)if(y instanceof File){let C=Yp(y.type);if(b(!a,"we should not receive files if the media is already in a document"),!Nl.has(y.type))continue;let g=URL.createObjectURL(y);d.push({uploadResultTask:c.createTask(y,x=>x),temporaryURL:g,type:C?"video":"image"}),u.push({src:g,isVideo:C}),p.push(g)}else{let C=Gr(y.src);if(C){u.push({src:y.src,isVideo:Cl(C.originalFilename??C.identifier)});continue}u.push({src:y.src,isVideo:Cl(y.src)}),d.push({uploadResultTask:c.createTask(y.src,g=>g),temporaryURL:y.src,type:y.type})}if(!d.length)return Promise.resolve();if(!a)for(let{src:y,isVideo:C}of u){let g=t.nodes.image.create({src:y,type:C?"video":"image"});i?s.insert(i,g):l.selection.replaceWith(s,g)}s.scrollIntoView(),(n==="drop"||n==="paste")&&(s.setMeta(n,!0),s.setMeta("uiEvent",n)),o.dispatch(s);let m=d.map(y=>y.uploadResultTask());a&&xr(c,m).catch(()=>{});let v=(await Promise.allSettled(m)).map((y,C)=>Qp(y,C,d)),S=[];v.forEach(y=>{if(y.type==="asset")return S.push(y.asset)});let f=new Map;d.forEach((y,C)=>{let g=v[C];b(g,"Asset upload result must be defined"),f.set(y.temporaryURL,g)}),eu(o,f),p.forEach(y=>URL.revokeObjectURL(y))}function Qp(e,t,o){switch(e.status){case"fulfilled":{let{value:r}=e,{asset:n}=r;return r.type==="image"?{type:"asset",asset:n,imageSize:r.imageSize}:{type:"asset",asset:n}}case"rejected":{let r=o[t];return b(r,"Upload must be defined"),qp.reportError(new Error(e.reason)),{type:"failed upload"}}}}async function Bb(e,t,o,r){let n=await Hs.pickFile({allowedFileTypes:Tl});if(!n)return;let i=n[0];return Re(e,t,o,[i],r)}function eu(e,t){let o=e.state,r=o.tr;o.doc.descendants((n,i)=>{if(!Xe(n))return;let a=t.get(n.attrs.src);if(a===void 0)return;let l={...n.attrs};if(a.type==="failed upload")l.src=Zp;else if(a.imageSize){l.src=zr({identifier:Go(a.asset),intrinsicSize:{width:a.imageSize.naturalWidth,height:a.imageSize.naturalHeight}});let s=Gi(a.imageSize);l.pixelWidth=s.nonZeroNaturalWidth,l.pixelHeight=s.nonZeroNaturalHeight}else l.src=Ar(Go(a.asset));r.setNodeMarkup(i,n.type,l),Jp(r)}),e.dispatch(r)}function Ro(e){let t=e.querySelector("b[id^='docs-internal-guid']")??e.querySelector("*[id^='docs-internal-guid']")?.parentElement;if(t)for(let o=t.children.length-1;o>=0;o--){let r=t.children[o];if(r){for(r instanceof HTMLParagraphElement&&!re.isOn("pasteMarkdown")&&tu(r),r instanceof HTMLDivElement&&ou(r);Rl(r.firstChild);)r.removeChild(r.firstChild);for(;Rl(r.lastChild);)r.removeChild(r.lastChild);(r.tagName==="BR"||r.childNodes.length===0)&&r.remove()}}}function Rl(e){return e instanceof Element&&e.textContent===""&&e.querySelectorAll("img").length===0}function tu(e){if(e.textContent!=="")return;let t=e.querySelectorAll("img");t.length!==0&&e.replaceWith(...t)}function ou(e){let t=e.querySelector("table");t===null||t.querySelectorAll("tr").length===0||t.querySelectorAll("th, td").length===0||e.replaceWith(t)}var ko=class extends Ue{constructor(o,r,n){let i=Ue.nodesFromSchema(r),a=Ue.marksFromSchema(r),l={},s={};for(let[c,d]of Object.entries(i))l[c]=(...u)=>d(...u,o);for(let[c,d]of Object.entries(a))s[c]=(...u)=>d(...u,o);super(l,s);this.onAfterSerializeFragment=n}serializeFragment(o,r,n=document.createDocumentFragment()){return super.serializeFragment(o,r,n),this.onAfterSerializeFragment?.(n),n}};var ru=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,nu=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function kl({engine:e,schema:t,stylePresetGetters:o,supportedTags:r,saveChanges:n}){return new ee({props:{clipboardSerializer:new ko(e,t,o?su:void 0),transformPastedHTML(i){let a=ao(i);return Ro(a),a.innerHTML},handlePaste(i,a,l){let s=a.clipboardData?.getData("text/plain"),c=a.clipboardData?.getData("text/html");if(Qo(t)){let{clipboardData:d}=a;if(d&&d.files.length>0)return Re(e,t,i,d.files,{type:"paste"}).finally(n),!0}if(oe(s)){let u=["http:","https:","mailto:","www."].some(m=>s.startsWith(m)),p=i.state.selection;if(u&&p.from!==p.to&&Fn(t)){let m=Zo(s,e)??Gt({url:s}),h=i.state.tr;return h.addMark(p.from,p.to,t.marks.link.create({link:m,openInNewTab:so(m),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),i.dispatch(h),!0}if(er(t)&&re.isOn("cmsPasteModules")){let m=fe(s);if(Ee(m))return ue(e,t,i,m.value).catch(B),!0;if(ro(s))return To(e,t,i,s).catch(B),!0}if(er(t)){if(nu.test(s))return No(e,t,i,n,s).catch(B),!0;if(ru.test(s))return Mo(e,t,i,n,s).catch(B),!0}}return wt(e,i,a,l,d=>{if(o&&c&&au(c))return d;let u=Ki(s);s&&u&&!c&&(d=_i(s,t));let p=t.nodes.document.create(void 0),m=new je(p);m.insert(0,d.content);let h=new Map,v=[];if(m.doc.descendants((f,y)=>{if(z(f)){let C=f.attrs.tag,g=r?.has(C)??!0,x=_e(C)&&g?C:"p";m.setNodeMarkup(y,t.nodes.textBlock,{...f.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:x})}Xe(f)&&v.push({src:f.attrs.src,type:f.attrs.type});for(let C of f.marks){if(!mt(C)||!Xr(C.attrs.link))continue;let g=C.attrs.link.url,x;h.has(g)?x=h.get(g):(x=Zo(g,e),h.set(g,x)),x&&m.addMark(y,y+f.nodeSize,C.type.create({...C.attrs,link:x}))}}),v.length&&Qo(t)&&Re(e,t,i,v,{type:"paste",mediaExtractedFromHTML:!0}).finally(n),Bn(t)&&o){let y=i.state.selection,g=y.$from.parent,x=g.textContent,T=z(g)&&x.length>0,P=y instanceof ie,w=!c&&s&&s.length>0&&!u;!T&&!w&&!P?lu(e,t,o.getStylePresetForTag,o.getStylePresetForLink,m):cu(i,t,m)}let S=d.content.child(0).isInline?m.doc.content.child(0).content:m.doc.content;return new We(S,d.openStart,d.openEnd)})}}})}var wl="framer-match-formatting",iu=document.createComment(wl);function au(e){return e.endsWith(`<!--${wl}-->`)}function su(e){e.appendChild(iu)}function lu(e,t,o,r,n){n.doc.descendants((i,a)=>{if(z(i)){let l=i.attrs,s=oe(l.textStylePreset)?e.tree.getNodeWithTrait(l.textStylePreset,Me):void 0,c=_e(l.tag)?l.tag:"p",d=s??o(c)??uo(e.tree,c)??to.createDefault(c);mo(e,d),n.setNodeMarkup(a,t.nodes.textBlock,{...i.attrs,blockStyles:s?i.attrs.blockStyles:{},inlineStyles:s?i.attrs.inlineStyles:{},textStylePreset:d.id}),s||n.removeMark(a,i.nodeSize,t.marks.inlineStyles)}if(i.type===t.nodes.text){let l=i.marks.find(mt);if(l){let s=r()??co(e.tree)??lo.createDefault();po(e,s),n.addMark(a,a+i.nodeSize,l.type.create({...l.attrs,linkStylePreset:s.id}))}}})}function cu(e,t,o){let r=e.state,n=r.selection;if(n instanceof ie){let c=r.doc.resolve(1);n=new Y(c)}let i=n.$from.parent,a=z(i),s=n.$from.marks().find($e);if(s)o.addMark(0,o.doc.content.size,s);else if(a){let c=t.marks.inlineStyles.create({inlineStyles:i.attrs.inlineStyles});o.addMark(0,o.doc.content.size,c)}else o.removeMark(0,o.doc.content.size,t.marks.inlineStyles);o.doc.descendants((c,d)=>{if(!z(c))return;let u=a?i.attrs:c.attrs;o.setNodeMarkup(d,t.nodes.textBlock,u)})}var Pl="framer-rich-text",du=/^https?:\/\/(?:www\.)?vimeo\.com\/\d+/u,pu=/^https?:\/\/(?:www\.)?youtu(?:\.be|be\.com)/u;function Dl(e,t){return new ee({props:{handlePaste(o,r,n){let i=r.clipboardData?.getData("text/plain"),a=r.clipboardData?.getData("text/html");return i===""&&a===""?!0:wt(e,o,r,n,l=>{let s=!a&&i&&i.length>0;if(a?.endsWith(`<!--${Pl}-->`))return l;let u=o.state.selection,m=u.$from.parent,h=m.textContent,v=z(m)&&h.length>0,S=u instanceof ie;return!v&&!s&&!S?mu(e,t,l):hu(o,l)})},clipboardSerializer:new Rr(O)}})}function zC(e,t,o,r,n,i){return new ee({props:{transformPastedHTML(a){let l=ao(a);return Ro(l),l.innerHTML},handlePaste(a,l,s){if(t){let{clipboardData:d}=l;if(d&&d.files.length>0)return Re(e,O,a,d.files,{type:"paste"}).finally(i),!0}let c=l.clipboardData?.getData("text/plain");if(oe(c)){let u=["http:","https:","mailto:","www."].some(m=>c.startsWith(m)),p=a.state.selection;if(u&&p.from!==p.to&&r){let m=Gt({url:c}),h=a.state.tr;return h.addMark(p.from,p.to,O.marks.link.create({link:m,openInNewTab:so(m),smoothScroll:!1,clickTrackingId:void 0,linkStylePreset:void 0,relValues:void 0,preserveParams:!1})),a.dispatch(h),!0}if(o&&re.isOn("cmsPasteModules")){let m=fe(c);if(Ee(m))return ue(e,O,a,m.value).catch(B),!0;if(ro(c))return To(e,O,a,c).catch(B),!0}if(o){if(pu.test(c))return No(e,O,a,i,c).catch(B),!0;if(du.test(c))return Mo(e,O,a,i,c).catch(B),!0}}return wt(e,a,l,s,d=>{let u=O.nodes.document.create(void 0),p=new je(u);p.insert(0,d.content);let m=[];p.doc.descendants((v,S)=>{if(z(v)){let f=v.attrs.tag,y=n?.has(f)??!0,C=_e(f)&&y?f:"p";p.setNodeMarkup(S,O.nodes.textBlock,{...v.attrs,blockStyles:{},inlineStyles:{},textStylePreset:void 0,tag:C})}Xe(v)&&m.push({src:v.attrs.src,type:v.attrs.type})}),m.length&&Re(e,O,a,m,{type:"paste",mediaExtractedFromHTML:!0}).finally(i),p.removeMark(0,p.doc.content.size,O.marks.inlineStyles),r||p.removeMark(0,p.doc.content.size,O.marks.link);let h=d.content.child(0).isInline?p.doc.content.child(0).content:p.doc.content;return new We(h,d.openStart,d.openEnd)})}}})}var uu=document.createComment(Pl),Rr=class{constructor(t){I(this,"domSerializer");I(this,"nodes");I(this,"marks");this.domSerializer=Ue.fromSchema(t),this.nodes=this.domSerializer.nodes,this.marks=this.domSerializer.marks}serializeNode(t,o){return this.domSerializer.serializeNode(t,o)}serializeFragment(t,o){let r=this.domSerializer.serializeFragment(t,o);return r.appendChild(uu),r}};function mu(e,t,o){let r=O.nodes.document.create(void 0),n=new je(r);n.insert(0,o.content);let i=e.tree.getNodeWithTrait(t,en);b(i,"RichTextNode for pasting not found");let a=fu(e.tree,i);n.doc.descendants((s,c)=>{if(z(s)){let d=s.attrs,u=oe(d.textStylePreset)?e.tree.getNodeWithTrait(d.textStylePreset,Me):void 0,p=_e(d.tag)?d.tag:"p",m=u??a[p]??i.getNodeTextStylePreset(e.tree,p)??uo(e.tree,p)??to.createDefault(p);mo(e,m),n.setNodeMarkup(c,O.nodes.textBlock,{...s.attrs,blockStyles:u?s.attrs.blockStyles:{},inlineStyles:u?s.attrs.inlineStyles:{},textStylePreset:m.id}),u||n.removeMark(c,s.nodeSize,O.marks.inlineStyles)}if(s.type===O.nodes.text){let d=s.marks.find(mt);if(d){let u=i.getNodeLinkStylePreset(e.tree)??co(e.tree)??lo.createDefault();po(e,u),n.addMark(c,c+s.nodeSize,O.marks.link.create({...d.attrs,linkStylePreset:u.id}))}}});let l=o.content.child(0).isInline?n.doc.content.child(0).content:n.doc.content;return new We(l,o.openStart,o.openEnd)}function fu(e,t){let o={};for(let r of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(r,Me);n&&(o[n.tag]??=n)}return o}function hu(e,t){let o=e.state,r=o.selection;if(r instanceof ie){let u=o.doc.resolve(1);r=new Y(u)}let n=O.nodes.document.create(void 0),i=new je(n);i.insert(0,t.content);let a=r.$from.parent,l=z(a),c=r.$from.marks().find($e);if(c)i.addMark(0,i.doc.content.size,c);else if(l){let u=O.marks.inlineStyles.create({inlineStyles:a.attrs.inlineStyles});i.addMark(0,i.doc.content.size,u)}else i.removeMark(0,i.doc.content.size,O.marks.inlineStyles);i.doc.descendants((u,p)=>{if(!z(u))return;let m=l?a.attrs:u.attrs;i.setNodeMarkup(p,O.nodes.textBlock,m)});let d=t.content.child(0).isInline?i.doc.content.child(0).content:i.doc.content;return new We(d,t.openStart,t.openEnd)}function XC({engine:e,schema:t,nodeId:o,getRichTextNode:r}){return re.isOn("pasteMarkdown")?kl({engine:e,schema:t,stylePresetGetters:{getStylePresetForTag:n=>{let i=r();if(i)return gu(e.tree,i,n)??i.getNodeTextStylePreset(e.tree,n)??void 0},getStylePresetForLink:()=>r()?.getNodeLinkStylePreset(e.tree)??void 0}}):Dl(e,o)}function gu(e,t,o){for(let r of t.getTextStylePresets(!1)){let n=e.getNodeWithTrait(r,Me);if(n&&n.tag===o)return n}}var yu=["RGB","HSL","HEX","P3"];function _C(e){return yu.some(t=>t===e)}function ZC(e,t){let o=new Set,r=new Set;for(let n of t){if(r.has(n))continue;let i=e.get(n);if(i){if(or(i)){o.add(n);continue}for(let a of i.ancestors())if(!r.has(a.id)&&(r.add(a.id),a.cache.reset(),!!or(a))){o.add(a.id);break}}}return o}function Su(e){let t=Uo.isP3String(e)?Wr.fromString(e):Uo(e);if(t)return t.r*.299+t.g*.587+t.b*.114+(1-t.a)*255}function tI(e){let t=Su(e);if(W(t))return t>128?"light":"dark"}var Gu={};Ql(Gu,{amethyst:()=>xu,aquaBlue:()=>bu,atomDark:()=>Cu,atomLight:()=>Iu,ayuDark:()=>Tu,ayuLight:()=>Nu,cmsTheme:()=>vu,cobalt2:()=>Mu,cyberpunk:()=>Ru,dracula:()=>ku,framerDark:()=>Pt,framerLight:()=>wu,freeCodeCamp:()=>Pu,githubDark:()=>Du,githubLight:()=>Fu,levelUp:()=>Bu,magic:()=>Ou,monokaiPro:()=>Eu,neoCyan:()=>Lu,nightOwl:()=>Vu,sandpackDark:()=>Au,sandpackLight:()=>zu});var vu={colors:{surface1:X.cmsCodeBlockSurface1,surface3:X.cmsCodeBlockSurface3,disabled:X.cmsCodeBlockDisabled,accent:X.cmsCodeBlockAccent,errorSurface:X.cmsCodeBlockErrorSurface},syntax:{plain:X.cmsCodeBlockPlain,comment:X.cmsCodeBlockComment,keyword:X.cmsCodeBlockKeyword,tag:X.cmsCodeBlockTag,punctuation:X.cmsCodeBlockPunctuation,definition:X.cmsCodeBlockDefinition,property:X.cmsCodeBlockProperty,static:X.cmsCodeBlockStatic,string:X.cmsCodeBlockString},font:{mono:Pi.family.monospace,lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},xu={colors:{surface1:"#000000",surface3:"#3b3b4f",disabled:"#858591",accent:"#a26cd6",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#a26cdd",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#57d1b7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},bu={colors:{surface1:"#f8f9fb",surface3:"#e4e7eb",disabled:"#C5C5C5",accent:"#2e7692"},syntax:{plain:"#1F2933",comment:"#A7B6C2",keyword:"#1A56DB",tag:"#1A56DB",punctuation:"#394b59",definition:"#A23DAD",property:"#2e7692",static:"#1A56DB",string:"#1992D4"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Cu={colors:{surface1:"#282c34",surface3:"#2c313c",disabled:"#4d4d4d",accent:"#c678dd",errorSurface:"#ffeceb"},syntax:{plain:"#a8b1c2",comment:"#757575",keyword:"#c678dd",tag:"#e06c75",punctuation:"#a8b1c2",definition:"#62aeef",property:"#d19a66",static:"#a8b1c2",string:"#98c379"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Iu={colors:{surface1:"#fafafa"},syntax:{plain:"#383a42",comment:"#a0a1a7",keyword:"#a626a4",tag:"#e45649",punctuation:"#383a42",definition:"#c18401",property:"#4078f2",static:"#986801",string:"#50a14f"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Tu={colors:{surface1:"#0c1017"},syntax:{comment:"#646a72",definition:"#5ac2ff",keyword:"#ff9040",plain:"#bfbdb6",property:"#ffb454",punctuation:"#bfbdb6",static:"#d2a6ff",string:"#80d962",tag:"#3bbae7"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Nu={colors:{surface1:"#fafafa"},syntax:{comment:"#aaaeb1",definition:"#3b9ee6",keyword:"#fa8e3e",plain:"#5c6166",property:"#f2ae49",punctuation:"#5c6167",static:"#a37acc",string:"#87b300",tag:"#56b4d5"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Mu={colors:{surface1:"#193549",surface3:"#1f4662",disabled:"#C5C5C5",accent:"#ffc600",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:"#0088ff",keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Ru={colors:{surface1:"#051c30",surface3:"#042f40",disabled:"#C5C5C5",accent:"#fdf500",errorSurface:"#051c30"},syntax:{plain:"#ffffff",comment:"#1ac5b0",keyword:"#fdf500",tag:"#ffc600",punctuation:"#afd7fa",definition:"#ffc600",property:"#fdf500",static:"#e455ae",string:"#37ebf3"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},ku={colors:{surface1:"#282a36",surface3:"#44475a",disabled:"#6272a4",accent:"#bd93f9",errorSurface:"#44475a"},syntax:{plain:"#f8f8f2",comment:"#6272a4",keyword:"#ff79c6",tag:"#ff79c6",punctuation:"#ff79c6",definition:"#f8f8f2",property:"#50fa7b",static:"#bd93f9",string:"#f1fa8c"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Pt={colors:{surface1:"#161820",surface3:"#2f2f2f",disabled:"#4d4d4d",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#eeeeee",comment:"#666666",keyword:"#00BBFF",tag:"#00BBFF",punctuation:"#999999",definition:"#ffcc66",property:"#77dddd",static:"#ff8866",string:"#bb88ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},wu={colors:{surface1:"#fafafa",surface3:"#f3f3f3",disabled:"#c5c5c5",accent:"#0099ff",errorSurface:"#ffe0e8"},syntax:{plain:"#666666",comment:"#bbbbbb",keyword:"#0099ff",tag:"#0099ff",punctuation:"#bbbbbb",definition:"#FFAA00",property:"#33cccc",static:"#ff8866",string:"#8855ff"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Pu={colors:{surface1:"#2a2a40",surface3:"#3b3b4f",disabled:"#858591",accent:"#dbb8ff",errorSurface:"#3b3b4f"},syntax:{plain:"#ffffff",comment:"#858591",keyword:"#dbb8ff",tag:"#f07178",punctuation:"#99c9ff",definition:"#ffffff",property:"#99c9ff",static:"#f78c6c",string:"#acd157"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Du={colors:{surface1:"#0d1117",surface3:Pt.colors?.surface3,disabled:Pt.colors?.disabled,accent:Pt.colors?.accent,errorSurface:Pt.colors?.errorSurface},syntax:{comment:"#8b949e",definition:"#d2a8ff",keyword:"#ff7b72",plain:"#e6edf3",property:"#79c0ff",punctuation:"#e6edf3",static:"#7ee787",string:"#a5d6ff",tag:"#7ee787"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Fu={colors:{surface1:"#ffffff",surface3:"#f5f5f5",disabled:"#d1d4d8",accent:"#24292e"},syntax:{keyword:"#d73a49",property:"#005cc5",plain:"#24292e",static:"#032f62",string:"#032f62",definition:"#6f42c1",punctuation:"#24292e",tag:"#22863a",comment:"#6a737d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"normal",property:"normal",keyword:"normal"}},Bu={colors:{surface1:"#191324",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Eu={colors:{surface1:"#2D2A2E",surface3:"#484747",disabled:"#444344",accent:"#FFD866",errorSurface:"#c24038"},syntax:{plain:"rgb(252, 252, 250)",comment:"#757575",keyword:"rgb(255, 97, 136)",tag:"rgb(120, 220, 232)",punctuation:"rgb(147, 146, 147)",definition:"rgb(169, 220, 118)",property:"rgb(120, 220, 232)",static:"rgb(171, 157, 242)",string:"rgb(255, 216, 102)"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"normal"}},Ou={colors:{surface1:"#f6f6f8",surface3:"#f6f6f8",disabled:"#C5C5C5",accent:"#ffa600",errorSurface:"#ffeceb"},syntax:{plain:"#151515",comment:"#cacacd",keyword:"#ffa600",tag:"#ff9a4d",punctuation:"#ffb3b3",definition:"#ff6f00",property:"#9900ff",static:"#FF453A",string:"#f53524"},font:{mono:'"Roboto Mono", monospace',lineHeight:"24px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Lu={colors:{surface1:"#2b3935",surface3:"#524763",disabled:"#aaaaaa",accent:"#82d8d8",errorSurface:"#191324"},syntax:{plain:"#ffffff",comment:"#82d8d8",keyword:"#e54b4b",tag:"#ff26be",punctuation:"#9588aa",definition:"#82d8d8",property:"#82d8d8",static:"#82d8d8",string:"#a8fe39"},font:{mono:'"MonoLisa", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"18px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},Vu={colors:{surface1:"#011627",surface3:"#112331",disabled:"#4D4D4D",accent:"#c5e4fd",errorSurface:"#811e18"},syntax:{plain:"#d6deeb",comment:"#999999",keyword:"#c792ea",tag:"#7fdbca",punctuation:"#7fdbca",definition:"#82aaff",property:"#addb67",static:"#f78c6c",string:"#ecc48d"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"italic",keyword:"italic"}},Au={colors:{surface1:"#151515",surface3:"#2F2F2F",disabled:"#4D4D4D",accent:"#90e86f",errorSurface:"#b08df8"},syntax:{plain:"#f0fdaf",comment:"#757575",keyword:"#e5fd78",tag:"#f0fdaf",punctuation:"#ffffff",definition:"#eeeeee",property:"#90e86f",static:"#ffffff",string:"#dafecf"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}},zu={colors:{surface1:"#ffffff",surface3:"#F3F3F3",disabled:"#C5C5C5",accent:"#3973E0",errorSurface:"#FCF1F0"},syntax:{plain:"#151515",comment:"#999",keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',lineHeight:"20px"},fontStyle:{comment:"italic",property:"normal",keyword:"normal"}};async function aI(e){let t=mr.on(Er).expect();return new Promise(o=>{pt(e)&&e.stores.canvasStore.setColorSamplerActive(!0),e.scheduler.runBeforeNextFrame(async()=>{let{color:r}=await t.sampleColor();e.scheduler.process(()=>{pt(e)&&e.stores.canvasStore.setColorSamplerActive(!1),o(r)})})})}function Fl(){return zi.isOn("disableSecureCanvas")}var Hu,Wu,Uu=new Promise((e,t)=>{Hu=e,Wu=t});function fI(e){if(pt(e)){if(e.canvasSandbox?.sandbox.controlsVisibility)return Promise.resolve(e.canvasSandbox.sandbox.controlsVisibility);if(Fl())return Promise.resolve(new Wi(e))}return wi(e)?e.stores.sandboxStore.getControlsVisibility():Uu}function RI(e,t,o){return Zn(o)?Ku(e,t,o):Jn(o)?Xu(e,t,o):Yn(o)?_u(e,t,o):null}function ju(e,t){return R(t*Math.sin(Wo(e)),t*Math.cos(Wo(e))*-1)}function $u(e,t){if(e.type==="conic"){let{angle:o,radius:r}=e;return t.map(n=>{let i=o+n.position*360;return ju(i,r)})}return t.map(o=>F.pointAtPercentDistance(e.axis,o.position))}function Xu(e,t,o){let r=e.getRect(t),n=o.centerAnchorX*r.width,i=o.centerAnchorY*r.height,a=o.widthFactor*r.width,l=o.heightFactor*r.height,s=a*2,c=l*2,d=a+n,u=i-l,p={width:s,height:c},m=e.convertPointToCanvas(t,{x:n,y:i}),h=e.convertPointToCanvas(t,{x:d,y:i}),v=e.convertPointToCanvas(t,{x:n,y:u}),{rotation:S}=e.convertRectToCanvasWithRotation(t),f=F(m,h);return{type:"radial",start:m,end:h,center:F.pointAtPercentDistance(f,0),axis:f,rotation:S,size:p,topCenter:v}}function Ku(e,t,o){let r=e.getRect(t),n={x:r.width/2,y:r.height/2},i=e.convertPointToCanvas(t,n),a=o.angle*Math.PI/180,l={x:-Math.sin(a)*100,y:Math.cos(a)*100},s=e.convertPointToCanvas(t,R.add(n,l)),c=F(i,s),d=wo(o.angle),u=N.pointsAtOrigin(r),p=Math.floor(d/90)+3,m=u[p%4],h=e.convertPointToCanvas(t,m),v=u[(p+2)%4],S=e.convertPointToCanvas(t,v),f=F.perpendicular(c,h),y=F.intersection(f,c);if(!y)return null;let C=R.subtract(i,y),g=R.add(y,C,C),x=u[(p+1)%4],T=e.convertPointToCanvas(t,x),P=F.perpendicular(f,T),M=F.perpendicular(c,i),w=F.intersection(P,M);if(!w)return null;let U={width:R.distance(w,i)*2,height:R.distance(y,g)};return{type:"linear",start:y,end:g,center:i,axis:F(y,g),startCorner:h,endCorner:S,size:U}}function _u(e,t,o){let r=e.getRect(t),n=e.convertPointToCanvas(t,{x:r.width/2*o.centerAnchorX/.5,y:r.height/2*o.centerAnchorY/.5}),[i,a]=N.midPoints(r),l=N.center(r),s=R.distance(l,i),c=R.distance(l,a),d=Math.min(s,c),u=e.totalAncestorRotation(t),p=wo(u+o.angle);return{type:"conic",start:R(l.x,l.y-d),center:n,rotation:0,radius:d,angle:p}}var kI=(e,t,o,r)=>{let n=$u(e,t),i=n[0],a=n[n.length-1];if(i.x===a.x&&i.y===a.y&&R.distance(o,i)<r)return!0;let l=F(i,a),s=F.perpendicular(l,o),c=F.intersection(l,s);if(e.type==="radial"&&R.distance(o,e.topCenter)<r)return!0;if(e.type==="conic")return R.distance(o,e.center)<=e.radius+40;if(!c)return!1;let d=R.distance(o,c),u=R.distance(o,i),p=R.distance(o,a),m=R.distance(i,a);return u>m&&p<u?Math.max(p,d)<r:p>m&&u<p?Math.max(u,d)<r:d<r};function qu(e,t){let o=e.reduce((a,l)=>Math.abs(a.position-t)<Math.abs(l.position-t)?a:l),r=e.findIndex(a=>a===o),n=o.position-t>0?r-1:r+1,i=e[n]??o;return[o,i]}function wI(e,t,o,r){let[n,i]=qu(t,o),a=Lt([n.position,i.position],[0,1])(o),l=kr(e,n,r),s=kr(e,i,r);return Lt([0,1],[l,s])(a)}function kr(e,t,o){let r=t.value;if(!pn(r))return r;let n=cn(r),i=n?Mi(n,e):null;return i&&on(i)?i.colorForMode(o):dn(r)||"transparent"}function PI(e,t,o){return t.map(r=>r.merge({value:kr(e,r,o)}))}function DI(e,t){let o=F(t,e.center),r=e.center.x,n=e.center.y-e.radius,i=F(R(r,n),e.center),a=F.intersectionAngle(i,o),s=wo(a)-e.angle,c=wo(s);return Math.abs(c/360)}function wo(e){if(e===360)return e;let t=e%360;return t<0?360+t:t}function FI(e){return e.sort((t,o)=>t.position-o.position)}function BI(e){let t=!1,o=Lt([e.stops[0]?.position??0,e.stops[e.stops.length-1]?.position??1],[0,1]),r=e.stops.map(n=>((n.position<0||n.position>1)&&(t=!0),n.merge({position:o(n.position)})));return t?r:void 0}var Bl="--top-flash-inset",El="--right-flash-inset",Ol="--bottom-flash-inset",Ll="--left-flash-inset",Vl="--flash-radius",wr="flash_fh6lfgu",Pr="defaultStyle_d8eehx6",Al="warningStyle_wdvaq7i",zl="glowStyle_ghqxg7a";var Ft=2;function Gl(e="default"){switch(e){case"glow":return[zl];case"default":return[Pr];case"warning":return[Pr,Al]}}function Dt(e,t,o){e.style.setProperty(t,`${o??0}px`)}function Hl(e,t){Dt(e,Bl,t?.inset?.top),Dt(e,El,t?.inset?.right),Dt(e,Ol,t?.inset?.bottom),Dt(e,Ll,t?.inset?.left),t?.radius&&Dt(e,Vl,t.radius),e.addEventListener("animationend",function o(){e.classList.remove(wr),e.classList.remove(...Gl(t?.style)),e.removeEventListener("animationend",o)}),e.classList.add(wr),e.classList.add(...Gl(t?.style))}function Wl(e){Hl(e,{style:"default",inset:{top:Ft,right:-(sr.panelPadding-Ft),left:-(sr.panelPadding-Ft),bottom:Ft}})}function Ul({id:e,flash:t}){let o=document.getElementById(e);o instanceof HTMLDivElement&&(nl(o,{scrollMode:"if-needed",block:"start"}),t&&Wl(o))}function jl(e){let t=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:document.defaultView,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(t)}var $l="breadcrumb-collection";function Zu(e,t,o){let r=e.tree.getNode(o);if(!r)return null;if(!yi(r))return{variableProvider:r,variableId:t};let n=e.tree.getNodeWithTrait(r.dataRepeaterArray.providerId,mn);return n?{variableProvider:n,variableId:r.dataRepeaterArray.id}:null}function yT(e,t,o){let{chromeStore:r,modalStore:n,variablesStore:i,contentManagementStore:a,scopeStore:l,codeEditorStore:s,selectionStore:c}=e.stores;if(o===zn){r.setLocalizationsVisible(!0);return}let d=Zu(e,t,o);if(!d)return;let{variableProvider:u,variableId:p}=d;if(un(u))i.selectedVariableId=p,n.set({type:"Variables",source:"variableReference"});else if(J(u)||Jr(u)){let{dataIdentifier:m}=u;if(!m)return;if(Et(m)){if(r.isViewOnly)return;n.set({type:"Confirmation",title:"External Collection",description:`This is an external ${"Collection".toLowerCase()} preview. To edit, choose a collection to swap in or create a local copy of this collection.`,confirmLabel:"View Options",source:"edit_action",onConfirm:()=>{r.chromeIsVisible=!0,Wt(u)?(c.set(u.id),e.scheduler.runAtEndOfFrame(()=>Ul({id:"data-repeater-panel",flash:!0}))):J(u)?e.scheduler.runAtEndOfFrame(()=>{let S=document.getElementById($l);S&&jl(S)}):void 0}});return}let h=ut(e.tree,m);if(h){J(u)&&b(u.isLoaded(),"Web page node should be loaded");let S=Ju({collectionNode:h,engine:e,variableId:p,variableProvider:u});S?(a.pushExistingItemToOverlayStack(S.collectionItemNode.id),a.setCollectionItemControlToHighlight(S.variableId)):(l.select(Hn,{keepHistory:!1}),c.set(h),a.setCollectionItemControlToHighlight(p));return}let v=$i(j,m);v&&s.editFile(v.file)}}function Ju({collectionNode:e,engine:t,variableId:o,variableProvider:r}){let n=Xl({engine:t,variableProvider:r});if(n)return n;let i=o.split(".");b(i.length>=0,"VariableID must not be empty");let a=vt(r,t.stores.treeStore.sandboxCollectionData),l=t.tree.getNodeWithTrait(a,st);if(l)return Yt(t.tree,t.stores.treeStore.sandboxCollectionData,o,l,e)}function Xl({engine:e,variableProvider:t}){if(!mi(t))return;let[o,...r]=t.collectionFilters?.filters.flatMap(s=>s?.itemKey!=="id"?[]:s.transforms).flatMap(s=>Qu(s)??[])??[];if(!o?.providerId||r.length>0)return;let n=e.tree.getNode(o.providerId);if(!n||!(jt(n)||J(n))||!n.dataIdentifier)return;let i=ut(e.tree,n.dataIdentifier);if(!i)return;let a=vt(n,e.stores.treeStore.sandboxCollectionData),l=e.tree.get(a);if(st(l))return l?{collectionItemNode:l,collectionNode:i,variableId:o.id}:Xl({engine:e,variableProvider:n})}function Qu(e){if(!(e.name!=="equals"&&e.name!=="isIncludedIn"||!$r(e.value)||!e.value.providerId))return e.value}var vT="My website";var xT="My description",bT="yoursite.url";export{mr as a,yo as b,aa as c,xt as d,oc as e,nc as f,da as g,ua as h,Q as i,Xh as j,Kh as k,_h as l,qh as m,Yh as n,Zh as o,Jh as p,Qh as q,eg as r,tg as s,og as t,fs as u,rg as v,gd as w,ng as x,gr as y,yr as z,xs as A,bs as B,vo as C,Is as D,Ty as E,Sr as F,jd as G,Zd as H,Oy as I,Ly as J,aI as K,Fl as L,Hu as M,Wu as N,fI as O,Lv as P,Nt as Q,Mt as R,Qv as S,dx as T,nl as U,Px as V,Ax as W,zx as X,yl as Y,Gx as Z,Ux as _,jx as $,ky as aa,wy as ba,Py as ca,Jx as da,rb as ea,vl as fa,db as ga,kt as ha,No as ia,xb as ja,bb as ka,Rs as la,Ns as ma,As as na,Hs as oa,nS as pa,Zp as qa,Fb as ra,Jp as sa,Re as ta,Bb as ua,kl as va,zC as wa,XC as xa,RI as ya,ju as za,$u as Aa,kI as Ba,wI as Ca,kr as Da,PI as Ea,DI as Fa,FI as Ga,BI as Ha,Ws as Ia,Ft as Ja,Hl as Ka,Ul as La,$l as Ma,yT as Na,yu as Oa,_C as Pa,ZC as Qa,js as Ra,$s as Sa,Xs as Ta,Qe as Ua,qs as Va,Ys as Wa,Zs as Xa,bp as Ya,lv as Za,tI as _a,vT as $a,xT as ab,bT as bb,uv as cb,Js as db,Qs as eb,vu as fb,Du as gb,Fu as hb,Gu as ib};
//# sourceMappingURL=https://app.framerstatic.com/chunk-XVVVSYAN.mjs.map
