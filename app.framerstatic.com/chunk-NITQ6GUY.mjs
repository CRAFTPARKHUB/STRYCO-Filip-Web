import{a as m}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{j as p}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var k=class{constructor(e,t){this.name=e;this.mode=t}},R=class{constructor(){p(this,"heldLocks",new Set);p(this,"lockRequestQueueMap",new Map)}isLocked(e){return this.heldLocks.has(e)}request(e,t,o){let{options:r,callback:i}=this.getOptionsAndCallback(t,o),n="exclusive",c=f(),l={name:e,mode:n,promise:c,callback:i},d=this.ensureRequestQueue(e);if(r.signal){if(r.signal.aborted)return Promise.reject(g());r.signal.addEventListener("abort",()=>{let b=d.indexOf(l);if(b===-1)return;let[h]=d.splice(b,1);h.promise.reject(g())})}return d.push(l),this.processRequestQueue(e),c}processRequestQueue(e){let t=this.ensureRequestQueue(e);if(t.length===0||this.heldLocks.has(e))return;let o=t.shift();m(o);let r=new k(e,o.mode);Promise.resolve().then(()=>o.callback(r)).then(n=>{o.promise.resolve(n)},n=>{o.promise.reject(n)}).finally(()=>{this.heldLocks.delete(e),this.processRequestQueue(e)}),this.heldLocks.add(e)}ensureRequestQueue(e){let t=this.lockRequestQueueMap.get(e);if(t)return t;let o=[];return this.lockRequestQueueMap.set(e,o),o}getOptionsAndCallback(e,t){if(typeof e=="object"){if(!t)throw new TypeError("callback must not be undefined");return{options:e,callback:t}}else return{options:{mode:"exclusive"},callback:e}}};function f(){let s,e,t=new Promise((o,r)=>{s=o,e=r});return t.resolve=s,t.reject=e,t}function g(){let s=new Error("Failed to execute 'request' on 'LockManager': The request was aborted.");return s.name="AbortError",s}var L=new R,a={};function P(s,e,t){let o=a[s];o&&o.abort();let r=new AbortController;return a[s]=r,L.request(s,{signal:r.signal},async()=>{let i=new Promise((n,c)=>{let l=setTimeout(n,e);r.signal.addEventListener("abort",()=>{clearTimeout(l),c()},{once:!0})});try{await i}catch{return}await t(r.signal),a[s]===r&&delete a[s]})}var u=/(?:\.[^.]+)?$/u;function x(s){let e=q(s),t=e.replace(u,".js"),o=e.endsWith(".js")?e.replace(u,".source.js"):e.match(/\.tsx?$/u)?e:e.replace(u,".tsx"),r=e.replace(u,".map");return{module:t,source:o,sourceMap:r}}function q(s){return s.substring(s.lastIndexOf("/")+1)}export{L as a,P as b,x as c};
//# sourceMappingURL=https://app.framerstatic.com/chunk-NITQ6GUY.mjs.map
