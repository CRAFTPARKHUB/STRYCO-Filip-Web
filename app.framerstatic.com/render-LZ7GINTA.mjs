import{a as xl}from"https://app.framerstatic.com/chunk-Y5BVUKTS.mjs";import"https://app.framerstatic.com/chunk-O446VYET.mjs";import{a as et}from"https://app.framerstatic.com/chunk-7SUUZGLE.mjs";import{a as wl}from"https://app.framerstatic.com/chunk-UDNZJVLU.mjs";import{a as Jo,b as Il,c as Ul}from"https://app.framerstatic.com/chunk-FN462E2F.mjs";import"https://app.framerstatic.com/chunk-RV3ALOCZ.mjs";import"https://app.framerstatic.com/chunk-SBRVJ4W3.mjs";import{$b as Ls,B as Zo,Bd as gl,Cb as Bs,Cd as yl,Ed as hl,Fa as Kr,Fb as Ts,Fc as lo,Fd as Cl,Gc as el,Jb as A,Jc as jr,K as Lr,Kb as wt,Kc as tl,Lb as S,Mb as As,Nb as Rs,Qc as co,Sc as Hr,Uc as ol,Vc as rl,Xb as qs,_c as nl,a as Wo,ac as Xr,ad as Wt,b as ys,bc as Ks,c as hs,cc as Xs,cd as il,dc as Zs,e as Cs,ec as Zr,fb as Ns,g as ws,gd as al,h as Is,jb as Os,kd as sl,ld as ll,m as qo,md as cl,n as Us,o as Lo,od as dl,pc as js,pd as fl,q as Ko,qc as Hs,qd as ml,r as Xo,rc as Ys,s as xs,tc as Js,td as pl,u as bs,uc as Qs,ud as ul,vc as $s,vd as Ho,w as Fs,wd as Yo,x as vs,y as Ss,yb as ks,zd as W}from"https://app.framerstatic.com/chunk-CZ7UHSPK.mjs";import"https://app.framerstatic.com/chunk-XBQR3TLW.mjs";import"https://app.framerstatic.com/chunk-TDIDZXRF.mjs";import"https://app.framerstatic.com/chunk-AWW2BO62.mjs";import{a as $e,d as _s,f as Gs,g as Vs}from"https://app.framerstatic.com/chunk-4PG6AVXJ.mjs";import{h as gs}from"https://app.framerstatic.com/chunk-PPFRBDHB.mjs";import{I as is}from"https://app.framerstatic.com/chunk-JCF7EK62.mjs";import"https://app.framerstatic.com/chunk-GVCWBLI5.mjs";import"https://app.framerstatic.com/chunk-IHOAENGB.mjs";import{$ as La,G as Ta,H as Aa,Ia as Ha,Q as ht,Qa as es,R as Ct,T as V,V as _a,W as za,X as Wa,Y as _o,Z as Go,_ as qa,aa as Ka,ba as Vt,da as Vo,db as os,ea as zo,eb as ss,pa as Za,xa as ja}from"https://app.framerstatic.com/chunk-XVVVSYAN.mjs";import{B as rs,C as ns,E as as,H as ls,a as Qa,c as $a}from"https://app.framerstatic.com/chunk-6RQGRTAF.mjs";import{xa as Xa}from"https://app.framerstatic.com/chunk-KWDFHEGO.mjs";import{$ as ea,Oe as Da,_c as Ba,ca as ta,da as b,ea as oa,pc as Do,pe as Ma,rc as ka}from"https://app.framerstatic.com/chunk-Z52HPYUI.mjs";import{f as Ra}from"https://app.framerstatic.com/chunk-ZO5J4ZDO.mjs";import"https://app.framerstatic.com/chunk-CKN4QK3D.mjs";import"https://app.framerstatic.com/chunk-EDICM4ZE.mjs";import"https://app.framerstatic.com/chunk-MTT6DWBN.mjs";import"https://app.framerstatic.com/chunk-5C7X4FEK.mjs";import"https://app.framerstatic.com/chunk-Z2EPYIAC.mjs";import"https://app.framerstatic.com/chunk-N57XNHE3.mjs";import"https://app.framerstatic.com/chunk-HKTXCOMI.mjs";import"https://app.framerstatic.com/chunk-SZHO3GJC.mjs";import"https://app.framerstatic.com/chunk-SE354WOV.mjs";import{i as Ga,j as Va}from"https://app.framerstatic.com/chunk-YE4QPCYK.mjs";import"https://app.framerstatic.com/chunk-HL2V4FR2.mjs";import"https://app.framerstatic.com/chunk-IRUXHEMQ.mjs";import"https://app.framerstatic.com/chunk-IASLB2VL.mjs";import"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import"https://app.framerstatic.com/chunk-R7G3JZTX.mjs";import"https://app.framerstatic.com/chunk-YE25YANI.mjs";import"https://app.framerstatic.com/chunk-7JH2PLL7.mjs";import"https://app.framerstatic.com/chunk-GGHUZ35L.mjs";import{a as zt}from"https://app.framerstatic.com/chunk-CCAVVEIK.mjs";import"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import"https://app.framerstatic.com/chunk-Q4ZQNAWB.mjs";import{a as us}from"https://app.framerstatic.com/chunk-X7PME7OH.mjs";import{a as Na,b as lt}from"https://app.framerstatic.com/chunk-J5GSEMYU.mjs";import{b as Es}from"https://app.framerstatic.com/chunk-KDOHOQZH.mjs";import"https://app.framerstatic.com/chunk-LAS6LNDN.mjs";import"https://app.framerstatic.com/chunk-CZU44X6D.mjs";import"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{j as Oa}from"https://app.framerstatic.com/chunk-6223XENM.mjs";import"https://app.framerstatic.com/chunk-S254BFAJ.mjs";import"https://app.framerstatic.com/chunk-YS3B4HMG.mjs";import{a as zs,d as Ws}from"https://app.framerstatic.com/chunk-KA46WPS6.mjs";import"https://app.framerstatic.com/chunk-FQ2CCASN.mjs";import"https://app.framerstatic.com/chunk-R6TE5BZB.mjs";import"https://app.framerstatic.com/chunk-ZCJRITYT.mjs";import"https://app.framerstatic.com/chunk-F3N4XJ42.mjs";import"https://app.framerstatic.com/chunk-ABHKVANM.mjs";import{a as Ps}from"https://app.framerstatic.com/chunk-5LBBN5VN.mjs";import{a as ps}from"https://app.framerstatic.com/chunk-UBNCBA4L.mjs";import{a as Ds}from"https://app.framerstatic.com/chunk-AG7S5MTU.mjs";import{d as Ja,e as ts}from"https://app.framerstatic.com/chunk-CRNX7RGT.mjs";import{a as Ya}from"https://app.framerstatic.com/chunk-E5YBF7LR.mjs";import{g as yt,u as se}from"https://app.framerstatic.com/chunk-XRODVMEA.mjs";import"https://app.framerstatic.com/chunk-T232BVY3.mjs";import{$d as ji,Ac as Wi,Ag as Ji,Bg as Qi,Id as Wr,Ja as Ao,Jd as qr,Pg as $i,Sb as Vi,_c as qi,_d as Zi,ac as zi,ae as Hi,be as Yi,ka as zr,sd as Ki,td as Xi}from"https://app.framerstatic.com/chunk-FPS4GZUH.mjs";import"https://app.framerstatic.com/chunk-5VCCZK32.mjs";import{a as ct}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{e as Li,f as Ve}from"https://app.framerstatic.com/chunk-IHU2PUEH.mjs";import"https://app.framerstatic.com/chunk-Y4KSD2WZ.mjs";import"https://app.framerstatic.com/chunk-YFW4ITY5.mjs";import{b as Ms}from"https://app.framerstatic.com/chunk-QOGJSAWJ.mjs";import"https://app.framerstatic.com/chunk-YOFBDBTL.mjs";import"https://app.framerstatic.com/chunk-6GUIIDJM.mjs";import{Af as xa,De as X,Ef as Dt,Ff as _t,Hf as Gt,Ig as Ea,J as la,Je as Qe,Jf as Mo,Nc as ma,Ne as ga,Qe as ya,S as ca,Se as ha,Tf as ba,_e as Ro,b as ia,cf as Ca,df as wa,gb as da,gf as Ia,h as aa,m as sa,ng as Fa,ob as fa,og as va,qe as pa,sg as Sa,tg as Pa,we as ua,xe,zf as Ua}from"https://app.framerstatic.com/chunk-Q54L4BMQ.mjs";import"https://app.framerstatic.com/chunk-V3DFS5KX.mjs";import{a as jo}from"https://app.framerstatic.com/chunk-RDEZD42O.mjs";import"https://app.framerstatic.com/chunk-5JBS644N.mjs";import"https://app.framerstatic.com/chunk-NITQ6GUY.mjs";import"https://app.framerstatic.com/chunk-OOKYJP4H.mjs";import"https://app.framerstatic.com/chunk-7LRSK4LY.mjs";import{a as ds}from"https://app.framerstatic.com/chunk-YWKJ4NDY.mjs";import{a as j}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import{a as cs,b as fs,c as ms}from"https://app.framerstatic.com/chunk-CTKJD4ES.mjs";import"https://app.framerstatic.com/chunk-VCLUQ2DP.mjs";import{Te as To,mc as Oe,o as Ri,p as Mi,sd as Gi,ub as Di}from"https://app.framerstatic.com/chunk-4BR6WBUV.mjs";import{$q as G,Ap as Ni,B as ae,Eq as Gr,Fb as pi,Fq as Oi,Gb as ui,Hb as _,Hc as Rr,I as Ee,Ie as ao,Je as Ci,Le as Mr,Ln as Fi,Pe as wi,Qt as so,Rl as _r,Rs as st,Sq as Vr,Ss as Ai,Ts as Po,Uf as Ii,Uj as bi,Ve as k,Vf as Ui,Vn as vi,Vs as Eo,We as Ae,Wo as Pi,Xd as yi,Xi as Dr,Ze as At,_e as Je,_q as ki,fe as bo,ft as No,ga as de,gb as di,gt as Oo,ht as ko,hw as _i,ib as fi,ij as Fo,it as Bo,jr as Bi,l as re,mc as gi,mj as xi,mk as vo,oc as xo,ok as gt,pb as mi,qo as Si,re as hi,tc as Te,tk as So,yl as Mt,zp as Ei}from"https://app.framerstatic.com/chunk-JMNEQD26.mjs";import"https://app.framerstatic.com/chunk-VXJAAVJQ.mjs";import{e as Ti}from"https://app.framerstatic.com/chunk-6C6VSETA.mjs";import"https://app.framerstatic.com/chunk-FYUJQV6J.mjs";import"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import"https://app.framerstatic.com/chunk-OZDMTLMQ.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import{K as it,n as ii,x as ai,y as si}from"https://app.framerstatic.com/chunk-5GP6FPZ7.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-LH43QRIB.mjs";import{a as R,b as ri}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import"https://app.framerstatic.com/chunk-ARMSKNUK.mjs";import"https://app.framerstatic.com/chunk-2LDYO53J.mjs";import"https://app.framerstatic.com/chunk-GOOR6KBX.mjs";import{c as ni}from"https://app.framerstatic.com/chunk-PPOWLCIV.mjs";import"https://app.framerstatic.com/chunk-POQKH4YA.mjs";import{e as ra,g as na,i as pe}from"https://app.framerstatic.com/chunk-EBB7OSGG.mjs";import"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as Ne,r as Rt}from"https://app.framerstatic.com/chunk-MKASFDMK.mjs";import{b as fe,d as io,e as at,f as Uo,i as Ue,m as Ar,o as ci}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{Bc as li,a as ne,ad as Ge,b as h}from"https://app.framerstatic.com/chunk-NIDOI5EE.mjs";import"https://app.framerstatic.com/chunk-BK4VWPYG.mjs";import{f as oi}from"https://app.framerstatic.com/chunk-53WSEHWE.mjs";import{E as ti,ca as no,da as Tt,i as Co,l as ie,p as wo}from"https://app.framerstatic.com/chunk-CQ6F5PRQ.mjs";import{a as p,b as ro}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as Io}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{e as g,f as te,g as oe,h as U,i as O,j as y,k as Bt,l as T,m as ho}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Fl=g(h()),Ff={BooleanControlPropRow:Jo,EnumControlPropRow:lo,StringControlPropRow:co};function bl({children:r}){return(0,Fl.jsx)(Bs.Provider,{value:Ff,children:r})}var Yr="data-chrome";function vl(r){return r instanceof HTMLElement?r.closest(`[${Yr}]`)!==null:!1}var Jr="data-floating-canvas-chrome";function Sl(r){return r instanceof Element?r.closest(`[${Jr}]`)!==null:!1}function Pl(){return window}function Qr(){return Pl().secureFrameAncestors}function qt(){R(Qr(),"Must have secure frame ancestors.")}var pr=g(ne());var El="chromeHidden_c1gxt05z",Nl="nonHudChromeWrapper_n1sd5akc";var It=g(ne());var $r=g(h());function Ol({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="boolean"),(0,$r.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,$r.jsx)(il,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)}})})}var kl="onPageCMSFieldsModal_o1kosemn",Bl="onPageCMSFieldsModalHeader_o1tcokht",Tl="onPageCMSFieldsModalBody_o11jr4ka",Sf=1,Al=pe.panelPadding+Sf,Rl="onPageCMSFieldsModalButtonContainer_oaqx903",Qo="button_b1gqim6f";var Ml="wrapper_wje69dc",Dl="input_i1rqgchl",_l="icon_ixghur2",Gl="collectionInputHeight_c1d0unc6";var en=g(h());function Vl({collectionNode:r,controlProp:o,variableId:e,warningMessage:t,onChange:n}){let i=G(),c=r.getPropertyControls(i.tree)[e];R(c?.type==="collectionreference");let s=Ei(c,o);R(!_(s),"Variables are not supported");let f=c.dataIdentifier;function m(d){n(e,{type:"collectionreference",value:d})}return(0,en.jsx)(W,{title:c.title??"",warningMessage:t,children:(0,en.jsx)(qs,{large:!0,value:s,onChange:m,className:Dl,dataIdentifier:f,wrapperClassName:di(Ml,Gl),iconClassName:_l})})}var tn=g(h());function zl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="color"),(0,tn.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,tn.jsx)(sl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)},ColorPickerPopoutComponent:ks})})}var on=g(h());function Wl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="date"),(0,on.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,on.jsx)(ll,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)},required:!1})})}var rn=g(h());function ql({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="enum"),(0,rn.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,rn.jsx)(cl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)}})})}var nn=g(h());function Ll({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];if(R(s?.type==="file"),R(!Te(e?.value),"Dynamic values are not supported within required field validation"),e&&e?.type!=="file")return null;let m=(e?.value??"").split(".").pop(),d=!m||s.allowedFileTypes.length===0||s.allowedFileTypes.includes(m);return(0,nn.jsx)(W,{title:s.title??"",warningMessage:n,showWarningTint:!d,children:(0,nn.jsx)(dl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:u=>{se(u)&&i(t,u)},reset:()=>{i(t,{type:"file",value:void 0})}})})}var an=g(h());function Kl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,onChange:n}){let i=G(),a=us(l=>{let C=l(e);C&&n(t,C)}),s=o.getPropertyControls(i.tree)[t];R(s?.type==="array"),R(!e||bi(e));let f=xs(e,s,!0),m=bs(e,s,!0),u=Xo(f??m,s);return(0,an.jsx)(W,{title:s.title??"",warningMessage:u,children:(0,an.jsx)(fl,{collectionId:o.id,control:s,fieldId:t,controlProp:e,itemId:r.id,onChange:a,required:!1})})}var sn=g(h());function Xl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="responsiveimage"),(0,sn.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,sn.jsx)(ml,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{let m=f(e);se(m)&&i(t,m)},reset:()=>{let f={type:"image",value:void 0};i(t,f)}})})}var ln=g(h());function Zl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="link"),(0,ln.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,ln.jsx)(pl,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)},reset:()=>{let f={type:"link",value:void 0};i(t,f)}})})}var jl="inputWrapper_i4uywus";var cn=g(h());function Hl({collectionNode:r,controlProp:o,variableId:e,warningMessage:t,onChange:n}){let i=G(),c=r.getPropertyControls(i.tree)[e];p(c?.type==="multicollectionreference");let s=c.dataIdentifier,f=Ni(c,o)??[];return p(!_(f),"Variables are not supported"),(0,cn.jsx)(W,{title:c.title??"",warningMessage:t,children:(0,cn.jsx)(tl,{large:!0,value:f,onChange:m=>{n(e,{type:"multicollectionreference",value:m})},wrapperClassName:jl,dataIdentifier:s})})}var dn=g(h());function Yl({collectionItemNode:r,collectionNode:o,controlProp:e,variableId:t,warningMessage:n,onChange:i}){let a=G(),s=o.getPropertyControls(a.tree)[t];return R(s?.type==="number"),(0,dn.jsx)(W,{title:s.title??"",warningMessage:n,children:(0,dn.jsx)(ul,{control:s,controlProp:e,fieldId:t,itemId:r.id,onChange:f=>{se(f)&&i(t,f)}})})}var $o=g(h()),Jl=["left","right","auto-vertical"];function Ql({collectionNode:r,collectionItemNode:o,controlProp:e,variableId:t,onChange:n,warningMessage:i}){let a=G(),s=r.getPropertyControls(a.tree)[t];p(s?.type==="richtext");let f=e&&ni(e.value)?e.value:void 0,m=l=>{n(t,{type:s.type,value:l})},d=jo(()=>st(Eo)),u=Rt("pasteMarkdown");return(0,$o.jsx)(W,{title:s.title??"",warningMessage:i,children:u?(0,$o.jsx)(Ho,{enabled:!0,schema:d,compactTagSelector:!0,defaultValue:f??"",onChange:m,scopeType:"ContentManagement",onUnsavedChange:ct,popoverAttachmentEdge:Jl,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id):(0,$o.jsx)(Yo,{enabled:!0,supportsEmbeds:!0,supportsMedia:!0,compactTagSelector:!0,defaultValue:f??"",onChange:m,scopeType:"ContentManagement",onUnsavedChange:ct,popoverAttachmentEdge:Jl,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0},o.id)})}var er=g(h());function $l({collectionNode:r,collectionItemNode:o,controlProp:e,variableId:t,onChange:n,warningMessage:i}){let a=G(),s=r.getPropertyControls(a.tree)[t];p(s?.type==="string");let f=e&&fe(e.value)?e.value:void 0,m=s.placeholder,d=s.defaultValue??"",u=f??d,l=C=>{n(t,{type:s.type,value:C})};return(0,er.jsx)(W,{title:s.title??"",warningMessage:i,children:s.displayTextArea?(0,er.jsx)(Ca,{value:u,onChange:l,constantChange:!0,placeholder:m,minRows:10,maxRows:30,className:yl},o.id):(0,er.jsx)(wa,{type:s.obscured?"password":"text",value:u,onChange:l,placeholder:m,constantChange:!0,className:al})})}var D=g(h());function tc({fieldIdsToShow:r,requiredFieldsOnly:o,collectionItemId:e,collectionNodeId:t}){let[n,i]=(0,It.useState)(!0),[a,c]=(0,It.useState)(()=>new Map),s=a.size>0,f=b(),{treeStore:m,projectStore:d,modalStore:u}=f.stores,l=e!==f.stores.canvasStore.temporaryCollectionItemNodeId,C=m.tree.getNodeWithTrait(t,At),w=m.tree.getNodeWithTrait(e,Je);(0,It.useEffect)(()=>{(!w||!C||w.parentid!==C.id)&&u.dismiss()},[w,C,u]);let I=o||l,E=()=>{for(let[ee,L]of a)m.tree.current(w)?.setControlProp(ee,L);I?l?(m.tree.current(w)?.set({privateToUserId:void 0}),d.commitTreeAndSend()):f.stores.canvasStore.saveTemporaryCollectionItem():d.commitTreeAndSend(),u.dismissAll()},P=()=>{if(!Wo()){if(l&&F.size>0){i(!1);return}E()}},F=kf({collectionNode:C||void 0,collectionItemNode:w||void 0,tempControlProps:a,fieldIdsToShow:r});function x(ee){let M=C?.getPropertyControls(m.tree)?.[ee];if(!M)return;let He=F.get(ee);if(!(He?.type==="required"&&!(l&&!n)))return Xo(He,M)}let v=(ee,L)=>{p(w,"CollectionItemNode must be present");let M=w.getControlProp(ee);c(He=>M?.value===L.value?no.remove(He,ee):Uo(M?.value)&&Uo(L.value)&&Qa(M.value,L.value)?no.remove(He,ee):ec(M)&&ec(L)?no.remove(He,ee):no.set(He,ee,L))},N=()=>{if(!s){Pe();return}u.push({type:"Confirmation",title:"Unsaved Changes",description:"Are you sure that you want to discard your new item?",interactionRequired:!0,onConfirm:()=>Pe(),cancelLabel:"Continue Editing",confirmLabel:"Discard Item",dismissVariant:"primary",variant:"destructiveSecondary",cancelOnEnter:!0,confirmOnEnter:!1,source:"on_page_hud",buttonDirection:"column",hasBackdrop:!0})},Pe=()=>{w&&(m.tree.remove(w.id),d.commitTreeAndSend(),u.dismiss())},je=()=>{if(l){N();return}if(o){u.dismiss();return}E()},De=()=>{if(l){N();return}u.dismiss()};return(0,D.jsxs)(Dt,{hasBackdrop:!0,className:kl,visible:r.length>0,onDismiss:je,onConfirm:P,children:[(0,D.jsx)(_t,{separator:!0,title:l?"New Item":o?"Required Fields":"All Fields",className:Bl,children:(0,D.jsx)(Gt,{onDismiss:De})}),(0,D.jsxs)(Ea,{className:Tl,children:[(0,D.jsx)(ba,{size:0}),r.map(ee=>{if(!C||!w)return null;let L=C.getVariable(ee);if(!L)return null;let M=a.get(ee)??w.getControlProp(ee);return(0,D.jsx)(Of,{variable:L,collectionItemNode:w,collectionNode:C,controlProp:M,onChange:v,getWarningMessage:x},ee)})]}),(0,D.jsx)(Mo,{displayDivider:!1,paddingTop:Al,className:Rl,children:(0,D.jsxs)(ia,{children:[o?(0,D.jsx)(X,{bold:!0,onClick:De,className:Qo,children:(0,D.jsx)(Qe,{children:"Cancel"})}):(0,D.jsx)(X,{bold:!0,onClick:De,className:Qo,children:(0,D.jsx)(Qe,{children:s?"Discard":"Cancel"})}),(0,D.jsx)(X,{bold:!0,type:"submit",variant:"primary",className:Qo,enabled:o?F.size===0:s,children:(0,D.jsx)(Qe,{children:"Save"})})]})})]})}function Of({variable:r,collectionItemNode:o,collectionNode:e,controlProp:t,onChange:n,getWarningMessage:i}){let a=r.type;switch(a){case"slug":return gt(r)?(0,D.jsx)(gl,{collectionNode:e,collectionItemNode:o,controlProp:t,onChange:n,variable:r,warningMessage:i(r.id)}):null;case"string":return(0,D.jsx)($l,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:r.id,onChange:n,warningMessage:i(r.id)});case"richtext":return(0,D.jsx)(Ql,{collectionNode:e,collectionItemNode:o,controlProp:t,variableId:r.id,onChange:n,warningMessage:i(r.id)});case"link":return(0,D.jsx)(Zl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"image":return(0,D.jsx)(Xl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"array":return(0,D.jsx)(Kl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,onChange:n});case"multicollectionreference":return(0,D.jsx)(Hl,{collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"collectionreference":return(0,D.jsx)(Vl,{collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"file":return(0,D.jsx)(Ll,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"date":return(0,D.jsx)(Wl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"number":return(0,D.jsx)(Yl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"boolean":return(0,D.jsx)(Ol,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"enum":return(0,D.jsx)(ql,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});case"color":return(0,D.jsx)(zl,{collectionItemNode:o,collectionNode:e,controlProp:t,variableId:r.id,warningMessage:i(r.id),onChange:n});default:ri(a)}}function kf({collectionNode:r,collectionItemNode:o,tempControlProps:e,fieldIdsToShow:t}){let n=b(),i=S(()=>n.stores.treeStore.tree,[]),a=Us(r,o);return(0,It.useMemo)(()=>{let c=new Map;if(!r||!o)return c;for(let s of t){let f=r.getVariable(s);if(!f)continue;let d=r.getPropertyControls(i)[s];if(!d)continue;let u=e.get(s)??o.getControlProp(s),l=a.get(s),C;(vo(f)||gt(f))&&(C=Lo(f,r.variables,o));let w=Ko(f.type,d,u,C,void 0,So(f),l);w&&c.set(s,w)}return c},[r,o,t,a,i,e])}function ec(r){return!r||ci(r.value)?!0:fe(r.value)?Da(r.value):Uo(r.value)?r.value.length===0:!1}var or=g(ne());var oc="editorContainer_e1zu74n";var nc=g(h());function rc({initialHtml:r,onContentChange:o,onEscape:e}){let t=(0,or.useRef)(null);return(0,or.useEffect)(()=>{let n;async function i(){let{baseKeymap:a,chainCommands:c,dropCursor:s,gapCursor:f,history:m,keymap:d,redo:u,undo:l,undoInputRule:C}=await Vt(),w=Ne.isOn("pasteMarkdown")?(x,v,N)=>ko(x,v,N):(x,v,N)=>Bo(x,N),I=st(Po),E=w(r,I,{plugins:[m(),d({"Mod-z":c(C,l),"Mod-Shift-z":u,"Shift-Enter":_o(I),"Mod-b":Zr(I.marks.bold),"Mod-i":Zr(I.marks.italic),"Shift-Tab":Ga(I.nodes.listItem),Tab:c(Va(I.nodes.listItem),()=>!0),Backspace:c(C,Go(I)),Escape:()=>(e?.(),!!e)}),d(a),s({color:"var(--framer-color-text)",width:2}),f(),Vo()]}),P,F=new Ti(null,{state:E,editable:()=>!0,dispatchTransaction:x=>{let v=F.state.apply(x);if(F.updateState(v),P!==v.doc){let N=Ne.isOn("pasteMarkdown")?No(v.doc,I):Oo(v.doc);o(N),P=v.doc}}});t.current&&(t.current.innerHTML="",t.current.appendChild(F.dom)),n=F}return i(),()=>n?.destroy()},[r,o,e]),(0,nc.jsx)("div",{ref:t,className:oc})}function tt({tree:r,webPageNodeId:o}){let e=r.getNodeWithTrait(o,wi);if(e?.loaded)return e.loaded;e?.load().catch(ie)}function ue({screenWidth:r,tree:o,webPageNodeId:e}){let n=tt({tree:o,webPageNodeId:e})?.getBreakpointValues(),i=Pi(n,r);return o.get(i)}function ze(r,o,e){let t=e.temporaryCollectionItemNodeId??r.collectionItemNodeId;return o.tree.getNodeWithTrait(t,Je)??void 0}function Lt(r,o,e){let t=ze(r,o,e);if(t)return o.tree.getNodeWithTrait(t.parentid,At)??void 0}var H=class{constructor(o){this.engine=o;y(this,"scheduler");this.scheduler=o.scheduler}};var Tf=/^(?<hashes>#{1,6})\s$/u,be=class r extends H{constructor(e,t,n,i="none"){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;y(this,"handleOnFocus",()=>this.proseMirrorEditor?.controls.handleOnFocus());y(this,"handleOnBlur",()=>this.proseMirrorEditor?.controls.handleOnBlur());y(this,"proseMirrorEditor",null);y(this,"hasTextFitViewBox",!1);this.engine.beginUndoGroup(),this.start()}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}update(){let e=this.getRichTextNode();if(!e||!r.supportsNode(e)){this.engine.exitTool();return}if(!e.textFitViewBoxSize||this.hasTextFitViewBox)return;let t=Yi(this.engine.tree,e);this.engine.stores.projectStore.commitTreeAndSend(),t&&(this.hasTextFitViewBox=!0)}async stop(){let e=this.getRichTextNode();e&&(e.cache.isEditable=!1),this.proseMirrorEditor?.destroy(),this.proseMirrorEditor=null,this.engine.endUndoGroup(),this.engine.stores.toolStore.proseMirrorView=null,this.engine.stores.toolStore.nodeInTextEditorId=null}start(){let e=this.getRichTextNode();if(!e)return;this.hasTextFitViewBox=Zi(this.engine.tree,e),this.engine.stores.projectStore.commitTreeAndSend();let t=zo(this.engine.tree,e);if(t.length===0){this.init();return}it.loadFonts(t).catch(ie).finally(()=>this.init())}init(){this.startAsync().catch(e=>{ie(e),this.engine.exitTool()})}async startAsync(){let e=this.getRichTextNode();if(!e)return this.engine.exitTool();this.proseMirrorEditor=await this.createProseMirrorEditor(e),e.cache.isEditable=!0,this.engine.stores.toolStore.proseMirrorView=this.proseMirrorEditor.view}async createProseMirrorEditor(e){let{baseKeymap:t,chainCommands:n,createParagraphNear:i,Decoration:a,DecorationSet:c,dropCursor:s,EditorView:f,ellipsis:m,emDash:d,gapCursor:u,history:l,InputRule:C,inputRules:w,keymap:I,liftEmptyBlock:E,liftListItem:P,newlineInCode:F,redo:x,sinkListItem:v,splitBlock:N,splitListItem:Pe,toggleMark:je,undo:De,undoInputRule:ee}=await Vt(),L=this.engine,M=st(Po),He=n(Pe(M.nodes.listItem),F,i,E,Wa(M),za(M),($,K)=>N($,K&&(Z=>{let nt=$.selection,Ot=this.getRichTextNode();p(Ot,"RichTextNode not found");let _e=nt.$from.node(1);if(!Vr(_e)||!(nt.$to.parentOffset===nt.$to.parent.content.size))return K(Z);let Ie={..._e.attrs},ut=Gr(_e)&&Ie.tag!=="p",oo=Z.mapping.map($.selection.to),kt=$.selection.$from.marks();if(ut){let Ye=Ot.getNodeTextStylePreset(L.tree,"p")??Wr(L.tree,"p")??zr.createDefault("p");qr(L,Ye),Ot.setNodeTextStylePreset(Ye),L.stores.projectStore.commitTreeAndSend(),Ie.textStylePreset=Ye.id,Ie.tag="p",Ie.inlineStyles={},Ie.blockStyles={}}else{let Ye=kt.find(Oi);Ie.inlineStyles={...Ie.inlineStyles,...Ye?.attrs.inlineStyles}}Z.setNodeMarkup(oo-1,void 0,Ie),Z.setStoredMarks(kt),ut&&Z.removeStoredMark(M.marks.inlineStyles),K(Z)})));function Qn(){return L.exitTool(),!0}p(!_(e.htmlContent),"Can't edit rich text node when htmlContent variable is assigned"),p(!_(e.textContent),"Can't edit rich text node when textContent variable is assigned");let Tr=()=>{let $=this.getRichTextNode();p($,"RichTextNode not found");let K=$.getNodeInlineCodeStylePreset(L.tree)??Ki(L.tree)??new zi;return Xi(L,K),$.setNodeInlineCodeStylePreset(K),K.id},$n=(Ne.isOn("pasteMarkdown")?($,K,Z)=>ko($,K,Z):($,K,Z)=>Bo($,Z))(e.html,M,{plugins:[l(),I({"Mod-z":n(ee,De),"Mod-Shift-z":x,"Shift-Enter":_o(M),"Mod-b":je(M.marks.bold),"Mod-i":je(M.marks.italic),"Shift-Tab":P(M.nodes.listItem),Tab:n(v(M.nodes.listItem),()=>!0),Backspace:n(ee,Go(M)),Escape:Qn,Enter:He,"Mod-Shift-c":je(M.marks.inlineCode,{get inlineCodeStylePreset(){return Tr()}})}),I(t),s({color:na.cmsRichTextDropCursor,width:pe.richTextDropCursor}),u(),Vo(),ja({engine:this.engine,schema:M,nodeId:this.nodeId,getRichTextNode:()=>this.getRichTextNode()}),w({rules:[d,m,new C(Tf,($,K,Z,nt)=>{let Ot=$.doc.resolve(Z),_e=Ot.node(1),yo=Ot.before(1);if(!Vr(_e))return null;let Ie=$.tr,ut="h"+(K.groups?.hashes?.length||1),oo=this.getRichTextNode();p(oo,"RichTextNode not found");let kt=oo.getNodeTextStylePreset(L.tree,ut)??Wr(L.tree,ut)??zr.createDefault(ut),Ye=kt.id;return qr(L,kt),oo.setNodeTextStylePreset(kt),L.stores.projectStore.commitTreeAndSend(),Gr(_e)||Ie.removeMark(yo,yo+_e.nodeSize,M.marks.inlineStyles),Ie.delete(Z,nt),Ie.setNodeMarkup(yo,M.nodes.textBlock,{..._e.attrs,blockStyles:Ye?{}:_e.attrs.blockStyles,inlineStyles:Ye?{}:_e.attrs.inlineStyles,textStylePreset:Ye,tag:ut}),Ie}),qa(M),La(M)]}),..._a({markType:M.marks.inlineCode,attrs:{get inlineCodeStylePreset(){return Tr()}}})]}),ei,rt=new f(null,{state:$n,dispatchTransaction:$=>{let K=this.getRichTextNode();p(K,"Node should not be null");let Z=rt.state.apply($);if(rt.updateState(Z),Z=ji(Z,rt,K),ei!==Z.doc){let nt=Ne.isOn("pasteMarkdown")?No(Z.doc,M):Oo(Z.doc);K.html!==nt&&(r.updateNodeWithBreakpointAwareness({engine:this.engine,html:nt,node:K}),Hi(K,rt)),ei=Z.doc}this.engine.stores.projectStore.commitTreeAndSend()}});return{controls:{handleOnFocus(){rt.setProps({decorations(){}})},handleOnBlur(){rt.setProps({decorations($){let K=$.selection;if(K.from!==K.to)return document.getSelection()?.removeAllRanges(),c.create($.doc,[a.inline(K.from,K.to,{class:"selection",nodeName:"mark"})])}})}},destroy:()=>rt.destroy(),state:$n,view:rt}}static updateNodeWithBreakpointAwareness({engine:e,node:t,html:n,breakpointNode:i}){let{tree:a,stores:c}=e,{routeStore:s,canvasStore:f,treeStore:m}=c;i??=ue({screenWidth:f.screenWidth,tree:m.tree,webPageNodeId:s.webPageNodeId});let d=t.originalid??t.id,u=!yi(i)||vi(i)||!d,l=!To(a,t,"html"),C=a.getNodeWithTrait(d,k);if(p(C,`originalNode with id ${d} must exist`),u||l){C.set({html:n});return}if(t.getTextContent()===C.getTextContent()){C.set({html:Wi(C.html,qi(n))});return}t.set({html:n},a,!1,!1)}static supportsNode(e){return k(e)&&!e.htmlContent&&!e.textContent}};function ge(){let r=b();return S(()=>tt({tree:r.stores.treeStore.tree,webPageNodeId:r.stores.routeStore.webPageNodeId}),[])}function ic(){let r=b(),{routeStore:o,treeStore:e,canvasStore:t}=r.stores;return $e(()=>ze(o,e,t),[],[o,e,t])}function ac(){let r=b(),{routeStore:o,treeStore:e,canvasStore:t}=r.stores;return $e(()=>Lt(o,e,t),[],[o,e,t])}var Fe=g(ne());var sc="modal_m168h77v";var ye=g(h());function lc({richTextNodeId:r}){let o=b(),e=ge(),[t,n]=(0,Fe.useState)(()=>{let C=ue({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});return p(C,"activeOnPageBreakpointNode must exist"),C.id}),i=(0,Fe.useRef)(new Map),a=(0,Fe.useMemo)(()=>o.stores.treeStore.tree.getNodeWithTrait(r,k)?.originalid??r,[r]),c=(0,Fe.useCallback)(()=>o.stores.scopeStore.active.getTopLevelReplicaVariants().find(({id:C})=>t===C),[t]),s=(0,Fe.useCallback)(()=>{let C=c();if(!C)return;let w=so(C.id,a),I=o.stores.treeStore.tree.get(w);return k(I)?I:void 0},[c,a]),f=S(()=>o.stores.scopeStore.active.getPrimaryVariant().id,[]),m=(0,Fe.useMemo)(()=>{let C=i.current.get(t);if(C!==void 0)return C;if(t===f){let w=o.stores.treeStore.tree.getNodeWithTrait(a,k);return p(w,"originalNode should exist"),w.html}return s()?.html??""},[s,f,t,a]),d=(0,Fe.useCallback)(C=>i.current.set(t,C),[t]),u=(0,Fe.useCallback)(()=>{o.exitTool(),o.stores.modalStore.dismiss()},[]),l=(0,Fe.useCallback)(()=>{let C=o.stores.scopeStore.active.getPrimaryVariant(),w=i.current.get(C.id);if(w!==void 0){let I=o.stores.treeStore.tree.getNodeWithTrait(a,k);p(I,`originalNode with id ${a} must exist`),I.html!==w&&I.set({html:w})}o.stores.scopeStore.active.getTopLevelReplicaVariants().forEach(I=>{let E=i.current.get(I.id);if(E===void 0)return;let P=so(I.id,a),F=o.stores.treeStore.tree.get(P);k(F)&&F.html!==E&&be.updateNodeWithBreakpointAwareness({breakpointNode:I,engine:o,html:E,node:F})}),i.current.clear(),o.stores.projectStore.commitTreeAndSend(),u()},[u,a]);return(0,ye.jsxs)(Dt,{visible:!0,hasBackdrop:!0,onDismiss:u,className:sc,children:[(0,ye.jsx)(_t,{separator:!0,title:"Responsive Text",children:(0,ye.jsx)(Gt,{onDismiss:u})}),(0,ye.jsxs)(xe,{gap:pe.inputSpacing,paddingTop:pe.modalPadding,children:[(0,ye.jsx)(Pa,{children:e?.getTopLevelVariants().map(C=>(0,ye.jsx)(Sa,{identifier:C.id,title:C.name??C.id,selected:t===C.id,onSelect:n},C.id))}),(0,ye.jsx)(rc,{initialHtml:m,onContentChange:d,onEscape:u})]}),(0,ye.jsxs)(Mo,{displayDivider:!0,children:[(0,ye.jsx)(X,{bold:!0,onClick:u,variant:"default",children:(0,ye.jsx)(Qe,{children:"Cancel"})}),(0,ye.jsx)(X,{bold:!0,onClick:l,variant:"primary",children:(0,ye.jsx)(Qe,{children:"Save"})})]})]})}var rr=g(ne());var cc="modal_m1cvfiap",dc="form_f1nz04q2",fc="scroll_syo0l7n",mc="width100_w9541mz",fn="editor_e73gufq";var ft=g(h()),pc=["left","right","auto-vertical"];function gc({controlKey:r,nodeId:o}){let e=G(),t=()=>{e.stores.modalStore.dismiss()},n=$e(()=>{let l=e.stores.treeStore.tree.get(o);return!Je(l)&&!Ae(l)?null:l},[o],["Tree"]),i=$e(()=>{let u=e.tree.getScopeNodeFor(n);return u?Ba(u):null},[n],["Tree"]),a=$e(()=>{if(Je(n)){let u=n?.parentid,l=e.stores.treeStore.tree,C=l.getNodeWithTrait(u,At);if(!C)return null;let I=C.getPropertyControls(l)[r];return I?.type==="richtext"?I:null}if(Ae(n)){let u=re.reactComponentForIdentifier(n.codeComponentIdentifier);if(!u)return null;let l=u.properties[r];return l?.type==="richtext"?l:null}return null},[r,n],["Tree","ActiveBundle"]),c=(0,rr.useMemo)(()=>{if(!n)return"";let u=uc(n,r);return fe(u?.value)?u.value:""},[n,r]),s=!!i&&!!n&&a?.type==="richtext",f=u=>{if(!n)return;let l=e.stores.treeStore.tree.current(n);if(!l)return;let C,w=uc(n,r);w?C={...w,value:u}:C={type:"richtext",value:u},Je(l),l.setControlProp(r,C),p(oa(e),"Only on-page engine can commit tree"),e.stores.projectStore.commitTreeAndSend()};(0,rr.useEffect)(()=>{s||e.stores.modalStore.dismiss()},[s]);let m=jo(()=>st(Fo(n)?Eo:Ai)),d=Rt("pasteMarkdown");return s?(0,ft.jsxs)(Dt,{visible:!0,hasBackdrop:!0,onDismiss:t,className:cc,formClassName:dc,children:[(0,ft.jsx)(_t,{separator:!0,title:a.title??"Unknown",className:mc,children:(0,ft.jsx)(Gt,{onDismiss:t})}),(0,ft.jsx)(Ia,{className:fc,children:d?(0,ft.jsx)(Ho,{enabled:!0,schema:m,className:fn,defaultValue:c,onChange:f,scopeType:i,onUnsavedChange:ct,popoverAttachmentEdge:pc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0}):(0,ft.jsx)(Yo,{enabled:!0,supportsEmbeds:Fo(n),supportsMedia:Fo(n),className:fn,defaultValue:c,onChange:f,scopeType:i,onUnsavedChange:ct,popoverAttachmentEdge:pc,fallbackToModalAppearance:!0,saveOnMetaArrowNavigation:!0})})]}):null}function uc(r,o){if(Je(r)){let e=r.getControlProp(o);return e?.type==="richtext"&&fe(e.value)?e:null}if(Ae(r)){let e=re.reactComponentForIdentifier(r.codeComponentIdentifier);if(!e)return null;let n=r.getControlProps(e.properties)[o];if(n?.type==="richtext"&&fe(n.value))return n}return null}var fo=g(h()),Mf={AcquireAddonModal:null,AcquireAdvancedAnalyticsTrialModal:null,AddToLibrary:null,BatchTranslate:null,CodeFileCreation:null,CompleteSignup:null,ComponentIsolationModal:null,Confirmation:Js,ConfirmBatchTranslateAll:null,ConfirmDefaultLanguage:null,ConfirmDeleteCollectionItems:null,ConfirmDeleteCustomCode:null,ConfirmDestructiveFeedbackAction:null,ConfirmDraftCollectionItem:null,ConfirmDraftLocale:null,ConfirmDraftPage:null,ConfirmPublishAbTest:null,ConfirmPublishDraftCollectionItem:null,ConfirmPublishDraftLocale:null,ConfirmPublishDraftPage:null,ConfirmRemoveTriggerEvent:null,ConfirmUpdatingAbVariants:null,ConvertToCMSPage:null,CreateAbTest:null,CreateComponent:null,CreateLayoutTemplate:null,CreateManagedCollection:null,CreateTeam:null,CustomBreakpoint:null,DashboardAddHeader:null,DashboardAddRedirect:null,DashboardAddRewrite:null,DashboardEditHeader:null,DashboardEditRedirect:null,DashboardEditRewrite:null,DeleteCodeFile:null,DeleteCustomFont:null,DeleteEntityFolder:null,DeleteFile:null,DeleteMultipleCodeFiles:null,DeleteMultipleEntityFolders:null,DeprecatedDrafts:null,DuplicateProjectWithVersion:null,DuplicateWebPage:null,EditCustomCode:null,FigmaImportTutorial:null,FlexToYearly:null,ImageCrop:Qs,ImageFocalPoint:$s,ImportFigma:null,ImportRedirects:null,LoadingFullDocument:null,LocaleReady:null,LocaleSettings:null,LocalizationGlossary:null,None:null,NudgePreferences:null,OnPageCMSFieldsModal:tc,OnPageRichTextEditor:gc,OnPageRichTextVariantOverride:lc,OverrideFile:null,PasteFromFigma:null,PlanCancellation:null,PluginCustomHTML:null,PluginFromURL:null,PluginWithModePicker:null,PublishModule:null,QuickActions:null,RemoveTeamLibraryModule:null,ReplaceTextStylePreset:null,ReplaceWebPage:null,SelectProjectToUpgrade:null,Shortcuts:null,StopAbTest:null,SubscriptionNotInOrder:null,TransferProject:null,Templates:null,UnlinkComponent:null,UnsavedChanges:null,UnsupportedFileSize:null,UnsupportedFileType:null,UpgradeDocument:null,UpsellEnterprise:null,UpsellFeature:null,Variables:null,VectorImport:null,VectorSetCreation:null,ViewCustomCode:null,Welcome:null};function yc(){let o=b().stores.modalStore.useState(e=>e.stack);return o.map((e,t)=>{if(e.type==="None")return null;let n=Mf[e.type];p(n,`Modal is missing: ${e.type}`);let{type:i,...a}=e,c=t===o.length-1,s=e.type+t;return(0,fo.jsx)(ga,{allowFocusTrap:c,children:(0,fo.jsx)(xa.Provider,{value:gs(i),children:(0,fo.jsx)(Ua.Provider,{value:c?"visible":"hidden",children:(0,fo.jsx)(n,{...a})})})},s)})}function Cc({accessStore:r,routeStore:o},e){let t=r.access;p(t.status==="success","Can't open Framer if project access is not successful");let n=e??o.projectLinkNodeId,i=`${Io().app}/projects/${t.data.projectSlug}?node=${n}`;window.open(`https://www.framer.com/open-in-app?url=${encodeURIComponent(i)}`,"_blank")}var Fc=g(ne());var wc="toolbar_t49i6vy",Ut="button_bjwo6qr",Kt="buttonSecondary_b1qwl3y9",Ic="mainContentContainer_m1wta5up",Uc="mainContent_m69kutt",mn="secondaryText_sdjdrec",xc="logoIcon_l9efojb";var pn={slug:!0,string:!0,richtext:!0,link:!0,image:!0,array:!0,multicollectionreference:!0,collectionreference:!0,file:!0,date:!0,number:!0,boolean:!0,enum:!0,color:!0};function nr(r){return Fs(r).flatMap(t=>{let n=t.type;return pn[n]!==void 0?t.id:[]})}var B=g(h());function vc(){let r=b(),{routeStore:o,treeStore:e,canvasStore:t,projectStore:n,modalStore:i}=r.stores,a=S(()=>r.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:c}=n.useState(),s=a?.isNewItem?"Page saved":"Site saved",f=ic(),m=ac(),d=(0,Fc.useCallback)(()=>{p(m,"Collection node must exist"),p(f,"Collection item node must exist");let C=nr(m);r.exitTool(),i.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:C,requiredFieldsOnly:!1,source:"on_page_hud",collectionItemId:f.id,collectionNodeId:m.id})},[o,e,i,r,f,m]),u=()=>{i.set({type:"Confirmation",title:"Discard Changes",description:"All changes will be lost. This action cannot be undone.",confirmLabel:"Discard",cancelLabel:"Cancel",variant:"destructive",source:"on_page_hud",onConfirm:()=>{t.discardTemporaryCollectionItem()}})},l=!!f?.privateToUserId;return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("div",{className:wc,children:[l?(0,B.jsxs)(X,{className:j(Ut,Kt),onClick:u,children:[(0,B.jsx)(ca,{}),"Discard Page"]}):(0,B.jsx)(_f,{finishedEditing:a}),(0,B.jsxs)("div",{className:Ic,children:[(0,B.jsx)(bc,{desktopText:"Click to edit",mobileText:"Tap to edit",secondaryText:"Changes are auto-saved",isVisible:!a}),(0,B.jsx)(bc,{desktopText:s,mobileText:s,secondaryText:`A notification was sent to your collaborators. ${a?.isNewItem?"The page":"Changes"} will be visible when the project is published.`,isVisible:!!a})]}),(0,B.jsxs)(xe,{direction:"row",gap:10,children:[m&&!l&&!m.managedByPlugin&&!a&&(0,B.jsxs)(X,{className:j(Ut,Kt),enabled:!c,onClick:()=>t.createTemporaryCollectionItem(),"aria-label":"Add Page",children:[(0,B.jsx)(ma,{}),(0,B.jsx)(ir,{desktopText:"Add Page",mobileText:"Page"})]}),l&&!c&&(0,B.jsxs)(X,{className:j(Ut,Kt),onClick:d,children:[(0,B.jsx)(Vf,{}),"Show All Fields"]}),a?(0,B.jsxs)(X,{className:j(Ut,Kt),onClick:()=>t.handleDismissFinishEditing(),children:[(0,B.jsx)(Gf,{}),"Go Back to Site"]}):(0,B.jsxs)(X,{variant:"primary",className:Ut,onClick:()=>t.handleFinishEditing(),children:[(0,B.jsx)(la,{"aria-hidden":"true"}),(0,B.jsx)(ir,{desktopText:"Finish Editing",mobileText:"Done"})]})]})]})})}function bc({desktopText:r,mobileText:o,secondaryText:e,isVisible:t}){return(0,B.jsx)(li,{children:t&&(0,B.jsxs)(Ge.div,{className:Uc,initial:{marginTop:10,opacity:0},animate:{marginTop:0,opacity:1},exit:{marginTop:-10,opacity:0},children:[(0,B.jsx)(ir,{desktopText:r,mobileText:o}),(0,B.jsx)("span",{className:mn,children:"\xB7"}),(0,B.jsx)("span",{className:mn,children:e})]})})}function ir({desktopText:r,mobileText:o}){let e=Ps(`(max-width: ${ra.tabletSmall}px)`);return!o&&e?null:(0,B.jsx)("span",{children:e?o:r})}function _f({finishedEditing:r}){let o=b(),e=()=>{Cc(o.stores,r?.isNewItem?r.nodeId:void 0)};return(0,B.jsxs)(X,{className:j(Ut,Kt),onClick:e,"aria-label":"Open in Framer",children:[(0,B.jsx)(da,{"aria-hidden":"true",className:xc}),(0,B.jsx)(ir,{desktopText:"Open in Framer"})]})}function Gf(){return(0,B.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"9",height:"9",fill:"none",children:[(0,B.jsx)("path",{d:"M 1.5 7.5 L 8 1",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.jsx)("path",{d:"M 3 1 L 8 1 L 8 6",fill:"transparent",strokeWidth:"1.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Vf(){return(0,B.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"11",fill:"none",children:[(0,B.jsx)("path",{d:"M1 5.5s1.5-3 4.5-3 4.5 3 4.5 3-1.5 3-4.5 3-4.5-3-4.5-3Z",fill:"transparent",strokeWidth:"1.5",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"}),(0,B.jsx)("path",{d:"M5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Z",fill:"#fff"})]})}var We=class extends H{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,Mt)||this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableInfo(){let e=this.getNode();if(!e)return;let t=_r(e);if(!t)return;let n=e.cache.getRenderInstance(this.renderId);if(n)return V(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,t,"collectionreference",n.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,controlProp:i}=t;i.value!==e&&n.setControlProp(t.variableDefinition.id,{...i,value:e})}static supportsNode(e,t,n){let i=_r(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,i,"collectionreference",a.collectionItemId):!1}};var qe=class r extends H{constructor(e,t,n){super(e);this.nodeId=t;this.renderId=n}getCodeComponentNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,Ae)}getEditableControls(){let e=this.getCodeComponentNode();if(e)return r.getEditableControls(this.engine,e,this.renderId)}update(){let e=this.engine,t=this.getCodeComponentNode();(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}stop(){let{modalStore:e}=this.engine.stores;e.stack.some(({type:n})=>n==="OnPageRichTextEditor")&&e.dismissAll()}static getEditableControls(e,t,n){let i=t.cache.getRenderInstance(n);if(!i)return Co();let a=re.reactComponentForIdentifier(t.codeComponentIdentifier);if(!a)return Co();let c=t.getControlProps(a.properties);if(!c)return Co();let s=[],f=rl(e,t.codeComponentIdentifier);if(Ii(t)&&f)if(Ui(t)){let m=V(e.tree,e.stores.treeStore.sandboxCollectionData,t.dynamicVectorSetIdentifier,"vectorsetitem",i.collectionItemId);m&&s.push({type:"collection",controlKey:"dynamicVectorSetIdentifier",variableInfo:m})}else ti(t.codeComponentIdentifier)&&s.push({type:"vectorSetItem",codeComponentIdentifier:t.codeComponentIdentifier});for(let m in c){let d=c[m];if(!d)continue;let u=a.properties[m];if(u){if(d.type==="enum"&&Ne.isOn("onPageEnumVariableOnComponentInstanceEditTool")&&!Te(d.value)){p(u.type==="enum");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}if(d.type==="string"){if(_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,d.type,i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}else if(!Te(d.value)){p(u.type==="string");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}}if(d.type==="richtext"){if(_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,d.type,i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}else if(!Te(d.value)){p(u.type==="richtext");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}}if(d.type==="image"){if(_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,d.type,i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}else if(!Te(d.value)){p(u.type==="image"||u.type==="responsiveimage");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}}if(d.type==="date"){if(_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,"date",i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}else if(!Te(d.value)){p(u.type==="date");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}}if(d.type==="vectorsetitem"){if(_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,"vectorsetitem",i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}else if(!Te(d.value)){p(u.type==="vectorsetitem");let l=Ct(u);p(l,"Reduced control prop should not be null"),ht(l,d,u),s.push({type:"component",controlKey:m,controlDescription:u,controlProp:d,reducedControlProp:l})}}if(d.type==="link"&&_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,"link",i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}if(d.type==="boolean"&&_(d.value)){let l=V(e.tree,e.stores.treeStore.sandboxCollectionData,d.value,"boolean",i.collectionItemId);if(!l)continue;s.push({type:"collection",controlKey:m,variableInfo:l})}}}return s}static supportsNode(e,t,n){return Ae(t)?r.getEditableControls(e,t,n).length>0:!1}};var Le=class r extends H{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=r.getVariableReference(e);if(n)return V(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"date",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}static getVariableReference(e){let t=e.textContent;if(!xo(t))return;let n=t.startValue;if(_(n))return n}static supportsNode(e,t,n){if(!k(t))return!1;let i=r.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,i,"date",a.collectionItemId):!1}};var Ke=class r extends H{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}static getVariableReference(e){let t=e.textContent;if(!xo(t))return;let n=t.startValue;if(_(n))return n}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=r.getVariableReference(e);if(n)return V(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"enum",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}static supportsNode(e,t,n){if(!k(t))return!1;let i=r.getVariableReference(t);if(!i)return!1;let a=t.cache.getRenderInstance(n);return a?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,i,"enum",a.collectionItemId):!1}};var Xe=class r extends H{constructor(e,t,n){super(e);this.nodeId=t;this.renderId=n}update(){let e=this.engine,t=e.tree.get(this.nodeId);(!t||!r.supportsNode(e,t,this.renderId))&&e.exitTool()}static supportsNode(e,t,n){if(!Mt(t))return!1;if(_(t.fillImage)){let i=t.cache.getRenderInstance(n);return i?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,t.fillImage,"image",i.collectionItemId):!1}return!gi(t.fillImage)}};var Sc,Pc,ar,un,me=class extends(Pc=H,Sc=[A()],Pc){constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.onCancelWithoutMove=i;T(this,un,U(ar,8,this,!1)),U(ar,11,this);y(this,"beginState",null);y(this,"beginStates",new Map);y(this,"previousInsertionIndex");y(this,"handleKeyDown",()=>{});y(this,"state");let{mouseStore:a}=this.engine.stores,c=e.tree.get(this.nodeId);R(c,"Node must exist"),this.beginState=Aa(e.tree,c,a.canvasMousePosition),this.beginStates.set(c,this.beginState),this.listenForEscapeKey()}listenForEscapeKey(){this.handleKeyDown=e=>{if(e.key==="Escape"){let t=ao(this.beginState?.parent)?this.beginState.parent.getChildrenInVisualOrder().findIndex(n=>n.id===this.nodeId):-1;this.previousInsertionIndex=t,e.preventDefault(),e.stopPropagation(),this.engine.exitTool()}},window.addEventListener("keydown",this.handleKeyDown)}endMoveTool(){this.hasMoved?this.engine.exitTool():this.onCancelWithoutMove()}update(){let{treeStore:e,mouseStore:t,canvasStore:n,routeStore:i}=this.engine.stores,a=e.tree.get(this.nodeId);if(!a)return this.engine.exitTool();let c=ue({screenWidth:n.screenWidth,tree:e.tree,webPageNodeId:i.webPageNodeId});if(!t.isMouseDown||!c){requestAnimationFrame(()=>{this.endMoveTool()});return}let f=e.tree,m=t.canvasMousePosition;R(this.beginState,"beginState must be defined"),R(ao(this.beginState.parent),"parent must be a stack or grid component");let d=ae.subtract(m,this.beginState.canvasPointUnderMouse);if(this.hasMoved=d.x!==0||d.y!==0,!this.hasMoved)return;let u=this.getPlaceholder(a,this.beginState.parent);if(!u)return;let l=this.beginState.rect,C=ae.add(l,d),I=a.cache.getRenderInstance(this.renderId)?.parentRenderId??this.beginState.parent.id,E=f.convertPointToCanvas(this.beginState.parent,C,void 0,void 0,I);this.state={id:this.renderId,rect:{height:u.size.height,left:E.x,top:E.y,width:u.size.width},placeholder:u}}stop(){window.removeEventListener("keydown",this.handleKeyDown);let{treeStore:e}=this.engine.stores,t=e.tree.get(this.nodeId);if(!t)return;let n=ao(this.beginState?.parent)?this.beginState.parent.getChildrenInVisualOrder().findIndex(i=>i.id===t.id):-1;this.beginState?.parent&&io(this.previousInsertionIndex)&&this.previousInsertionIndex!==n&&this.engine.tree.moveNode(t,this.beginState.parent.id,this.previousInsertionIndex),this.engine.stores.projectStore.commitTreeAndSend()}getPlaceholder(e,t){if(!e)return null;let n=this.engine.tree.getRect(e,void 0,void 0,void 0,this.renderId),a=e.cache.getRenderInstance(this.renderId)?.parentRenderId??t.id,c={width:n.width,height:n.height},s=Ta(this.engine.tree,this.engine.stores.treeStore.layoutCache,this.engine.stores.mouseStore.canvasMousePosition,this.engine.stores.mouseStore.previous.canvasMousePosition,this.beginStates,t,this.engine.tree.convertPointToNode(t,this.engine.stores.mouseStore.canvasMousePosition,void 0,a),this.previousInsertionIndex);return c&&io(s)&&t?(this.previousInsertionIndex!==s&&(this.previousInsertionIndex=s),{id:a,size:c,index:s}):null}static supportsNode(e,t){let n=t.parentid?e.tree.get(t.parentid):null;if(!n?.children)return!1;let i=n&&n.children.length>1;return Ne.isOn("onPageMoveTool")&&ao(n)&&!Mi(t)&&i&&!Ri(t)}};ar=te(Pc),un=new WeakMap,O(ar,4,"hasMoved",Sc,me,un),oe(ar,me);var Re=class r extends H{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;y(this,"controls");this.engine.beginUndoGroup(),Vt().then(a=>{e.stores.toolStore.proseMirror??=a})}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.htmlContent;if(_(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=this.getVariableReference();if(n)return V(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"richtext",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!r.supportsNode(e,t,this.renderId))e.exitTool();else{let n=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(n)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,n){if(!k(t)||!_(t.htmlContent))return!1;let i=t.cache.getRenderInstance(n);return i?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,t.htmlContent,"richtext",i.collectionItemId):!1}};var Me=class r extends H{constructor(e,t,n,i){super(e);this.nodeId=t;this.renderId=n;this.eventSource=i;this.engine.beginUndoGroup();let a=this.getRichTextNode();p(a,"Missing rich text node");let c=zo(this.engine.tree,a);it.loadFonts(c).catch(ie)}getRichTextNode(){return this.engine.tree.getNodeWithTrait(this.nodeId,k)}getVariableReference(){let e=this.getRichTextNode();if(!e)return;let t=e.textContent;if(_(t))return t}getVariableInfo(){let e=this.getRichTextNode();if(!e)return;let t=e.cache.getRenderInstance(this.renderId);if(!t)return;let n=this.getVariableReference();if(n)return V(this.engine.tree,this.engine.stores.treeStore.sandboxCollectionData,n,"string",t.collectionItemId)}getControlProp(){return this.getVariableInfo()?.controlProp}changeValue(e){let t=this.getVariableInfo();if(!t)return;let{collectionItemNode:n,variableDefinition:i,controlProp:a}=t;a.value!==e&&(n.setControlProp(i.id,{...a,value:e}),this.engine.stores.projectStore.commitTreeAndSend())}update(){let e=this.engine,t=this.getRichTextNode();if(!t||!r.supportsNode(e,t,this.renderId))e.exitTool();else{let n=this.getVariableInfo();this.engine.stores.toolStore.validateCollectionControl(n)}}stop(){this.engine.endUndoGroup(),this.engine.stores.toolStore.nodeInTextEditorId=null}static supportsNode(e,t,n){if(!k(t)||!_(t.textContent))return!1;let i=t.cache.getRenderInstance(n);return i?!!V(e.tree,e.stores.treeStore.sandboxCollectionData,t.textContent,"string",i.collectionItemId):!1}};var ke=class r extends H{update(){let o=this.engine,{routeStore:e,canvasStore:t,treeStore:n,mouseStore:i,toolStore:a}=o.stores,c=ue({screenWidth:t.screenWidth,tree:n.tree,webPageNodeId:e.webPageNodeId});if(!c||i.isHoveringFloatingCanvasChrome)return;if(i.isHoveringChrome){a.highlightedRenderId=void 0;return}let s=n.tree,f=i.canvasMousePosition,m=s.getNodeRendersAtPoint(c,f,!0),d=Qi(m,s),l=d.filter(I=>r.isSelectableNodeOrTopLevelRepeaterNode(o,I.node,I.renderId)).at(-1);if(l){o.stores.toolStore.highlightedRenderId=l.renderId;return}let w=d.filter(I=>r.isUnexpectedlyUnselectableNode(o,I.node,I.renderId)).at(-1);if(w){a.highlightedRenderId=w.renderId;return}a.highlightedRenderId=void 0}static isSelectableNodeOrTopLevelRepeaterNode(o,e,t){return r.isClickableNode(o,e,t)||sr(o,e)}static isHighlightableNode(o,e,t){return qe.supportsNode(o,e,t)||Le.supportsNode(o,e,t)||Xe.supportsNode(o,e,t)||be.supportsNode(e)||Re.supportsNode(o,e,t)||Me.supportsNode(o,e,t)||We.supportsNode(o,e,t)||Ke.supportsNode(o,e,t)}static isClickableNode(o,e,t){return r.isHighlightableNode(o,e,t)||me.supportsNode(o,e)}static isUnexpectedlyUnselectableNode(o,e,t){return r.isClickableNode(o,e,t)?!1:Di(e)||Ae(e)}};function sr(r,o){return!(!Ci(o)||Cs(r.tree,o)||bo(r.tree.getWebPageNodeFor(o)))}var kc=g(ne());var Ec="container_ci35ri5",Nc="shockwaveMask_suurpvn",Oc="shockwaveNodeHighlight_s1xlu29h";var lr=g(h()),Bc=(0,kc.memo)(function(){let o=b(),e=S(()=>o.stores.editableNodeHighlightStore.editableNodesHighlight,[]);return e?(0,lr.jsx)(Ge.div,{className:j(Ec,Nc),initial:{"--radius":`${e.minRadius}px`},animate:{"--radius":`${e.maxRadius}px`},transition:{duration:e.animationDuration/1e3,ease:"easeOut"},style:{top:e.minY,height:e.maxY-e.minY,"--x":`${e.originX}px`,"--y":`${e.originY}px`,"--gradient-size":`${e.gradientSize}px`},children:(0,lr.jsx)("div",{style:{position:"absolute",top:-e.minY},children:e.highlights.map(t=>(0,lr.jsx)("div",{className:Oc,style:{width:t.width,height:t.height,transform:t.transform,transformOrigin:"top left"}},t.renderId))})},e.animationId):null});var Tc="hudContainer_h1czcor4";var Mc=g(ne());var Ac=g(ne()),Rc=g(h()),Q=(0,Ac.forwardRef)(function({tree:o,node:e,renderId:t,style:n,overrideRect:i,...a},c){let s=b(),f=S(()=>{if(i)return i;let d=s.stores.treeStore.domLayoutUpdate,u=o.getRect(e,void 0,void 0,void 0,t);return{width:u.width,height:u.height,x:0,y:0}},[o,e,t,i],Ee.equals),m=o.transformMatrixToNode(e,void 0,void 0,t);return(0,Rc.jsx)("div",{...a,ref:c,style:{position:"absolute",width:f.width,height:f.height,top:f.y,left:f.x,transformOrigin:"top left",transform:m.toString(),...n}})});var gn=g(h());function Dc({tool:r}){let{renderId:o}=r,e=ge(),t=b(),n=t.tree,i=(0,Mc.useRef)(null),a=r.getNode();if(Wt(i,()=>{t.exitTool()}),!!a&&e)return(0,gn.jsx)(Q,{ref:i,tree:n,node:a,renderId:o,children:(0,gn.jsx)(Ls,{tool:r,node:a,renderId:o,scopeNode:e})})}var _c="validationBadge_v1r7rm12";var dr=g(h());function qf(r){return r.message}function cr({validationWarning:r}){if(!r)return null;let o=qf(r);return(0,dr.jsxs)("div",{className:_c,children:[(0,dr.jsx)(pa,{width:10,height:10}),o]})}var mo=g(h());function Gc({tool:r}){let{nodeId:o,renderId:e}=r,t=b(),n=S(()=>t.stores.toolStore.validationWarning,[]),i=S(()=>t.stores.treeStore.tree,[]),a=S(()=>t.stores.toolStore.editorOverlayClipPath,[]),c=ge(),s=S(()=>t.stores.toolStore.proseMirror,[]),f=i.getNodeWithTrait(o,k);if(!f||!c||!s)return;function m(d){d.target===d.currentTarget&&t.exitTool()}return(0,mo.jsxs)(Q,{tree:i,node:f,renderId:e,children:[(0,mo.jsx)(cr,{validationWarning:n}),(0,mo.jsx)(js,{tool:r,scopeNode:c,node:f,renderId:e,proseMirror:s,zoom:1,onClickOutside:m,hasValidationWarning:!!n,style:{clipPath:a}})]})}var Xt=g(ne());var Vc="popover_p6dts5z",zc="popoverWithModalInFront_pcmqzkm";var fr="nodeHighlight_nbqylm8",Wc="visuallyHidden_v1pcr3uc",yn="pointerCursor_p1mivvux",qc="textCursor_t42x8tu",Lc="grabCursor_g1atul0u",Kc="notAllowedCursor_n1i0g06w",Xc="background_b1t4nog5",Zc="repeaterActionButtonLine_r1wgs7ug",jc="repeaterActionButtonTop_rsrrcv7",Hc="repeaterActionButtonBottom_rckttk2",Yc="repeaterActionButtonLeft_r12nxotj",Jc="repeaterActionButtonRight_r460cpk",Qc="repeaterActionButton_rrb252f",$c="repeaterActionIcon_rxpkzma",ed="clickThrough_c1ct4jl9";var Y=g(h()),Kf=["bottom","top","right","left"],Xf={x:pe.inputSpacing,y:pe.inputSpacing};function od({tool:r}){let[o,e]=(0,Xt.useState)(null),t=b(),n=t.stores.modalStore.useState(l=>l.active.type!=="None"),[i,a]=(0,Xt.useState)(!1);!i&&n&&a(!0);let c=S(()=>t.stores.treeStore.tree,[]),s=c.getNodeWithTrait(r.nodeId,xi),f=(0,Xt.useMemo)(()=>{let l=c;return r.getEditableControls()},[r,c]);function m(){t.exitTool()}let d=s?.id,u=(0,Xt.useMemo)(()=>d?[d]:[],[d]);if(!(!s||!f||f.length===0))return(0,Y.jsx)(Q,{tree:c,node:s,ref:e,renderId:r.renderId,className:fr,children:(0,Y.jsx)(Ro,{anchor:o,alignSelf:"center",attachTo:Kf,offset:Xf,onClose:m,showArrow:!0,arrow:{anchor:o,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,className:j(Vc,n&&zc),focusTrapEnabled:!n,animateAppear:!i,zIndex:21,children:(0,Y.jsx)(Ks,{displayDivider:!0,title:Zf(s),onClose:m,children:(0,Y.jsx)(xe,{gap:0,paddingTop:pe.inputSpacing,paddingBottom:pe.inputSpacing,paddingLeft:pe.panelPadding,paddingRight:pe.panelPadding,children:f.map(l=>{if(l.type==="vectorSetItem")return(0,Y.jsx)(ol,{nodeIds:u,supportsVariables:!1,dynamicVectorSetIdentifier:void 0,codeComponentIdentifier:l.codeComponentIdentifier},"vectorSet");if(l.type==="component")switch(l.controlDescription.type){case"string":return p(l.reducedControlProp.type==="string"),(0,Y.jsx)(co,{nodeIds:u,controlKey:l.controlKey,control:l.controlDescription,controlProp:l.reducedControlProp,onChange:(x,v)=>{p(l.controlProp.type==="string");let N=v(l.controlProp);de(N,l.controlProp)||(s.setControlProp(x,N),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"enum":return p(l.reducedControlProp.type==="enum"),(0,Y.jsx)(lo,{controlKey:l.controlKey,control:l.controlDescription,controlProp:l.reducedControlProp,onChange:(x,v)=>{p(l.controlProp.type==="enum"),!de(x,l.controlProp)&&(s.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"richtext":return p(l.reducedControlProp.type==="richtext"),(0,Y.jsx)(Kr,{title:l.controlDescription.title??"Unknown",children:(0,Y.jsx)(X,{title:"Edit Content",className:Lr,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:l.controlKey,nodeId:r.nodeId,source:"on_page_hud"})}})},l.controlKey);case"image":case"responsiveimage":return p(l.reducedControlProp.type==="image"||l.reducedControlProp.type==="responsiveimage"),(0,Y.jsx)(jr,{nodeIds:u,controlKey:l.controlKey,control:l.controlDescription,controlProp:l.reducedControlProp,onChange:(x,v)=>{p(w.type==="image");let N=v(w);de(N,w)||(s.setControlProp(x,N),t.stores.projectStore.commitTreeAndSend())},onUpload:async(x,v)=>{let N=await x;if(!N)return;p(l.controlProp.type==="image");let Pe=el(l.controlProp,N);s.setControlProp(v,Pe),t.stores.projectStore.commitTreeAndSend()}},l.controlKey);case"date":return p(l.reducedControlProp.type==="date"),(0,Y.jsx)(Xr,{controlKey:l.controlKey,control:l.controlDescription,controlProp:l.reducedControlProp,onChange:(x,v)=>{p(x.type==="date"),!de(x,w)&&(s.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"vectorsetitem":return p(l.reducedControlProp.type==="vectorsetitem"),(0,Y.jsx)(Hr,{controlKey:l.controlKey,control:l.controlDescription,controlProp:l.reducedControlProp,onChange:(x,v)=>{p(x.type==="vectorsetitem"),!de(x,l.controlProp)&&(s.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);default:ro(l.controlDescription)}let{variableInfo:C}=l,{controlProp:w,controlDescription:I,collectionItemNode:E,variableDefinition:P,reducedControlProp:F}=C;switch(w.type){case"string":return p(I.type==="string"),p(F.type==="string"),(0,Y.jsx)(co,{nodeIds:u,controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(w.type==="string");let N=v(w);de(N,w)||(E.setControlProp(x,N),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"enum":return p(I.type==="enum"),p(F.type==="enum"),(0,Y.jsx)(lo,{controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(x.type==="enum"),!de(x,w)&&(E.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"richtext":return p(I.type==="richtext"),p(F.type==="richtext"),(0,Y.jsx)(Kr,{title:I.title||ui(P.id),children:(0,Y.jsx)(X,{title:"Edit Content",className:Lr,onClick:()=>{t.stores.modalStore.set({type:"OnPageRichTextEditor",controlKey:P.id,nodeId:E.id,source:"on_page_hud"})}})},l.controlKey);case"image":return p(I.type==="responsiveimage"),p(F.type==="responsiveimage"),(0,Y.jsx)(jr,{nodeIds:u,controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(w.type==="image");let N=v(w);de(N,w)||(E.setControlProp(x,N),t.stores.projectStore.commitTreeAndSend())},onUpload:async(x,v)=>{let N=await x;N&&(E.setControlProp(v,{type:"image",value:N}),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"date":return p(I.type==="date"),p(F.type==="date"),(0,Y.jsx)(Xr,{controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(x.type==="date"),p(w.type==="date"),!de(x,w)&&(E.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"link":return p(I.type==="link"),p(F.type==="link"),(0,Y.jsx)(Ul,{controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(w.type==="link");let N=v(w);de(N,w)||(E.setControlProp(x,N),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"boolean":return p(I.type==="boolean"),p(F.type==="boolean"),(0,Y.jsx)(Jo,{nodeIds:u,controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(x.type==="boolean"),p(w.type==="boolean"),!de(x,w)&&(E.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);case"vectorsetitem":return p(I.type==="vectorsetitem"),p(F.type==="vectorsetitem"),(0,Y.jsx)(Hr,{controlKey:P.id,control:I,controlProp:F,onChange:(x,v)=>{p(x.type==="vectorsetitem"),p(w.type==="vectorsetitem"),!de(x,w)&&(E.setControlProp(v,x),t.stores.projectStore.commitTreeAndSend())}},l.controlKey);default:ro(w)}})})})})})}function Zf(r){let o=re.reactComponentForIdentifier(r.codeComponentIdentifier);return o?o.name:"Component"}var mr=g(ne());var hn=g(h());function rd({tool:r}){let{nodeId:o,renderId:e}=r,t=b(),n=t.tree,i=(0,mr.useRef)(null),a=ge(),c=n.getNodeWithTrait(o,k);if(Wt(i,()=>{t.exitTool()}),(0,mr.useEffect)(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),!!c&&a)return(0,hn.jsx)(Q,{ref:i,tree:n,node:c,renderId:e,children:(0,hn.jsx)(Xs,{tool:r,scopeNode:a,node:c,renderId:e,backdropEnabled:!0})})}var nd=g(ne());var Cn=g(h());function id({tool:r}){let{nodeId:o,renderId:e}=r,t=b(),n=t.tree,i=(0,nd.useRef)(null),a=ge(),c=n.getNodeWithTrait(o,k);if(Wt(i,()=>{t.exitTool()}),!!c&&a)return(0,Cn.jsx)(Q,{ref:i,tree:n,node:c,renderId:e,children:(0,Cn.jsx)(Zs,{tool:r,node:c,renderId:e,scopeNode:a})})}var xt=g(ne());var le=g(h());function sd(){let r=b(),o=S(()=>r.stores.treeStore.tree,[]),e=S(()=>r.stores.toolStore.highlightedRenderId,[]),t=S(()=>r.stores.mouseStore.lastUpdateType==="scroll",[]),n=S(()=>r.stores.mouseStore.isHoveringFloatingCanvasChrome,[]),i=Rt("onPageQuickAddRepeaterItems"),a=yt(e),c=o.get(a),s=Ar(c),f=!Ue(e),m=(0,xt.useMemo)(()=>{if(!i||!c||!e)return null;if(sr(r,c))return c;let P=c.ancestors();for(let F of P)if(sr(r,F))return F;return null},[c,e,i]),d=s&&f,u=d&&!t&&ke.isHighlightableNode(r,c,e),l=d&&ke.isUnexpectedlyUnselectableNode(r,c,e),C=d&&!l&&!n&&ke.isClickableNode(r,c,e),w=!!m&&!t,I=Hf({highlightedNode:c,highlightedRenderId:e,engine:r}),E=Jf(c,e);return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(jf,{notAllowedCursor:l}),d&&(0,le.jsxs)(le.Fragment,{children:[C&&(0,le.jsx)(Q,{tree:o,node:c,renderId:e,className:j(fr,!u&&Wc,I),onMouseDown:E}),w&&(0,le.jsx)(Qf,{tree:o,highlightedRenderId:e,repeaterNode:m})]})]})}function jf(r){let o=b(),e=(0,xt.useCallback)(()=>{o.stores.editableNodeHighlightStore.highlight(o,{type:"clickOnVoid"})},[]);return(0,le.jsx)("div",{"aria-hidden":!0,className:j(Xc,r.notAllowedCursor&&Kc),onClick:e})}function Hf({highlightedNode:r,highlightedRenderId:o,engine:e}){let t=Ar(r),n=!Ue(o);return!t||!n?yn:be.supportsNode(r)||Re.supportsNode(e,r,o)||Me.supportsNode(e,r,o)?qc:me.supportsNode(e,r)?Lc:yn}var Yf=r=>{switch(r){case"top":return jc;case"bottom":return Hc;case"left":return Yc;case"right":return Jc}};function Jf(r,o){let e=b();return(0,xt.useCallback)(()=>{!r||!o||(me.supportsNode(e,r)?e.startMoveTool(r.id,o,()=>{ad(e,r,o)||e.startHighlightTool()}):ad(e,r,o))},[r,o])}function ad(r,o,e){return qe.supportsNode(r,o,e)?(r.startComponentInstanceEditTool(o.id,e),!0):Le.supportsNode(r,o,e)?(r.startDateVariableEditTool(o.id,e,"mouse"),!0):Xe.supportsNode(r,o,e)?(r.startImageEditTool(o.id,e),!0):be.supportsNode(o)?(r.startRichTextEditTool(o.id,e,"mouse"),!0):Re.supportsNode(r,o,e)?(r.startRichTextVariableEditTool(o.id,e,"mouse"),!0):Me.supportsNode(r,o,e)?(r.startStringVariableEditTool(o.id,e,"mouse"),!0):We.supportsNode(r,o,e)?(r.startCollectionReferenceVariableEditTool(o.id,e,"mouse"),!0):Ke.supportsNode(r,o,e)?(r.startEnumVariableEditTool(o.id,e,"mouse"),!0):(r.stores.editableNodeHighlightStore.highlight(r,{type:"clickOnVoid"}),!1)}function Qf(r){let o=b(),{mouseStore:e}=o.stores,{tree:t,highlightedRenderId:n,repeaterNode:i}=r,a=S(()=>e.canvasMousePosition,[],mi),c=(0,xt.useMemo)(()=>{if(!i)return;let f=_i(t,i);if(!f)return;let m=f.cache.domRects,d=null;for(let[u,l]of m??[])d=d?Ee.merge(d,l):l;if(d)return d},[t,i]),s=(0,xt.useMemo)(()=>{let f="bottom";if(!i)return f;let m=hi(i)&&i.stackDirection==="horizontal"&&!i.stackWrapEnabled,d=t.convertFrameToCanvas(i,c,n);if(m){let P=d.x,F=P+d.width,x=window.scrollX,v=x+window.innerWidth,N=P>=x&&P<=v,Pe=F>=x&&F<=v;if(N&&!Pe)return"left";if(Pe&&!N)return"right";if(N&&Pe){let je=a.x-P,De=F-a.x;return je<De?"left":"right"}return"right"}let u=d.y,l=u+d.height,C=window.scrollY,w=C+window.innerHeight,I=u>=C&&u<=w,E=l>=C&&l<=w;if(I&&!E)return"top";if(E&&!I)return"bottom";if(I&&E){let P=a.y-u,F=l-a.y;return P<F?"top":"bottom"}return f},[i,n,c,a,t.convertFrameToCanvas]);return i?(0,le.jsx)(Q,{tree:t,node:i,renderId:n,className:ed,overrideRect:c,children:(0,le.jsxs)("button",{type:"button",className:j(Qc,Yf(s)),onMouseDown:()=>$f(o,i.id),[Jr]:"true",children:[(0,le.jsx)(ua,{className:$c,children:(0,le.jsx)(sa,{})}),(0,le.jsx)("div",{className:Zc})]})}):null}function $f(r,o){let{treeStore:e,projectStore:t,modalStore:n,accessStore:i}=r.stores,a=e.tree.getNodeWithTrait(o,Mr),c=Mr(a)&&bo(a)?Bi(e.tree,a.dataIdentifier):void 0,s=i.access?.userId;p(s,"User must be logged in"),p(c,"Collection node must exist");let f=Ao.create({isDraft:!0,privateToUserId:s});Zo(c,f),e.tree.insertNode(f,c.id,0),t.commitTreeAndSend(),n.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:nr(c),requiredFieldsOnly:!1,source:"on_page_hud",collectionNodeId:c.id,collectionItemId:f.id})}var he=g(ne());var ld="popout_pqnmppj";var Be=g(h()),tm=["right","left"],om={x:15,y:0};function cd({tool:r}){let{nodeId:o,renderId:e}=r,[t,n]=(0,he.useState)(null),i=b(),a=S(()=>i.stores.treeStore.tree,[]),c=a.getNodeWithTrait(o,Mt);function s(){i.exitTool()}if(c)return(0,Be.jsx)(Q,{tree:a,node:c,renderId:e,ref:n,children:(0,Be.jsxs)(Ro,{anchor:t,alignSelf:"center",attachTo:tm,offset:om,onClose:s,showArrow:!0,arrow:{anchor:t,alignSelf:"center"},fallbackToModalAppearance:!0,backdropTintEnabled:!1,children:[(0,Be.jsx)(Fa,{disableDivider:!0,onClose:s,children:(0,Be.jsx)(va,{title:"Image"})}),(0,Be.jsx)("div",{className:ld,children:Te(c.fillImage)?(0,Be.jsx)(rm,{node:c,dynamicValue:c.fillImage,renderId:e}):(0,Be.jsx)(im,{node:c})})]})})}function rm({node:r,dynamicValue:o,renderId:e}){return p(_(o),"Expected variable reference"),(0,Be.jsx)(nm,{node:r,variableReference:o,renderId:e})}function nm({node:r,variableReference:o,renderId:e}){let t=b(),n=S(()=>{let m=t.stores.treeStore,d=r.cache.getRenderInstance(e);return V(m.tree,m.sandboxCollectionData,o,"image",d?.collectionItemId)},[r,e,o]);p(n,"Variable info must exist");let{collectionItemNode:i,reducedControlProp:a,controlProp:c}=n;p(a.type==="responsiveimage","Expected reduced responsive image");let s=(0,he.useCallback)(m=>{i.set(Dr({[o.id]:m(c)})),t.stores.projectStore.commitTreeAndSend()},[i,o,c]),f=(0,he.useCallback)(()=>{i.set(Dr({[o.id]:{type:"image",value:void 0}})),t.stores.projectStore.commitTreeAndSend()},[i,o]);return(0,Be.jsx)(Ts,{controlProp:a,onChange:s,onRemove:f,maxExtraImages:0})}function im({node:r}){let o=b(),e=(0,he.useMemo)(()=>{let m={...ys(),...ws()};return hs(r,m),Is(r,m),m},[r]),t=(0,he.useCallback)(async m=>{let[d]=await m;d&&(is(r,d),o.stores.projectStore.commitTreeAndSend())},[r]),n=(0,he.useCallback)(m=>{fe(r.fillImage)&&(r.set({fillImage:si(r.fillImage,m)}),o.stores.projectStore.commitTreeAndSend())},[r]),i=(0,he.useCallback)(m=>{Gi(r)&&(r.set({altAttribute:m}),o.stores.projectStore.commitTreeAndSend())},[r]),a=(0,he.useCallback)(m=>{r.set({fillImageResize:m}),o.stores.projectStore.commitTreeAndSend()},[r]),c=(0,he.useCallback)(m=>{r.set({fillImageTileSize:m}),o.stores.projectStore.commitTreeAndSend()},[r]),s=(0,he.useCallback)((m,d)=>{r.set({fillImagePositionX:m,fillImagePositionY:d}),o.stores.projectStore.commitTreeAndSend()},[r]),f=(0,he.useCallback)(()=>{r.set({fillImage:void 0}),o.stores.projectStore.commitTreeAndSend()},[r]);return(0,Be.jsx)(Ns,{...e,imageReferences:e.fillImages,altText:e.altAttribute,onChangeImages:t,onChangeAssetSize:n,onChangeAltText:i,onChangeImageResize:a,onChangeFillImageSize:c,onChangeImagePosition:s,onRemoveImage:f})}var dd="grabCursor_g189l9ii",fd="moveHighlightParent_m1va6tk8";var pd=g(h());function md({tool:r}){let o=b(),e=S(()=>r.hasMoved,[r]),t=S(()=>o.stores.treeStore.tree,[]),n=t.get(r.nodeId);if(!n)return null;let i=t.get(n.parentid);if(!i)return null;let c=n.cache.getRenderInstance(r.renderId)?.parentRenderId??i.id;return(0,pd.jsx)(Q,{tree:t,node:i,renderId:c,className:j(e&&fd,dd)})}var yd=g(ne());var ud="warningButton_w1uyyr5z",gd="warningButtonIcon_w1z0oe1i";var po=g(h());function hd({richTextNode:r,webPageNode:o}){let e=b(),t=S(()=>e.stores.treeStore.tree,[]);return(0,yd.useMemo)(()=>{let i=t.getNodeWithTrait(r.originalid??r.id,k);return p(i,"originalNode must exist"),o.getTopLevelReplicaVariants().some(a=>{let c=so(a.id,i.id),s=t.get(c);return k(s)&&To(t,s,"html")&&s.getTextContent()!==i.getTextContent()})},[t,r,o])?(0,po.jsxs)(aa,{className:ud,onClick:()=>{e.exitTool(),e.stores.modalStore.set({richTextNodeId:r.id,source:"on_page_hud",type:"OnPageRichTextVariantOverride"})},children:[(0,po.jsx)(fa,{viewBox:"0 0 12 12",className:gd}),(0,po.jsx)(Qe,{children:"Responsive Text"})]}):null}var Cd="warningContainer_w1v62ead";var Zt=g(h());function wd({tool:r}){let{nodeId:o,renderId:e}=r,t=b(),n=S(()=>t.stores.treeStore.tree,[]),i=S(()=>t.stores.toolStore.editorOverlayClipPath,[]),a=S(()=>t.stores.toolStore.proseMirrorView,[]),c=n.getNodeWithTrait(o,k),s=ge();return!c||!s||!a?null:(0,Zt.jsxs)(Q,{tree:n,node:c,renderId:e,children:[(0,Zt.jsx)("div",{className:Cd,children:(0,Zt.jsx)(hd,{richTextNode:c,webPageNode:s})}),(0,Zt.jsx)(Hs,{tool:r,scopeNode:s,node:c,renderId:e,editorView:a,zoom:1,handleOutsideClick:f=>{f.target===f.currentTarget&&t.exitTool()},style:{clipPath:i}})]})}var uo=g(h());function Id({tool:r}){let{nodeId:o,renderId:e}=r,t=b(),n=S(()=>t.stores.treeStore.tree,[]),i=S(()=>t.stores.toolStore.validationWarning,[]),a=S(()=>t.stores.toolStore.editorOverlayClipPath,[]),c=n.getNodeWithTrait(o,k),s=ge();return!s||!c?null:(0,uo.jsxs)(Q,{tree:n,node:c,renderId:e,children:[(0,uo.jsx)(cr,{validationWarning:i}),(0,uo.jsx)(Ys,{tool:r,scopeNode:s,node:c,renderId:e,zoom:1,onClickOutside:f=>{f.target===f.currentTarget&&t.exitTool()},hasValidationWarning:!!i,style:{clipPath:a}})]})}var ce=g(h());function Ud(){let r=b(),{sandboxStore:o}=r.stores,{canvasHeight:e}=o.useState(),t=S(()=>r.stores.treeStore.tree.getPresetsListNode(),[]);return(0,ce.jsxs)("div",{className:Tc,style:{height:e??"initial"},children:[(0,ce.jsx)(Bc,{}),(0,ce.jsx)(cm,{}),(0,ce.jsx)(ps,{presetsListNode:t})]})}function cm(){let r=b(),{projectStore:o,modalStore:e}=r.stores,t=S(()=>r.stores.toolStore.tool,[]),n=S(()=>r.stores.canvasStore.finishedEditing,[]),{hasPermanentlyFailed:i}=o.useState(),a=e.useState(c=>c.active.type!=="None");if(!i&&!n&&!a){if(t instanceof me)return(0,ce.jsx)(md,{tool:t});if(t instanceof ke)return(0,ce.jsx)(sd,{});if(t instanceof Xe)return(0,ce.jsx)(cd,{tool:t});if(t instanceof be)return(0,ce.jsx)(wd,{tool:t});if(t instanceof Re)return(0,ce.jsx)(Gc,{tool:t});if(t instanceof Me)return(0,ce.jsx)(Id,{tool:t});if(t instanceof Le)return(0,ce.jsx)(rd,{tool:t});if(t instanceof We)return(0,ce.jsx)(Dc,{tool:t});if(t instanceof Ke)return(0,ce.jsx)(id,{tool:t});if(t instanceof qe)return(0,ce.jsx)(od,{tool:t})}}var Ze=g(h());function xd(){qt();let r=b(),o=S(()=>r.stores.canvasStore.isHidden,[]);return(0,pr.useEffect)(()=>{let e=({data:t})=>{if(at(t)&&t.apiVersion===1){let{type:n,position:i}=t;n==="showCanvas"&&at(i)&&io(i.top)&&(window.scrollTo({behavior:"instant",top:i.top}),setTimeout(()=>{r.stores.canvasStore.isHidden=!1,r.startHighlightTool(),r.stores.editableNodeHighlightStore.highlight(r,{type:"start"})},0))}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,pr.useEffect)(()=>{let{sandboxStore:e}=r.stores;o?e.hide():e.show()},[o]),dm(o),Il({channel:oi,toast:lt}),(0,Ze.jsx)(ha,{children:(0,Ze.jsxs)("div",{className:j(o&&El),children:[(0,Ze.jsx)(Ud,{}),(0,Ze.jsxs)("div",{className:Nl,[Yr]:"true",children:[(0,Ze.jsx)(vc,{}),(0,Ze.jsx)(yc,{}),(0,Ze.jsx)(Na,{padding:80}),(0,Ze.jsx)(Cl,{ref:r.stores.projectStore.filePickerRef})]})]})})}function dm(r){let o=b();(0,pr.useEffect)(()=>{if(r)return;let e=new Os;e.set("CommandOrControl+Z",o.undo.bind(o),"undo"),e.set("CommandOrControl+Shift+Z",o.redo.bind(o),"redo");function t(n){if(Wo())return;let i=e.get(n);i&&(i.action(n),n.preventDefault(),n.stopPropagation())}return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[r])}var bd=g(ne());function Fd(){(0,bd.useEffect)(()=>{let r=o=>{if(!at(o.data))return;let{apiVersion:e,type:t}=o.data;e===1&&t==="enterOnPageEditing"&&Ve("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-enter-on-page-editing"})};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[])}var Fn=g(ne());var jt="https://app.framerstatic.com/framer-logo-blue-23OMXQLR.png";var gr="button_b9jl8lf",yr="editorBarButtonPrimary_eptse9g";var vd="backdrop_bzafg2a",Sd="container_cnhgigm",Pd="textContainer_t1ookr3o",Ed="title_tyol4w7",Nd="subtitle_s7fryoi",Od="button_by9jupw",kd="buttonsContainer_b18g1n4a",Bd="closeModal_c1gc3a0q";var Ht=g(h());function Td({width:r=10,height:o=10,className:e}){return(0,Ht.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:o,fill:"none",className:e,"aria-hidden":"true",children:(0,Ht.jsxs)("g",{transform:"translate(2 2)",children:[(0,Ht.jsx)("path",{d:"M 0 0 L 6 6",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"}),(0,Ht.jsx)("path",{d:"M 0 6 L 6 0",fill:"transparent",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})})}var Ce=g(h());function pm({children:r,onClick:o,disabled:e,layoutId:t,duration:n}){return(0,Ce.jsx)(Ge.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:n,type:"spring",bounce:.2,delay:0},children:(0,Ce.jsx)(X,{type:"button",className:Od,onClick:o,enabled:!e,children:r})})}function Yt({logo:r,title:o,subtitle:e,buttons:t,showLearnMoreButton:n}){let i=()=>{window.open("https://www.framer.com/help/articles/on-page-editing","_blank")},a=()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*"),window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*")};return(0,Ce.jsx)(xe,{className:vd,onClick:a,children:(0,Ce.jsxs)(xe,{className:Sd,justifyContent:"center",alignItems:"center",onClick:c=>c.stopPropagation(),children:[(0,Ce.jsx)(xe,{onClick:a,className:Bd,children:(0,Ce.jsx)(Td,{})}),(0,Ce.jsxs)(xe,{className:Pd,gap:15,alignItems:"center",justifyContent:"center",children:[r,(0,Ce.jsxs)(xe,{gap:5,alignItems:"center",justifyContent:"center",children:[(0,Ce.jsx)(Ge.span,{layout:!0,className:Ed,children:o}),(0,Ce.jsx)(Ge.p,{layout:!0,className:Nd,children:e})]})]}),t||n?(0,Ce.jsxs)(xe,{className:kd,gap:10,children:[n?(0,Ce.jsx)(pm,{onClick:i,children:"Learn More"}):null,t||null]}):null]})})}var hr=g(h());function Ad(){let r=b();zt("editor_bar_impression",{page:"editor-bar-cookie-prompt"});async function o(){Ve("editor_bar_interaction",{page:"editor-bar-cookie-prompt",id:"editor-bar-allow-cookies"});try{await document.requestStorageAccess()}finally{await r.stores.accessStore.refresh()}}return(0,hr.jsx)(Yt,{logo:(0,hr.jsx)("img",{decoding:"async",width:36,src:jt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Continuing may require granting permissions in a browser dialog.",buttons:(0,hr.jsx)(X,{className:j(gr,yr),onClick:o,variant:"primary",children:"Continue"}),showLearnMoreButton:!0})}var Un=g(h());function Rd({children:r,onClick:o,disabled:e,layoutId:t,duration:n,className:i}){return(0,Un.jsx)(Ge.div,{layout:"position",layoutId:t,style:{width:"100%"},transition:{duration:n,type:"spring",bounce:.2,delay:0},children:(0,Un.jsx)(X,{type:"button",className:j(gr,i),onClick:o,enabled:!e,children:r})})}var Md="loginButtonLoading_l4nhz4u";var Jt=g(h());function Dd(){let r=b(),{isLoginInProgress:o}=r.stores.loginStore.useState();zt("editor_bar_impression",{page:"editor-bar-guest-page"});async function e(){Ve("editor_bar_interaction",{page:"editor-bar-guest-page",id:"editor-bar-login"}),await r.stores.loginStore.login()}return(0,Jt.jsx)(Yt,{logo:(0,Jt.jsx)("img",{decoding:"async",width:36,height:36,src:jt,alt:"Framer Logo"}),title:"Edit Page",subtitle:"Edit the page directly in the browser, without opening the app.",buttons:(0,Jt.jsx)(Rd,{onClick:e,disabled:o,className:yr,children:o?(0,Jt.jsx)("div",{className:Md,children:(0,Jt.jsx)(hl,{})}):"Continue"}),showLearnMoreButton:!0})}var xn=g(h()),gm="Page Edit",ym="To edit, ask the site owner for access to the project",hm="To edit, ask the site owner for content editing permissions";function bn({reason:r}){return zt("editor_bar_impression",{page:"editor-bar-no-access-page"}),(0,xn.jsx)(Yt,{logo:(0,xn.jsx)("img",{decoding:"async",width:36,src:jt,alt:"Framer Logo"}),title:gm,subtitle:r==="no-permission"?hm:ym,showLearnMoreButton:!0})}var go=g(h());function _d(){let r=b(),{access:o}=r.stores.accessStore.useState();switch(o.status){case"no-auth":return(0,go.jsx)(Dd,{});case"unknown":return(0,go.jsx)(Ad,{});case"no-access":return(0,go.jsx)(bn,{reason:"no-access"});case"no-permission":return(0,go.jsx)(bn,{reason:"no-permission"});case"success":case"error":return null;default:ro(o)}}var bt=g(h());function Gd(){let r=b(),{shouldRenderOnPageCanvas:o}=r.stores.accessStore.useState(),e=$e(()=>r.stores.routeStore.webPageNodeId,[],[r.stores.routeStore]);return(0,Fn.useEffect)(()=>{e&&r.stores.sandboxStore.waitForInitialLoad(e).then(()=>{window.parent.postMessage({apiVersion:1,type:"sandboxReadyState",data:{status:"ready"}},"*")}).catch(ie)},[e]),(0,Fn.useEffect)(()=>{r.performanceTracker.reportEditorBarReady()}),Fd(),(0,bt.jsxs)(bt.Fragment,{children:[(0,bt.jsx)(_d,{}),o&&(0,bt.jsx)(xd,{})]})}var Cr=class{constructor(o){this.engine=o;y(this,"state",0);y(this,"changes",new ta)}get inRendering(){return this.state===3}render(){if(this.state!==1)return;let o=this.changes,e=this.engine.stores;try{this.state=2,o.has(e.treeStore,e.routeStore)&&Do(e.treeStore.tree,e.treeStore.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,re.activeBundleHash,e.routeStore.localeId,void 0,e.routeStore.webPageNodeId),e.toolStore.tool?.update?.(),e.undoRedoManager.processScheduledEndUndoGroup({}),this.state=3,e.sandboxStore.update(),o.signalAllObservers(),Rs()}finally{this.state=0}}signalChanges(o){if(this.changes.addChanges(o),this.state!==0)return;this.state=1;let e=this.render.bind(this);setTimeout(e,0),As()}wrapHandler(o,e){let{projectStore:t}=this.engine.stores;return function(...n){let i=o.apply(this,n);return t.commitTreeAndSend(e!=="nonUserEvent"),i}}process(o,e){this.wrapHandler(o,e)()}processWhenReady(o,e){this.wrapHandler(o,e)()}async processWhenReadyAsync(o,e){return this.wrapHandler(o,e)()}runWhenIdle(o){requestIdleCallback(o)}runWithFullyLoadedTree(o,e){p(e.runInBackground,"Only background tasks are supported in the OnPageEngine for now.");let t=this.engine.tree.getService("loader"),n=()=>{o(),this.engine.stores.projectStore.commitTreeAndSend()};if(!t)return n(),ct;let i=t.prioritizeLoadingAllData({operationName:e.name,operationInBackground:!0,doNotTrack:e.doNotTrack}),a=t.afterAllDataLoaded(n);return()=>{i(),a()}}runBeforeNextFrame(o){requestAnimationFrame(o)}};var wr=class extends Oe{constructor(e,t,n){super();this.projectStore=e;this.hostnameStore=t;this.siteId=n;y(this,"_access")}get access(){return p(this._access,"Access not initialized"),this._access}get projectId(){return Vd(this.access)}get canEditContent(){let e=this.access;return e.status!=="success"?!1:e.data.permissions?.canEditContent==="on"}get shouldRenderOnPageCanvas(){return Qr()&&this.canEditContent}async set(e){if(this._access=e,this.shouldRenderOnPageCanvas){let t=Vd(e);e.userId&&t&&(this.projectStore.loadProject(e.userId,t),this.hostnameStore.loadHostnames(t).catch(ie))}Li.setUserId(e.userId??"null")}async refresh(){let e=await wl(this.siteId);await this.set(e)}},Cm=/^(?<name>.+--)?(?<id>[a-z0-9]{20})(?<hash>-[a-z0-9]+)?$/iu;function Vd(r){if(r.status==="success")return Cm.exec(r.data.projectSlug)?.groups?.id}var zd,Wd,Ft,vn,Sn;Wd=[A()],zd=[A()];var vt=class{constructor(o){this.scheduler=o;T(this,vn,U(Ft,8,this,[])),U(Ft,11,this);T(this,Sn,U(Ft,12,this)),U(Ft,15,this);y(this,"assetMap",new ii)}get assets(){return this._assets}get assetService(){return this._assetService}setAssetService(o){this._assetService=o,ai(o,e=>{e.assets&&(this._assets=e.assets,this.assetMap.set(e.assets),it.importCustomFonts(e.assets,Ne.isOn("customFontGrouping")))})}};Ft=te(null),vn=new WeakMap,Sn=new WeakMap,O(Ft,4,"_assets",Wd,vt,vn),O(Ft,4,"_assetService",zd,vt,Sn),oe(Ft,vt);async function qd(r){return Oa.post("/edit/notifications/page-edited",r)}var Ld,Kd,Xd,Zd,ve,Pn,En,Nn,On;Zd=[A()],Xd=[A()],Kd=[A()],Ld=[A()];var ot=class{constructor(o,e,t,n,i,a,c,s,f){this.scheduler=o;this.accessStore=e;this.routeStore=t;this.treeStore=n;this.projectStore=i;this.modalStore=a;this.undoRedoManager=c;this.exitTool=s;this.onChangeRoute=f;T(this,Pn,U(ve,8,this,!0)),U(ve,11,this);T(this,En,U(ve,12,this,null)),U(ve,15,this);T(this,Nn,U(ve,16,this,window.innerWidth)),U(ve,19,this);T(this,On,U(ve,20,this)),U(ve,23,this);window.addEventListener("resize",()=>{this._screenWidth=window.innerWidth})}get screenWidth(){return this._screenWidth}get temporaryCollectionItemNodeId(){return this._temporaryCollectionItemNodeId}set temporaryCollectionItemNodeId(o){this._temporaryCollectionItemNodeId=o,this.onChangeRoute()}async sendNotification(o){let e=this.accessStore.projectId;p(e,"Project ID must exist");let t=tt({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});p(t,"Web page node must exist");let n=ze(this.routeStore,this.treeStore,this),i;if(n){let a=Lt(this.routeStore,this.treeStore,this);p(a,"Collection item exists, so its parent collection must exist"),p(a.name,"Collection node must have a name"),i={notificationType:o,projectId:e,webPageNodeId:t.id,collectionItemNodeId:n.id,collectionItemTitle:wm(a,n),collectionTitle:a.name,pageType:"cms-detail"}}else i={notificationType:o,projectId:e,webPageNodeId:t.id,pageTitle:t.webMetadata?.title||Ma(this.treeStore.tree,t),pageType:"static"};await qd(i)}createTemporaryCollectionItem(){let o=Lt(this.routeStore,this.treeStore,this);if(!o)return;let e=this.accessStore.access?.userId;p(e,"User must be logged in");let t=o.getPrivateItemForUser(e);if(t)this.temporaryCollectionItemNodeId=t.id;else{let n=Ao.create({isDraft:!0,privateToUserId:e});this.treeStore.tree.insertNode(n,o.id,0),this.temporaryCollectionItemNodeId=n.id,Zo(o,n),this.projectStore.commitTreeAndSend()}}discardTemporaryCollectionItem(){let o=ze(this.routeStore,this.treeStore,this);p(o,"Collection item node must exist"),p(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),this.treeStore.tree.remove(o.id),this.projectStore.commitTreeAndSend(),this.clearTemporaryItem(),this.exitFullscreen()}saveTemporaryCollectionItem(){let o=ze(this.routeStore,this.treeStore,this);p(o,"Collection item node must exist"),p(o.id===this.temporaryCollectionItemNodeId,"Collection item must be temporary"),o?.set({privateToUserId:void 0}),this.projectStore.commitTreeAndSend(),this.finishEditingWithChanges(o.id,!0)}handleFinishEditing(){this.exitTool();let o=ze(this.routeStore,this.treeStore,this);if(!!!o?.privateToUserId){if(!this.treeStore.hasChanged()){this.handleDismissFinishEditing();return}let s=this.routeStore.projectLinkNodeId;if(!s)return;this.finishEditingWithChanges(s,!1);return}let t=Lt(this.routeStore,this.treeStore,this);if(p(t&&o,"Collection node and collection item node must exist"),!o.hasData()){this.discardTemporaryCollectionItem();return}let n=qo(t,o);Ss(t,o,n)&&this.projectStore.commitTreeAndSend();let c=vs(this.treeStore.tree,t,o,n).flatMap(s=>{let f=s.type;return pn[f]!==void 0?s.id:[]});c.length>0?this.modalStore.set({type:"OnPageCMSFieldsModal",fieldIdsToShow:c,requiredFieldsOnly:!0,source:"on_page_hud",collectionItemId:o.id,collectionNodeId:t.id}):this.saveTemporaryCollectionItem()}finishEditingWithChanges(o,e){this.finishedEditing={isNewItem:e,nodeId:o},Ve("editor_bar_interaction",{page:"editor-bar-project-page",id:"editor-bar-finish-editing-with-changes"});let t=e?"page-created":"page-edited";this.sendNotification(t).catch(ie)}handleDismissFinishEditing(){this.clearTemporaryItem(),this.undoRedoManager.clearUndoStack(),this.exitFullscreen()}exitFullscreen(){window.parent.postMessage({apiVersion:1,type:"exitFullscreen",position:{top:window.scrollY}},"*"),this.isHidden=!0}clearTemporaryItem(){this.finishedEditing=null,this.temporaryCollectionItemNodeId=void 0}};ve=te(null),Pn=new WeakMap,En=new WeakMap,Nn=new WeakMap,On=new WeakMap,O(ve,4,"isHidden",Zd,ot,Pn),O(ve,4,"finishedEditing",Xd,ot,En),O(ve,4,"_screenWidth",Kd,ot,Nn),O(ve,4,"_temporaryCollectionItemNodeId",Ld,ot,On),oe(ve,ot);function wm(r,o){let e=r.variables.find(gt);if(e?.associatedStringVariable){let t=o.getControlProp(e.associatedStringVariable);if(t&&t.type==="string"&&fe(t.value)&&t.value.trim())return t.value.trim()}return"a new page"}var Ir=class{updateComponentLoader(o,e){re.setModuleRevision(e,0);for(let t of o)re.updateEntity(t.identifier,t)}};var Im=0,jd,Ur,kn,$t;jd=[A()];var Qt=class{constructor(o){this.scheduler=o;T(this,kn,U(Ur,8,this)),U(Ur,11,this);T(this,$t);window.addEventListener("resize",()=>{this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)})}get editableNodesHighlight(){return this._editableNodesHighlight}onChangeRoute(){this._editableNodesHighlight&&(this._editableNodesHighlight=void 0)}cleanupAnimationOnFinish(o){Bt(this,$t)&&clearTimeout(Bt(this,$t)),ho(this,$t,window.setTimeout(()=>{this._editableNodesHighlight=void 0},o+100))}highlight(o,{type:e}){let t=ue({screenWidth:o.stores.canvasStore.screenWidth,tree:o.stores.treeStore.tree,webPageNodeId:o.stores.routeStore.webPageNodeId});if(!t)return;let n=[],i={x:0,y:window.scrollY,width:window.innerWidth,height:window.innerHeight},a=1/0,c=-1/0,s=!1;for(let f of t.walk())for(let[m]of f.cache.iterateRenderInstances()){if(!ke.isHighlightableNode(o,f,m))continue;s=!0;let d=o.tree.convertFrameToCanvas(f,void 0,m);if(!Um(i,d))continue;a=Math.min(a,d.y),c=Math.max(c,d.y+d.height);let u=o.tree.getRect(f,void 0,void 0,void 0,m),l=o.tree.transformMatrixToNode(f,void 0,void 0,m);n.push({renderId:m,width:u.width,height:u.height,transform:l.toString(),centerX:d.x+d.width/2,centerY:d.y+d.height/2})}if(n.length===0)lt({key:"editable-nodes-highlight-empty",type:"add",text:s?"Editable content is out of view, scroll to reveal it":"Content is not editable on this page",variant:"info"}),this._editableNodesHighlight=void 0;else{let f=e==="clickOnVoid",m=f?o.stores.mouseStore.windowMousePosition.x:i.width,d=f?o.stores.mouseStore.windowMousePosition.y:i.height/2,u=f?o.stores.mouseStore.canvasMousePosition.y:o.stores.mouseStore.scrollPosition.y,l=400,C=Math.max(m,window.innerWidth-m),w=Math.max(d,window.innerHeight-d),I=Math.sqrt(C**2+w**2)+l,E=Math.max(500,e==="clickOnVoid"?I:I*2),P=5,F=Math.max(0,Math.floor(a-P)),x=Math.ceil(c+P),v=xm(n,I,m,u);this._editableNodesHighlight={animationId:`editable-nodes-highlight-${Im++}`,minY:F,maxY:x,originX:m,originY:d-F+i.y,highlights:n,minRadius:v,maxRadius:I,gradientSize:l,animationDuration:E},this.cleanupAnimationOnFinish(E)}}};Ur=te(null),kn=new WeakMap,$t=new WeakMap,O(Ur,4,"_editableNodesHighlight",jd,Qt,kn),oe(Ur,Qt);function Um(r,o){return!(o.x>=Ee.maxX(r)||Ee.maxX(o)<=r.x||o.y>=Ee.maxY(r)||Ee.maxY(o)<=r.y)}function xm(r,o,e,t){let n=1/0;for(let i of r){let a=Math.sqrt(i.width**2+i.height**2),c=Math.abs(i.centerX-e),s=Math.abs(i.centerY-t),f=Math.sqrt(c**2+s**2),m=Math.max(0,f-a/2);n=Math.min(n,m)}return Number.isFinite(n)&&n<o?n:0}var xr=class extends ns{constructor(){super(...arguments);y(this,"hostnames");y(this,"testing",{setHostnames:e=>{this.hostnames=e}})}get customHostnameString(){return this.hostnames?.find(e=>e.type==="custom")?.hostname}get defaultHostnameString(){return this.hostnames?.find(e=>e.type==="default")?.hostname}async loadHostnames(e){let{hostnames:t}=await rs(e);this.hostnames=t}};var br=class extends Oe{constructor(e){super();this.sandboxStore=e}async ensureModuleEvaluatedInSandbox(e){await(await this.sandboxStore.getModulesRuntime()).loadModule(e.value)}hasModuleForIdentifier(e){return!!re.componentForIdentifier(e.value)}};var Fr=class extends Oe{constructor(e){super();this.accessStore=e;y(this,"isLoginInProgress",!1)}login(){let e=window.open(`${Io().login}?closeAfterSuccess=true`,"_blank");return e?this.startLoginWindowClosedPolling(e):Promise.resolve()}startLoginWindowClosedPolling(e){return this.isLoginInProgress=!0,new Promise(n=>{let i=setInterval(async()=>{e.closed&&(clearInterval(i),await this.accessStore.refresh(),this.isLoginInProgress=!1,n())},500)})}};var Hd,Yd,Jd,Qd,$d,ef,tf,of,rf,z,Bn,Tn,An,Rn,Mn,Dn,_n,Gn;rf=[A()],of=[A(ae.isEqual)],tf=[A(ae.isEqual)],ef=[A()],$d=[wt(ae.isEqual)],Qd=[A()],Jd=[A()],Yd=[A()],Hd=[A()];var we=class{constructor(o){this.scheduler=o;U(z,5,this);T(this,Bn,U(z,8,this)),U(z,11,this);T(this,Tn,U(z,12,this,ae(0,0))),U(z,15,this);T(this,An,U(z,16,this,ae(0,0))),U(z,19,this);T(this,Rn,U(z,20,this,!1)),U(z,23,this);T(this,Mn,U(z,24,this,!1)),U(z,27,this);T(this,Dn,U(z,28,this,!1)),U(z,31,this);T(this,_n,U(z,32,this,{canvasMousePosition:ae(0,0),windowMousePosition:ae(0,0)})),U(z,35,this);T(this,Gn,U(z,36,this,{canvasMousePosition:ae(0,0),windowMousePosition:ae(0,0)})),U(z,39,this);let e=this.onMouseMove.bind(this);document.addEventListener("mousemove",e);let t=this.onScroll.bind(this);document.addEventListener("scroll",t);let n=this.onMouseDown.bind(this);document.addEventListener("mousedown",n);let i=this.onMouseUp.bind(this);document.addEventListener("mouseup",i)}get lastUpdateType(){return this._lastUpdateType}get scrollPosition(){return this._scrollPosition}get windowMousePosition(){return this._windowMousePosition}get isMouseDown(){return this._isMouseDown}get canvasMousePosition(){return ae.add(this.windowMousePosition,this.scrollPosition)}get isHoveringChrome(){return this._isHoveringChrome}get isHoveringFloatingCanvasChrome(){return this._isHoveringFloatingCanvasChrome}get latest(){return this._latest}get previous(){return this._previous}updateInputState(){this._previous={canvasMousePosition:this._latest.canvasMousePosition,windowMousePosition:this._latest.windowMousePosition},this._latest={canvasMousePosition:this.canvasMousePosition,windowMousePosition:this.windowMousePosition}}onScroll(){this._scrollPosition=ae(window.scrollX,window.scrollY),this._lastUpdateType="scroll",this.updateInputState()}onMouseMove(o){this._isHoveringChrome=vl(o.target),this._isHoveringFloatingCanvasChrome=Sl(o.target),this._windowMousePosition=ae(o.clientX,o.clientY),this._lastUpdateType="mouseMove",this.updateInputState()}onMouseDown(o){this._isMouseDown=!0,this._lastUpdateType="mouseDown",this.updateInputState()}onMouseUp(){this._isMouseDown=!1,this._lastUpdateType="mouseUp",this.updateInputState()}};z=te(null),Bn=new WeakMap,Tn=new WeakMap,An=new WeakMap,Rn=new WeakMap,Mn=new WeakMap,Dn=new WeakMap,_n=new WeakMap,Gn=new WeakMap,O(z,4,"_lastUpdateType",rf,we,Bn),O(z,4,"_scrollPosition",of,we,Tn),O(z,4,"_windowMousePosition",tf,we,An),O(z,4,"_isMouseDown",ef,we,Rn),O(z,2,"canvasMousePosition",$d,we),O(z,4,"_isHoveringChrome",Qd,we,Mn),O(z,4,"_isHoveringFloatingCanvasChrome",Jd,we,Dn),O(z,4,"_latest",Yd,we,_n),O(z,4,"_previous",Hd,we,Gn),oe(z,we);var vr=class extends Oe{constructor(){super(...arguments);y(this,"colorModel","HEX")}};var nf=g(ne());var Sr=class extends Oe{constructor(e,t){super();this.assetStore=e;this.treeStore=t;y(this,"_hasPermanentlyFailed",!1);y(this,"project");y(this,"projectPromise",new Tt);y(this,"filePickerRef",(0,nf.createRef)())}get hasPermanentlyFailed(){return this._hasPermanentlyFailed}getProject(){return this.projectPromise}get resourceLimits(){}get featureFlags(){}get projectLicenseType(){return"freeSite"}loadProject(e,t){qt(),!this.project&&(this.project=new xl(this.treeStore.timeline,e,t),this.project.connect(),this.project.on("disconnect",this.onDisconnect,this),this.project.connection.on("disconnect",this.onDisconnect,this),this.project.on("update",n=>{this.treeStore.newTreeAfterRemoteUpdate(n)}),this.assetStore.setAssetService(this.project.assetService),this.projectPromise.resolve(this.project))}onDisconnect(e){ls(e)||(this._hasPermanentlyFailed=!0,e==="ClientNeedsUpdate"?lt({type:"add",variant:"warning",text:"A new version of Framer is available. Please reload the page to continue working.",key:"client-outdated",duration:1/0,icon:"warning",showCloseButton:"never"}):e==="Maintenance"?lt({type:"add",variant:"warning",text:"Framer is undergoing maintenance. Please reload to continue once we\u2019re back.",key:"maintenance-mode",duration:1/0,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>window.location.reload()}}):lt({type:"add",variant:"error",text:"Connection error: "+e,key:"connection-error",duration:1/0,icon:"error",showCloseButton:"never"}))}commitTreeAndSend(e=!0){p(this.project,"Project must be initialized"),p(!this.hasPermanentlyFailed,"Project is permanently failed");let t=this.treeStore.timeline.commitLocalTree();this.treeStore.newTreeAfterLocalUpdate(t,e),this.project.maybeSend()}};var af,sf,St,Vn,zn;sf=[A()],af=[A()];var Pt=class{constructor(o,e){this.scheduler=o;this.onChangeRoute=e;y(this,"localeId",Fi);T(this,Vn,U(St,8,this)),U(St,11,this);T(this,zn,U(St,12,this)),U(St,15,this);let t=({data:n})=>{if(at(n)&&n.apiVersion===1){let{type:i,nodeIds:a}=n;if(i==="updateNodeIds"&&at(a)&&fe(a.webPageNodeId)){let{webPageNodeId:c,collectionItemNodeId:s}=a;this._webPageNodeId=c,this._collectionItemNodeId=fe(s)?s:void 0,this.onChangeRoute()}}};window.addEventListener("message",t),window.parent.postMessage({apiVersion:1,type:"initializeComponent",component:"OnPageActiveRouteStore"},"*")}get collectionItemNodeId(){return this._collectionItemNodeId}get webPageNodeId(){return this._webPageNodeId}get projectLinkNodeId(){return this._collectionItemNodeId??this._webPageNodeId}};St=te(null),Vn=new WeakMap,zn=new WeakMap,O(St,4,"_collectionItemNodeId",sf,Pt,Vn),O(St,4,"_webPageNodeId",af,Pt,zn),oe(St,Pt);var lf="iframe_icxp2h1";var Pr=class extends Oe{constructor(e,t,n,i){super();this.componentsStore=e;this.treeStore=t;this.performanceTracker=n;this.updateGenerator=i;y(this,"config",Gs.onPageCanvas);y(this,"iframe");y(this,"remoteSandbox");y(this,"remoteControlsVisibility",new Tt);y(this,"remoteModulesRuntime",new Tt);y(this,"_canvasHeight");y(this,"webPageNodeIdToInitialLoadPromise",new Map);window.addEventListener("scroll",()=>{this.remoteSandbox?.scrollTo({behavior:"instant",top:window.scrollY})})}getControlsVisibility(){return this.remoteControlsVisibility}getModulesRuntime(){return this.remoteModulesRuntime}get canvasHeight(){return this._canvasHeight}loadSandbox(){qt(),p(!this.iframe,"Sandbox already loaded");let e=document.createElement("iframe");e.src=this.config.url,e.allow=Ms,e.sandbox.add("allow-scripts","allow-same-origin"),e.tabIndex=-1,e.id="canvas_sandbox",e.className=lf;let t=this.initializeSandbox.bind(this,e);e.addEventListener("load",t),this.iframe=e,this.hide(),document.body.append(e)}getInitialLoadPromise(e){let t=this.webPageNodeIdToInitialLoadPromise.get(e)??new Tt;return this.webPageNodeIdToInitialLoadPromise.set(e,t),t}async waitForInitialLoad(e){this.performanceTracker.reportCanvasLoaderViewed(),await this.getInitialLoadPromise(e)}async initializeSandbox(e){let t=e.contentWindow;p(t,"Sandbox didn't load correctly");let n=new Ds(et);n.setLocal(et.channels.componentsStore,this.componentsStore),n.setLocal(et.channels.sandboxStore,this),n.setLocal(et.channels.treeStore,this.treeStore);let i=n.getRemote(et.channels.sandbox),a=n.getRemote(et.channels.controlsVisibility),c=n.getRemote(et.channels.modulesRuntime),s=n.getRemote(et.channels.flags);await n.connect({target:t,url:this.config.origin}),this.remoteSandbox=i,this.remoteControlsVisibility.resolve(a),this.remoteModulesRuntime.resolve(c),new _s(s)}onHeightChange(e){this._canvasHeight=e}onInitialLoadComplete(e){this.performanceTracker.reportCanvasReady(),this.getInitialLoadPromise(e).resolve()}update(){let e=this.remoteSandbox;if(!e)return;let t=this.updateGenerator.getUpdate();wo(t)||e.update(t)}hide(){p(this.iframe,"Sandbox not loaded"),this.iframe.setAttribute("aria-hidden","true")}show(){p(this.iframe,"Sandbox not loaded"),this.iframe.removeAttribute("aria-hidden")}};var cf,Wn;cf=[wt()];var eo=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.treeStore=t;U(Wn,5,this)}get active(){let o=tt({tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId});return R(o,"webPageNode must be defined"),o}};Wn=te(null),O(Wn,2,"active",cf,eo),oe(Wn,eo);function df({editorNode:r,screenWidth:o,tree:e,webPageNodeId:t,windowMousePositionOnToolEntry:n}){let i=ue({screenWidth:o,tree:e,webPageNodeId:t});if(!i)return;let a=e.convertFrameToCanvas(r),c=e.getNodesInRect(i,a,!0),s=[],f=i.cache.layoutTemplateRects;if(f)for(let[P,F]of f)!F.canvasRect||!Ee.intersects(F.canvasRect,a)||s.push(new Vi({zIndex:F.domRect.zIndex,id:P,parentid:i.id}));let m=c.concat(s),d=Ji(m,e,{[i.id]:s}),u=d.findIndex(P=>P.id===r.id);if(u===-1)return;let l=d.slice(u+1);if(l.length===0)return;let w=e.transformMatrixToNode(r).inverse(),I=n?{x:n.x+window.scrollX,y:n.y+window.scrollY,width:1,height:1}:void 0,E=[];for(let P of l){let F=f?.get(P.id),x=e.convertFrameToCanvas(P);if(I&&Ee.intersects(I,x))continue;let v;if(F?.canvasCorners?v=F.canvasCorners:v=e.convertCornerPointsToCanvas(P),v.length===0)continue;let N=[];for(let{x:Pe,y:je}of v){let De=new DOMPoint(Pe,je).matrixTransform(w);N.push({x:De.x,y:De.y})}N.length!==0&&E.push(N)}if(E.length!==0)return{editorRect:a,polygons:E}}function ff({editorRect:r,polygons:o}){let e=`M ${-mt},${-mt} L ${-mt},${r.height+mt} L ${r.width+mt},${r.height+mt} L ${r.width+mt},${-mt} Z`;for(let t of o){let n=t[0];if(!n)continue;let i=[...t,n];for(let a of i)e+=` L ${a.x},${a.y}`;e+=" Z"}return`path("${e}")`}function mf(r){let o=[];for(let e of r){if(e.length===0)continue;let[t,...n]=e;if(!t)continue;let i=`M ${t.x},${t.y}`;for(let a of n)i+=` L ${a.x},${a.y}`;i+=" Z",o.push(i)}if(o.length!==0)return`path("${o.join(" ")}")`}var mt=100;var pf,uf,gf,yf,hf,Cf,wf,If,J,qn,Ln,Kn,Xn,Zn,to,jn;If=[A()],wf=[A()],Cf=[A()],hf=[A()],yf=[A()],gf=[A()],uf=[wt()],pf=[wt()];var Se=class{constructor(o,e,t,n,i){this.scheduler=o;this.treeStore=e;this.routeStore=t;this.canvasStore=n;this.mouseStore=i;U(J,5,this);T(this,qn,U(J,8,this)),U(J,11,this);T(this,Ln,U(J,12,this,Rr)),U(J,15,this);T(this,Kn,U(J,16,this)),U(J,19,this);T(this,Xn,U(J,20,this,null)),U(J,23,this);T(this,Zn,U(J,24,this)),U(J,27,this);T(this,to);T(this,jn,U(J,28,this)),U(J,31,this)}get tool(){return this._tool}set tool(o){ho(this,to,this.mouseStore.windowMousePosition),this._tool!==o&&(this._tool?.stop?.(),this._tool=o)}get windowMousePositionOnToolEntry(){return Bt(this,to)}get editorClipGeometryEntry(){let o=this.nodeInTextEditorId;if(!o||o===Rr)return null;let e=yt(o),t=this.treeStore.tree.get(e);if(!t)return null;let n=df({domLayoutUpdate:this.treeStore.domLayoutUpdate,editorNode:t,screenWidth:this.canvasStore.screenWidth,tree:this.treeStore.tree,webPageNodeId:this.routeStore.webPageNodeId,windowMousePositionOnToolEntry:Bt(this,to)});return n?{nodeId:e,geometry:n}:null}get editorOverlayClipPath(){let o=this.editorClipGeometryEntry;if(o)return ff(o.geometry)}get sandboxNodeInTextEditorClipPath(){let o=this.editorClipGeometryEntry;if(o)return mf(o.geometry.polygons)}validateCollectionControl(o){let e="required";if(!o)return;let{collectionItemNode:t,variableDefinition:n,collectionNode:i,controlDescription:a,controlProp:c}=o,s;(vo(n)||gt(n))&&(s=Lo(n,i.variables,t));let f=qo(i,t),m=n.type,d=Ko(m,a,c,s,void 0,So(n),f.get(n.id));this.validationWarning=d?.type===e?void 0:d}};J=te(null),qn=new WeakMap,Ln=new WeakMap,Kn=new WeakMap,Xn=new WeakMap,Zn=new WeakMap,to=new WeakMap,jn=new WeakMap,O(J,4,"highlightedRenderId",If,Se,qn),O(J,4,"nodeInTextEditorId",wf,Se,Ln),O(J,4,"proseMirror",Cf,Se,Kn),O(J,4,"proseMirrorView",hf,Se,Xn),O(J,4,"_tool",yf,Se,Zn),O(J,4,"validationWarning",gf,Se,jn),O(J,2,"editorClipGeometryEntry",uf,Se),O(J,2,"editorOverlayClipPath",pf,Se),oe(J,Se);var Uf,xf,Et,Hn,Yn;xf=[A()],Uf=[A()];var Nt=class{constructor(o,e,t){this.scheduler=o;this.routeStore=e;this.undoRedoManager=t;y(this,"layoutCache",new Ha);y(this,"sandboxCollectionData",new Ya("editor"));y(this,"sandboxVisibility",new Ja("editor"));T(this,Hn,U(Et,8,this,$i.createWithRouteSegmentRoot())),U(Et,11,this);T(this,Yn,U(Et,12,this,0)),U(Et,15,this);y(this,"timeline",new $a(this.tree));y(this,"treeIndexes",new Jn(this))}get tree(){return this._tree}get domLayoutUpdate(){return this._domLayoutUpdate}get remoteTreeVersion(){return this.timeline.remoteTreeVersion}getChangesForUndo(){let o=this.timeline.getLatestChangesForUndo();return o?o.filter(e=>!e.ignoreInUndo):[]}hasChanged(){return this.undoRedoManager.getUndoBufferSize()>0}getPartialIndexes(){return this.treeIndexes}getLoadedIndexes(){let o=this.tree.getService("loader");if(o){let e=o.numberOfScopesToLoad();throw new Error(`Some scopes are still loading: ${e} scopes left to load`)}return this.treeIndexes}onLayoutMeasure(o){let e=this.layoutCache.processLayoutMeasurements(o);e.size===0||ka(this.tree,this.layoutCache,e).size===0||this._domLayoutUpdate++}onSandboxRendered(o){let e=new Set;if(o.collectionUpdates){let t=this.sandboxCollectionData.import(o.collectionUpdates);for(let n of t){let i=yt(n);e.add(i)}}if(o.visibilityUpdates){let t=this.sandboxVisibility.import(o.visibilityUpdates);for(let n of t){let i=yt(n);e.add(i)}}if(e.size>0){let t=es(this.tree,e);Do(this.tree,this.layoutCache,this.sandboxCollectionData,this.sandboxVisibility,re.activeBundleHash,this.routeStore.localeId,void 0,t)}o.layoutMeasurements&&this.onLayoutMeasure(o.layoutMeasurements)}newTreeAfterRemoteUpdate(o){o.inEditor=!0,this._tree!==o&&(this._tree=o)}newTreeAfterLocalUpdate(o,e){if(o.inEditor=!0,this._tree===o)return;this._tree=o;let t=this.getChangesForUndo();e&&t.length>0&&this.undoRedoManager.addUndoEntry({changes:t})}};Et=te(null),Hn=new WeakMap,Yn=new WeakMap,O(Et,4,"_tree",xf,Nt,Hn),O(Et,4,"_domLayoutUpdate",Uf,Nt,Yn),oe(Et,Nt);var Jn=class{constructor(o){this.treeStore=o;y(this,"codeComponentNodeCache");y(this,"richTextNodeCache")}get codeComponents(){let o=this.treeStore.tree;if(this.codeComponentNodeCache?.tree===o)return this.codeComponentNodeCache.codeComponentNodes;let e=[];for(let t of o.root.walk())Ae(t)&&e.push(t);return this.codeComponentNodeCache={tree:o,codeComponentNodes:e},e}get richTextNodes(){let o=this.treeStore.tree;if(this.richTextNodeCache?.tree===o)return this.richTextNodeCache.richTextNodes;let e=[];for(let t of o.root.walk())k(t)&&e.push(t);return this.richTextNodeCache={tree:o,richTextNodes:e},e}};var Er=class extends as{};var Nr=class{constructor(o,e,t){y(this,"accessStore");y(this,"assetStore");y(this,"canvasStore");y(this,"componentsStore");y(this,"contextMenuStore");y(this,"editableNodeHighlightStore");y(this,"hostnameStore");y(this,"loadedExternalModulesStore");y(this,"loginStore");y(this,"modalStore");y(this,"modulesStore");y(this,"mouseStore");y(this,"persistedUserDefaults");y(this,"projectStore");y(this,"routeStore");y(this,"sandboxStore");y(this,"scopeStore");y(this,"toolStore");y(this,"treeStore");y(this,"undoRedoManager",new Er);y(this,"vectorsStore");this.assetStore=new vt(e),this.editableNodeHighlightStore=new Qt(e),this.routeStore=new Pt(e,()=>o.onChangeRoute()),this.componentsStore=new Ir,this.contextMenuStore=os.new(e,e),this.hostnameStore=xr.new(e),this.modalStore=ea.new(e,e),this.treeStore=new Nt(e,this.routeStore,this.undoRedoManager),this.projectStore=Sr.new(e,this.assetStore,this.treeStore),this.accessStore=wr.new(e,this.projectStore,this.hostnameStore,t),this.loginStore=Fr.new(e,this.accessStore),this.mouseStore=new we(e),this.canvasStore=new ot(e,this.accessStore,this.routeStore,this.treeStore,this.projectStore,this.modalStore,this.undoRedoManager,()=>o.exitTool(),()=>o.onChangeRoute()),this.toolStore=new Se(e,this.treeStore,this.routeStore,this.canvasStore,this.mouseStore),this.scopeStore=new eo(e,this.routeStore,this.treeStore),this.sandboxStore=Pr.new(e,this.componentsStore,this.treeStore,o.performanceTracker,o.sandboxUpdateGenerator),this.loadedExternalModulesStore=br.new(e,this.sandboxStore),this.modulesStore=Xa.new(e,e,this.treeStore,this.loadedExternalModulesStore,{codeEditorPreviewVisible:!1,mainView:0},this.projectStore.getProject().then(n=>n.modulesAPI),()=>{throw new Error("Can't make document readonly")},async n=>{await(await this.sandboxStore.getModulesRuntime()).insertTemporaryImportMap(n)},async()=>{throw new Error("Can't load all local modules")}),this.persistedUserDefaults=vr.new(e),this.vectorsStore=ss.new(e,this.modulesStore)}};var Or=class{constructor(){y(this,"editorBarReadyAt");y(this,"canvasReadyAt");y(this,"canvasLoaderViewedAt")}get editorBarReadyMs(){let o=Fm();if(!(Ue(o)||Ue(this.editorBarReadyAt)))return this.editorBarReadyAt-o}get canvasReadyMs(){if(!(Ue(this.canvasReadyAt)||Ue(this.editorBarReadyAt)))return this.canvasReadyAt-this.editorBarReadyAt}get perceivedCanvasLoadMs(){if(!Ue(this.canvasReadyAt))return Ue(this.canvasLoaderViewedAt)?0:Math.min(this.canvasReadyAt-this.canvasLoaderViewedAt,0)}reportEditorBarReady(){this.editorBarReadyAt=Date.now()}reportCanvasLoaderViewed(){this.canvasLoaderViewedAt=Date.now()}reportCanvasReady(){this.canvasReadyAt=Date.now(),this.sendCanvasLoadedEvent()}sendCanvasLoadedEvent(){let{canvasReadyMs:o,editorBarReadyMs:e,perceivedCanvasLoadMs:t}=this;Ue(o)||Ue(e)||Ue(t)||Ve("editor_bar_canvas_loaded",{editorBarReadyMs:e,canvasReadyMs:o,perceivedCanvasLoadMs:t})}};function Fm(){let r=new URLSearchParams(window.location.search).get("loadStart");if(!r)return;let o=Number(r);if(!Number.isNaN(o))return o}var kr=class{constructor(o){this.engine=o;y(this,"partialTreeSender");y(this,"previousWebPageNodeId");y(this,"previousCollectionItemNodeId");y(this,"previousBreakpointNodeId");y(this,"previousTemporaryCollectionItemNodeId");y(this,"previousStylePresetBreakpointClassNames");y(this,"previousLocalModules");y(this,"previousDependenciesModule");y(this,"previousAssets");y(this,"previousNodeInTextEditor");y(this,"previousNodeInTextEditorClipPath");y(this,"previousMoveToolState")}getUpdate(){let{canvasStore:o,modulesStore:e,routeStore:t,assetStore:n,treeStore:i,toolStore:a}=this.engine.stores,c={},s=tt({tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;s!==this.previousWebPageNodeId&&(this.previousWebPageNodeId=s,c.webPageNodeId=s);let f=ze(t,i,o)?.id;f!==this.previousCollectionItemNodeId&&(this.previousCollectionItemNodeId=f,c.collectionItemNodeId=f);let m=ue({screenWidth:o.screenWidth,tree:i.tree,webPageNodeId:t.webPageNodeId})?.id;m!==this.previousBreakpointNodeId&&(this.previousBreakpointNodeId=m,c.breakpointNodeId=m);let d=o.temporaryCollectionItemNodeId??null;d!==this.previousTemporaryCollectionItemNodeId&&(this.previousTemporaryCollectionItemNodeId=d,c.temporaryCollectionItemNodeId=d);let u=i.tree.getPresetsListNode(),l=vm(u,o.screenWidth);l!==this.previousStylePresetBreakpointClassNames&&(this.previousStylePresetBreakpointClassNames=l,c.stylePresetBreakpointClassNames=l);let C=e.localModules;C!==this.previousLocalModules&&(this.previousLocalModules=C,c.localModules=new Map(C));let w=e.dependenciesModule;w!==this.previousDependenciesModule&&(this.previousDependenciesModule=w,c.dependenciesModule=w);let I=n.assets;I!==this.previousAssets&&(this.previousAssets=I,c.assets=I),this.partialTreeSender??=new Vs(i.timeline,"canvas");let E=this.partialTreeSender.update(s);wo(E)||(c.partialTreeUpdate=E);let P=a.nodeInTextEditorId??null;P!==this.previousNodeInTextEditor&&(this.previousNodeInTextEditor=P,c.nodeInTextEditorId=P);let F=a.sandboxNodeInTextEditorClipPath??null;F!==this.previousNodeInTextEditorClipPath&&(this.previousNodeInTextEditorClipPath=F,c.nodeInTextEditorClipPath=F);let x=a.tool instanceof me?a.tool.state:void 0;return de(x,this.previousMoveToolState)||(this.previousMoveToolState=x,c.moveToolState=x??null),c}},vm=pi((r,o)=>{let e=zs(r);return Ws(e,o)});var Br=class{constructor(o){this.siteId=o;y(this,"name","OnPageEngine");y(this,"sandboxUpdateGenerator",new kr(this));y(this,"performanceTracker",new Or);y(this,"scheduler",new Cr(this));y(this,"stores");this.stores=new Nr(this,this.scheduler,o),this.stores.projectStore.getProject().then(e=>{p(this.stores.assetStore.assetService,"assetsService must be initialized"),Za(this,this.stores.assetStore.assetService,this.stores.projectStore.filePickerRef),Ra(e.api,this.stores.assetStore.assetService),this.stores.modulesStore.initialize().catch(ie),e.connection.on("connect",t=>{t&&this.stores.modulesStore.refresh().catch(ie)})})}get tree(){return this.stores.treeStore.tree}startHighlightTool(){this.stores.toolStore.tool=new ke(this)}startComponentInstanceEditTool(o,e){this.stores.toolStore.tool=new qe(this,o,e)}startDateVariableEditTool(o,e,t){this.stores.toolStore.tool=new Le(this,o,e,t)}startCollectionReferenceVariableEditTool(o,e,t){this.stores.toolStore.tool=new We(this,o,e,t)}startEnumVariableEditTool(o,e,t){this.stores.toolStore.tool=new Ke(this,o,e,t)}startImageEditTool(o,e){this.stores.toolStore.tool=new Xe(this,o,e)}startRichTextEditTool(o,e,t){this.stores.toolStore.tool=new be(this,o,e,t)}startRichTextVariableEditTool(o,e,t){this.stores.toolStore.tool=new Re(this,o,e,t)}startStringVariableEditTool(o,e,t){this.stores.toolStore.tool=new Me(this,o,e,t)}startMoveTool(o,e,t){this.stores.toolStore.tool=new me(this,o,e,t)}exitTool(){this.startHighlightTool()}onChangeRoute(){this.stores.editableNodeHighlightStore.onChangeRoute(),this.exitTool()}getStateToken(){return this.stores.undoRedoManager.getUndoBufferSize()}undo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.undo?e.tool.undo():o.peekUndo()&&(o.undo(this.tree),t.commitTreeAndSend(!1))}redo(){let{undoRedoManager:o,toolStore:e,projectStore:t}=this.stores;e.tool?.redo?e.tool.redo():o.peekRedo()&&(o.redo(this.tree),t.commitTreeAndSend(!1))}beginUndoGroup(){this.stores.undoRedoManager.beginUndoGroup()}endUndoGroup(){this.stores.undoRedoManager.scheduleEndUndoGroup()}};var pt=g(h());fi({enableFontStore:!0,fetchGoogleFontsList:ms,fetchFontshareFontsList:fs,fetchBuiltInFontsList:cs});async function Lv(r,o){let e=new Br(o);await e.stores.accessStore.set(r),e.stores.sandboxStore.loadSandbox(),ts(e.stores.assetStore.assetMap),it.importFramerFonts(Si),Ka(),Object.assign(window,{engine:e,componentLoader:re}),ds((0,pt.jsx)(ki.Provider,{value:e,children:(0,pt.jsx)(Es,{forceDarkMode:!0,children:(0,pt.jsx)(ya,{mode:"onPageEditing",children:(0,pt.jsxs)(bl,{children:[(0,pt.jsx)(Gd,{}),(0,pt.jsx)(nl,{})]})})})}),document.getElementById("root"))}export{Lv as renderEditorBar};
//# sourceMappingURL=https://app.framerstatic.com/render-LZ7GINTA.mjs.map
